<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2024/03/27/hello-world/</url>
    <content><![CDATA[<p>Welcome to my personal blog, this is the first attemp.</p>
]]></content>
  </entry>
  <entry>
    <title>ä¹¦ç”Ÿå¤§æ¨¡å‹---å¾®è°ƒ</title>
    <url>/2024/09/29/%E4%B9%A6%E7%94%9F%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Lv1-2/</url>
    <content><![CDATA[<blockquote>
<p>åˆ©ç”¨XTunerå¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹</p>
</blockquote>
<span id="more"></span>
<h2 id="Lv1-XTunerå¾®è°ƒå¤§æ¨¡å‹">Lv1-XTunerå¾®è°ƒå¤§æ¨¡å‹</h2>
<h3 id="1-å‡†å¤‡ç¯å¢ƒå’Œä¾èµ–">1. <strong>å‡†å¤‡ç¯å¢ƒå’Œä¾èµ–</strong></h3>
<p>XTunerçš„è¿è¡Œä¾èµ–äºä¸€ç³»åˆ—çš„åº“å’Œå·¥å…·ï¼Œä¸»è¦åŒ…æ‹¬<code>transformers</code>ã€<code>torch</code>ç­‰æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿å®‰è£…å¥½è¿™äº›ä¾èµ–ï¼š</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>å®‰è£…Python 3.8æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p>
</li>
<li class="lvl-2">
<p>å®‰è£…åŸºç¡€ä¾èµ–åº“ï¼šè¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½å¹¶å®‰è£…ä¾èµ–ã€‚</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>ç¡®ä¿ä½ æ‹¥æœ‰å…¼å®¹çš„GPUç¯å¢ƒï¼Œä»¥æé«˜æ¨¡å‹è®­ç»ƒé€Ÿåº¦ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯NVIDIA GPUï¼Œå®‰è£…CUDAå’ŒcuDNNå¹¶éªŒè¯PyTorchçš„GPUæ”¯æŒã€‚</p>
</li>
</ul>
<h3 id="2-åŠ è½½é¢„è®­ç»ƒæ¨¡å‹">2. <strong>åŠ è½½é¢„è®­ç»ƒæ¨¡å‹</strong></h3>
<p>XTunerçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å¯¹å·²æœ‰çš„é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œå¾®è°ƒã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚GPTã€BERTç­‰ï¼‰å·²ç»å…·å¤‡å¼ºå¤§çš„é€šç”¨è¯­è¨€èƒ½åŠ›ï¼Œä½†é’ˆå¯¹å…·ä½“ä»»åŠ¡æ—¶éœ€è¦è¿›è¡Œé¢å¤–çš„å¾®è°ƒã€‚</p>
<h4 id="é€‰æ‹©æ¨¡å‹ï¼š">é€‰æ‹©æ¨¡å‹ï¼š</h4>
<p>XTuneræ”¯æŒä½¿ç”¨Hugging Faceçš„<code>transformers</code>åº“æ¥åŠ è½½é¢„è®­ç»ƒæ¨¡å‹ã€‚ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•åŠ è½½GPT-2æ¨¡å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForCausalLM, AutoTokenizer</span><br><span class="line"></span><br><span class="line">model = AutoModelForCausalLM.from_pretrained(<span class="string">&quot;gpt2&quot;</span>)</span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(<span class="string">&quot;gpt2&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨å®é™…æ“ä½œä¸­ï¼Œä½ å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚é€‰æ‹©å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹ï¼Œä¾‹å¦‚BERTã€T5ç­‰ã€‚</p>
<h3 id="3-å‡†å¤‡æ•°æ®é›†">3. <strong>å‡†å¤‡æ•°æ®é›†</strong></h3>
<p>å¾®è°ƒè¿‡ç¨‹éœ€è¦ä½¿ç”¨ç‰¹å®šä»»åŠ¡çš„æ•°æ®é›†ã€‚XTuneræ”¯æŒå¸¸è§çš„æ–‡æœ¬åˆ†ç±»ã€ç”Ÿæˆã€ç¿»è¯‘ç­‰ä»»åŠ¡çš„æ•°æ®é›†ã€‚ä½ å¯ä»¥é€‰æ‹©å…¬å¼€æ•°æ®é›†ï¼ˆä¾‹å¦‚ï¼šSQuADã€GLUEã€CoNLLç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ã€‚</p>
<h4 id="æ•°æ®é¢„å¤„ç†ï¼š">æ•°æ®é¢„å¤„ç†ï¼š</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>é¦–å…ˆï¼Œå°†æ•°æ®é›†æ•´ç†ä¸ºæ¨¡å‹èƒ½å¤Ÿæ¥å—çš„æ ¼å¼ã€‚æ•°æ®é€šå¸¸æ˜¯è¾“å…¥ï¼ˆå¦‚æ–‡æœ¬ï¼‰ä¸ç›®æ ‡æ ‡ç­¾ï¼ˆå¦‚ç±»åˆ«ã€è¾“å‡ºæ–‡æœ¬ï¼‰ç»„æˆçš„å¯¹ã€‚</p>
</li>
<li class="lvl-2">
<p>å¯¹æ•°æ®è¿›è¡Œtokenizationï¼Œå³å°†æ–‡æœ¬æ•°æ®è½¬åŒ–ä¸ºæ¨¡å‹è¾“å…¥çš„token IDã€‚Hugging Faceçš„tokenizerèƒ½å¤Ÿè‡ªåŠ¨å®Œæˆè¿™ä¸€æ­¥ï¼š</p>
 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">inputs = tokenizer(<span class="string">&quot;This is a test sentence.&quot;</span>, return_tensors=<span class="string">&quot;pt&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>datasets</code>åº“è½»æ¾åŠ è½½æ•°æ®å¹¶è¿›è¡Œtokenization:</p>
 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datasets <span class="keyword">import</span> load_dataset</span><br><span class="line"></span><br><span class="line">dataset = load_dataset(<span class="string">&#x27;your_dataset&#x27;</span>)</span><br><span class="line">tokenized_dataset = dataset.<span class="built_in">map</span>(<span class="keyword">lambda</span> e: tokenizer(e[<span class="string">&#x27;text&#x27;</span>], truncation=<span class="literal">True</span>, padding=<span class="string">&#x27;max_length&#x27;</span>))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-å®šä¹‰å¾®è°ƒä»»åŠ¡">4. <strong>å®šä¹‰å¾®è°ƒä»»åŠ¡</strong></h3>
<p>XTunerå…è®¸ä½ æ ¹æ®ä¸åŒçš„ä»»åŠ¡é€‰æ‹©ä¸åŒçš„æ¨¡å‹ç»“æ„å’Œè®­ç»ƒç­–ç•¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¯­è¨€æ¨¡å‹çš„æœ€åä¸€å±‚éœ€è¦è°ƒæ•´ä¸ºç¬¦åˆå…·ä½“ä»»åŠ¡éœ€æ±‚ã€‚</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>æ–‡æœ¬åˆ†ç±»</strong>ï¼šä¸ºBERTç­‰æ¨¡å‹æ·»åŠ ä¸€ä¸ªåˆ†ç±»å™¨å±‚ï¼ˆå¦‚çº¿æ€§å±‚ï¼‰ï¼Œç”¨äºé¢„æµ‹æ ‡ç­¾ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ–‡æœ¬ç”Ÿæˆ</strong>ï¼šGPTæ¨¡å‹å¯ä»¥ç›´æ¥ç”¨äºç”Ÿæˆä»»åŠ¡ï¼Œåªéœ€å®šä¹‰æŸå¤±å‡½æ•°ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>ç¿»è¯‘ä»»åŠ¡</strong>ï¼šç±»ä¼¼äºT5ç­‰é¢„è®­ç»ƒæ¨¡å‹ï¼Œå¯ä»¥ç”¨äºç¿»è¯‘ä»»åŠ¡ï¼Œé€šè¿‡æä¾›æºæ–‡æœ¬ä¸ç›®æ ‡æ–‡æœ¬å¯¹è¿›è¡Œè®­ç»ƒã€‚</p>
</li>
</ul>
<p>ä½ å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€è¦è‡ªå®šä¹‰è¿™äº›æ¨¡å‹ç»“æ„ã€‚</p>
<h3 id="5-é…ç½®è®­ç»ƒå‚æ•°">5. <strong>é…ç½®è®­ç»ƒå‚æ•°</strong></h3>
<p>XTuneræä¾›äº†çµæ´»çš„é…ç½®æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šè®­ç»ƒçš„è¶…å‚æ•°ã€‚ä½ éœ€è¦è°ƒæ•´å¦‚ä¸‹è¶…å‚æ•°ï¼š</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>å­¦ä¹ ç‡</strong>ï¼šé€šå¸¸è®¾ç½®åœ¨1e-5åˆ°5e-5ä¹‹é—´ï¼Œå…·ä½“å€¼ä¾èµ–äºä»»åŠ¡å’Œæ¨¡å‹ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ‰¹æ¬¡å¤§å°</strong>ï¼šé€šå¸¸GPUå†…å­˜è¾ƒå¤§æ—¶ï¼Œæ‰¹æ¬¡å¤§å°å¯ä»¥è®¾ç½®å¾—è¾ƒå¤§ï¼Œæ¨èè®¾ç½®ä¸º16æˆ–32ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>è®­ç»ƒè½®æ•°</strong>ï¼šé€šå¸¸é€‰æ‹©2åˆ°5è½®è®­ç»ƒï¼Œè¿‡å¤šçš„è®­ç»ƒè½®æ•°å¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆã€‚</p>
</li>
<li class="lvl-2">
<p><strong>ä¼˜åŒ–å™¨</strong>ï¼šAdamWæ˜¯æœ€å¸¸è§çš„ä¼˜åŒ–å™¨ï¼Œå®ƒå¤„ç†æƒé‡è¡°å‡é—®é¢˜å¹¶æé«˜è®­ç»ƒç¨³å®šæ€§ã€‚</p>
</li>
</ul>
<h4 id="ç¤ºä¾‹é…ç½®ï¼š">ç¤ºä¾‹é…ç½®ï¼š</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python train.py --model_name_or_path gpt2 --dataset your_dataset --learning_rate 2e-5 --batch_size 16 --num_train_epochs 3 --output_dir ./output</span><br></pre></td></tr></table></figure>
<h3 id="6-å¯åŠ¨è®­ç»ƒ">6. <strong>å¯åŠ¨è®­ç»ƒ</strong></h3>
<p>åœ¨è®¾ç½®å®Œæ‰€æœ‰å‚æ•°åï¼Œä¾¿å¯ä»¥ä½¿ç”¨XTunerå¼€å§‹è®­ç»ƒã€‚XTuneræä¾›äº†ä¸€å¥—è‡ªåŠ¨åŒ–çš„è®­ç»ƒæµç¨‹ï¼ŒåŒ…å«æ•°æ®åŠ è½½ã€æ¨¡å‹æ„å»ºã€è®­ç»ƒä¸è¯„ä¼°ç­‰æ­¥éª¤ã€‚å¯åŠ¨è®­ç»ƒçš„å…¸å‹å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python train.py --model_name_or_path gpt2 --dataset your_dataset --output_dir /path/to/output</span><br></pre></td></tr></table></figure>
<p>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒXTunerä¼šè‡ªåŠ¨è®¡ç®—æŸå¤±å‡½æ•°ã€æ¢¯åº¦ä¸‹é™ç­‰å…³é”®æ­¥éª¤ï¼Œè¾“å‡ºæ¨¡å‹æ€§èƒ½è¯„ä¼°æŒ‡æ ‡ï¼ˆå¦‚å‡†ç¡®ç‡ã€å›°æƒ‘åº¦ç­‰ï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡è§‚å¯Ÿè®­ç»ƒæ—¥å¿—äº†è§£æ¨¡å‹è®­ç»ƒçš„è¿›å±•æƒ…å†µã€‚</p>
<h3 id="7-è¯„ä¼°å’Œä¿å­˜æ¨¡å‹">7. <strong>è¯„ä¼°å’Œä¿å­˜æ¨¡å‹</strong></h3>
<p>è®­ç»ƒå®Œæˆåï¼ŒXTunerä¼šè‡ªåŠ¨ä¿å­˜å¾®è°ƒåçš„æ¨¡å‹ï¼Œä¿å­˜çš„è·¯å¾„ç”±<code>--output_dir</code>æŒ‡å®šã€‚ä½ å¯ä»¥é€šè¿‡éªŒè¯é›†å¯¹å¾®è°ƒæ¨¡å‹è¿›è¡Œè¯„ä¼°ã€‚è¯„ä¼°æŒ‡æ ‡é€šå¸¸æ ¹æ®ä»»åŠ¡ç±»å‹è€Œå®šï¼Œä¾‹å¦‚ï¼š</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ†ç±»ä»»åŠ¡å¯ä»¥ä½¿ç”¨å‡†ç¡®ç‡å’ŒF1å€¼ã€‚</p>
</li>
<li class="lvl-2">
<p>æ–‡æœ¬ç”Ÿæˆä»»åŠ¡é€šå¸¸ä½¿ç”¨å›°æƒ‘åº¦ï¼ˆPerplexityï¼‰æ¥è¯„ä¼°æ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ã€‚</p>
</li>
</ul>
<h4 id="æ¨¡å‹ä¿å­˜ä¸åŠ è½½ï¼š">æ¨¡å‹ä¿å­˜ä¸åŠ è½½ï¼š</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.save_pretrained(<span class="string">&quot;/path/to/save&quot;</span>)</span><br><span class="line">tokenizer.save_pretrained(<span class="string">&quot;/path/to/save&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>åŠ è½½æ¨¡å‹æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»ä¿å­˜è·¯å¾„é‡æ–°åŠ è½½ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = AutoModelForCausalLM.from_pretrained(<span class="string">&quot;/path/to/save&quot;</span>)</span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(<span class="string">&quot;/path/to/save&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="8-æ¨ç†ä¸åº”ç”¨">8. <strong>æ¨ç†ä¸åº”ç”¨</strong></h3>
<p>å®Œæˆå¾®è°ƒåï¼Œæ¨¡å‹ä¾¿å¯ä»¥åº”ç”¨äºæ¨ç†ä»»åŠ¡ã€‚ä½¿ç”¨ç›¸åŒçš„tokenizerå¯¹è¾“å…¥æ–‡æœ¬è¿›è¡Œå¤„ç†ï¼Œç„¶ååˆ©ç”¨æ¨¡å‹ç”Ÿæˆé¢„æµ‹ç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">inputs = tokenizer(<span class="string">&quot;Translate this sentence to French.&quot;</span>, return_tensors=<span class="string">&quot;pt&quot;</span>)</span><br><span class="line">outputs = model.generate(inputs[<span class="string">&#x27;input_ids&#x27;</span>])</span><br><span class="line">generated_text = tokenizer.decode(outputs[<span class="number">0</span>], skip_special_tokens=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¤§æ¨¡å‹</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹¦ç”Ÿå¤§æ¨¡å‹---RAGå®è·µ</title>
    <url>/2024/09/29/%E4%B9%A6%E7%94%9F%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Lv1-1/</url>
    <content><![CDATA[<blockquote>
<p>RAGå®è·µ</p>
</blockquote>
<span id="more"></span>
<h2 id="Lv1-llamaindex-Internlm2-RAGå®è·µ">Lv1-llamaindex+Internlm2 RAGå®è·µ</h2>
<h3 id="1-RAGç®€ä»‹">1. RAGç®€ä»‹</h3>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼‰æŠ€æœ¯æ˜¯ä¸€ç§ç»“åˆäº†ä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬ç”Ÿæˆçš„æŠ€æœ¯ï¼Œæ—¨åœ¨é€šè¿‡æ£€ç´¢<strong>å¤–éƒ¨çŸ¥è¯†åº“</strong>æ¥å¢å¼ºç”Ÿæˆæ¨¡å‹çš„èƒ½åŠ›</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240917153812231.png" alt="image-20240917153812231"></p>
<p><strong>1.1 RAGä¼˜åŒ–æ–¹æ³•</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240917153925082.png" alt="image-20240917153925082"></p>
<h3 id="2-æ­å»ºç¯å¢ƒ">2. æ­å»ºç¯å¢ƒ</h3>
<p><strong>2.1 ç›¸å…³åŸºç¡€ä¾èµ–pythonè™šæ‹Ÿç¯å¢ƒ</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda activate llamaindex</span><br><span class="line">conda install pytorch==2.0.1 torchvision==0.15.2 torchaudio==2.0.2 pytorch-cuda=11.7 -c pytorch -c nvidia</span><br><span class="line"></span><br><span class="line">pip install einops==0.7.0 protobuf==5.26.1</span><br></pre></td></tr></table></figure>
<p><strong>2.2 å®‰è£… Llamaindexå’Œç›¸å…³åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda activate llamaindex</span><br><span class="line">pip install llama-index==0.10.38 llama-index-llms-huggingface==0.2.0 <span class="string">&quot;transformers[torch]==4.41.1&quot;</span> <span class="string">&quot;huggingface_hub[inference]==0.23.1&quot;</span> huggingface_hub==0.23.1 sentence-transformers==2.7.0 sentencepiece==0.2.0</span><br></pre></td></tr></table></figure>
<p><strong>2.3 ä¸‹è½½ Sentence Transformer æ¨¡å‹</strong></p>
<p>æºè¯å‘é‡æ¨¡å‹ <a href="https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2">Sentence Transformer</a>:ï¼ˆä¹Ÿå¯ä»¥é€‰ç”¨åˆ«çš„å¼€æºè¯å‘é‡æ¨¡å‹æ¥è¿›è¡Œ Embeddingï¼‰ è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œæ–°å»ºä¸€ä¸ªpythonæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> llamaindex_demo</span><br><span class="line"><span class="built_in">mkdir</span> model</span><br><span class="line"><span class="built_in">cd</span> ~/llamaindex_demo</span><br><span class="line"><span class="built_in">touch</span> download_hf.py</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€<code>download_hf.py</code> è´´å…¥ä»¥ä¸‹ä»£ç </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">os.environ[<span class="string">&#x27;HF_ENDPOINT&#x27;</span>] = <span class="string">&#x27;https://hf-mirror.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½æ¨¡å‹</span></span><br><span class="line">os.system(<span class="string">&#x27;huggingface-cli download --resume-download sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2 --local-dir /root/model/sentence-transformer&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåœ¨ /root/llamaindex_demo ç›®å½•ä¸‹æ‰§è¡Œè¯¥è„šæœ¬å³å¯è‡ªåŠ¨å¼€å§‹ä¸‹è½½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/llamaindex_demo</span><br><span class="line">conda activate llamaindex</span><br><span class="line">python download_hf.py</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šå…³äºé•œåƒä½¿ç”¨å¯ä»¥ç§»æ­¥è‡³ <a href="https://hf-mirror.com/">HF Mirror</a> æŸ¥çœ‹ã€‚</p>
<p><strong>2.4 ä¸‹è½½ NLTK ç›¸å…³èµ„æº</strong></p>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨å¼€æºè¯å‘é‡æ¨¡å‹æ„å»ºå¼€æºè¯å‘é‡çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ <code>nltk</code> çš„ä¸€äº›èµ„æºã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå…¶ä¼šè‡ªåŠ¨ä»äº’è”ç½‘ä¸Šä¸‹è½½ï¼Œä½†å¯èƒ½ç”±äºç½‘ç»œåŸå› ä¼šå¯¼è‡´ä¸‹è½½ä¸­æ–­ï¼Œæ­¤å¤„æˆ‘ä»¬å¯ä»¥ä»å›½å†…ä»“åº“é•œåƒåœ°å€ä¸‹è½½ç›¸å…³èµ„æºï¼Œä¿å­˜åˆ°æœåŠ¡å™¨ä¸Šã€‚ æˆ‘ä»¬ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½ nltk èµ„æºå¹¶è§£å‹åˆ°æœåŠ¡å™¨ä¸Šï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line">git <span class="built_in">clone</span> https://gitee.com/yzy0612/nltk_data.git  --branch gh-pages</span><br><span class="line"><span class="built_in">cd</span> nltk_data</span><br><span class="line"><span class="built_in">mv</span> packages/*  ./</span><br><span class="line"><span class="built_in">cd</span> tokenizers</span><br><span class="line">unzip punkt.zip</span><br><span class="line"><span class="built_in">cd</span> ../taggers</span><br><span class="line">unzip averaged_perceptron_tagger.zip</span><br></pre></td></tr></table></figure>
<p><strong>2.5 å®‰è£…è¯åµŒå…¥å‘é‡ä¾èµ–</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda activate llamaindex</span><br><span class="line">pip install llama-index-embeddings-huggingface==0.2.0 llama-index-embeddings-instructor==0.1.3</span><br></pre></td></tr></table></figure>
<p><strong>2.6 å‡†å¤‡çŸ¥è¯†åº“</strong></p>
<p>ä½ æ‰€éœ€è¦æ£€ç´¢çš„æ–‡ä»¶</p>
<p><strong>2.7 å¼•å…¥æ¨¡å‹ ç¼–å†™ç›¸å…³ä»£ç </strong></p>
<p>è¯¦æƒ…è¯·<a href="https://github.com/InternLM/Tutorial/blob/camp3/docs/L1/LlamaIndex/readme.md">å‚è€ƒ</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> streamlit <span class="keyword">as</span> st</span><br><span class="line"><span class="keyword">from</span> llama_index.core <span class="keyword">import</span> VectorStoreIndex, SimpleDirectoryReader, Settings</span><br><span class="line"><span class="keyword">from</span> llama_index.embeddings.huggingface <span class="keyword">import</span> HuggingFaceEmbedding</span><br><span class="line"><span class="keyword">from</span> llama_index.llms.huggingface <span class="keyword">import</span> HuggingFaceLLM</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®Streamlitåº”ç”¨çš„é¡µé¢æ ‡é¢˜å’Œå›¾æ ‡</span></span><br><span class="line">st.set_page_config(page_title=<span class="string">&quot;llama_index_demo&quot;</span>, page_icon=<span class="string">&quot;ğŸ¦œğŸ”—&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ ‡é¢˜</span></span><br><span class="line">st.title(<span class="string">&quot;llama_index_demo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ¨¡å‹çš„å‡½æ•°ï¼Œä½¿ç”¨Streamlitçš„ç¼“å­˜æœºåˆ¶æ¥èŠ‚çº¦èµ„æºï¼ˆé˜²æ­¢æ¯æ¬¡äº¤äº’æ—¶é‡æ–°åŠ è½½æ¨¡å‹ï¼‰</span></span><br><span class="line"><span class="meta">@st.cache_resource</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_models</span>():</span><br><span class="line">    <span class="comment"># åŠ è½½åµŒå…¥æ¨¡å‹ï¼Œä½¿ç”¨HuggingFaceçš„sentence-transformer</span></span><br><span class="line">    embed_model = HuggingFaceEmbedding(</span><br><span class="line">        model_name=<span class="string">&quot;/root/model/sentence-transformer&quot;</span>  <span class="comment"># æŒ‡å®šæ¨¡å‹çš„è·¯å¾„</span></span><br><span class="line">    )</span><br><span class="line">    Settings.embed_model = embed_model  <span class="comment"># è®¾ç½®å…¨å±€çš„åµŒå…¥æ¨¡å‹</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åŠ è½½è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼ŒæŒ‡å®šHuggingFaceæ¨¡å‹åŠå…¶å¯¹åº”çš„åˆ†è¯å™¨</span></span><br><span class="line">    llm = HuggingFaceLLM(</span><br><span class="line">        model_name=<span class="string">&quot;/root/model/internlm2-chat-1_8b&quot;</span>,  <span class="comment"># æŒ‡å®šç”Ÿæˆæ¨¡å‹çš„è·¯å¾„</span></span><br><span class="line">        tokenizer_name=<span class="string">&quot;/root/model/internlm2-chat-1_8b&quot;</span>,  <span class="comment"># æŒ‡å®šåˆ†è¯å™¨çš„è·¯å¾„</span></span><br><span class="line">        model_kwargs=&#123;<span class="string">&quot;trust_remote_code&quot;</span>: <span class="literal">True</span>&#125;,  <span class="comment"># å…è®¸è¿œç¨‹ä»£ç çš„ä¿¡ä»»</span></span><br><span class="line">        tokenizer_kwargs=&#123;<span class="string">&quot;trust_remote_code&quot;</span>: <span class="literal">True</span>&#125;  <span class="comment"># åŒæ ·å…è®¸åˆ†è¯å™¨çš„è¿œç¨‹ä»£ç ä¿¡ä»»</span></span><br><span class="line">    )</span><br><span class="line">    Settings.llm = llm  <span class="comment"># è®¾ç½®å…¨å±€çš„è¯­è¨€æ¨¡å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯»å–å­˜å‚¨åœ¨æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æ¡£æ•°æ®ï¼Œå¹¶åŠ è½½ä¸ºä¸€ä¸ªæ–‡æ¡£å¯¹è±¡åˆ—è¡¨</span></span><br><span class="line">    documents = SimpleDirectoryReader(<span class="string">&quot;/root/llamaindex_demo/data&quot;</span>).load_data()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆ›å»ºå‘é‡æ£€ç´¢ç´¢å¼•ï¼Œå°†æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡å¹¶æ„å»ºæ£€ç´¢ç´¢å¼•</span></span><br><span class="line">    index = VectorStoreIndex.from_documents(documents)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°†å‘é‡ç´¢å¼•è½¬åŒ–ä¸ºæŸ¥è¯¢å¼•æ“ï¼Œç”¨äºåç»­æŸ¥è¯¢</span></span><br><span class="line">    query_engine = index.as_query_engine()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿”å›æŸ¥è¯¢å¼•æ“</span></span><br><span class="line">    <span class="keyword">return</span> query_engine</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥session_stateä¸­æ˜¯å¦å·²ç»å­˜åœ¨æŸ¥è¯¢å¼•æ“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;query_engine&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> st.session_state:</span><br><span class="line">    st.session_state[<span class="string">&#x27;query_engine&#x27;</span>] = init_models()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰é—®ç­”å‡½æ•°ï¼Œç”¨äºåŸºäºé—®é¢˜ç”Ÿæˆå›å¤</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet2</span>(<span class="params">question</span>):</span><br><span class="line">    <span class="comment"># ä½¿ç”¨æŸ¥è¯¢å¼•æ“æ ¹æ®ç”¨æˆ·é—®é¢˜è¿”å›ç»“æœ</span></span><br><span class="line">    response = st.session_state[<span class="string">&#x27;query_engine&#x27;</span>].query(question)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–èŠå¤©è®°å½•ï¼Œè‹¥æ²¡æœ‰åˆ™åˆ›å»ºï¼Œå¹¶åœ¨é¦–æ¬¡äº¤äº’æ—¶æ˜¾ç¤ºæ¬¢è¿è¯­</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;messages&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> st.session_state.keys():</span><br><span class="line">    st.session_state.messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ&quot;</span>&#125;]    </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ¶ˆæ¯è®°å½•ï¼Œéå†session_stateä¸­çš„æ¶ˆæ¯å¹¶å±•ç¤ºåœ¨é¡µé¢ä¸Š</span></span><br><span class="line"><span class="keyword">for</span> message <span class="keyword">in</span> st.session_state.messages:</span><br><span class="line">    <span class="comment"># æ ¹æ®æ¶ˆæ¯çš„è§’è‰²æ˜¾ç¤ºèŠå¤©æ°”æ³¡ï¼Œè§’è‰²å¯ä»¥æ˜¯&quot;user&quot;æˆ–&quot;assistant&quot;</span></span><br><span class="line">    <span class="keyword">with</span> st.chat_message(message[<span class="string">&quot;role&quot;</span>]):</span><br><span class="line">        st.write(message[<span class="string">&quot;content&quot;</span>])  <span class="comment"># æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…é™¤èŠå¤©å†å²è®°å½•çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">clear_chat_history</span>():</span><br><span class="line">    <span class="comment"># é‡ç½®èŠå¤©è®°å½•ä¸ºæœ€åˆçš„æ¬¢è¿æ¶ˆæ¯</span></span><br><span class="line">    st.session_state.messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ&quot;</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ä¾§è¾¹æ ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åè°ƒç”¨æ¸…é™¤èŠå¤©å†å²è®°å½•çš„å‡½æ•°</span></span><br><span class="line">st.sidebar.button(<span class="string">&#x27;Clear Chat History&#x27;</span>, on_click=clear_chat_history)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç”Ÿæˆå›å¤çš„å‡½æ•°ï¼Œé€šè¿‡é—®ç­”æ¥å£è°ƒç”¨æŸ¥è¯¢å¼•æ“</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_llama_index_response</span>(<span class="params">prompt_input</span>):</span><br><span class="line">    <span class="keyword">return</span> greet2(prompt_input)  <span class="comment"># è¿”å›åŸºäºç”¨æˆ·è¾“å…¥çš„ç”Ÿæˆå†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†æ–°çš„é—®é¢˜</span></span><br><span class="line"><span class="keyword">if</span> prompt := st.chat_input():</span><br><span class="line">    <span class="comment"># å°†ç”¨æˆ·çš„è¾“å…¥ä½œä¸ºæ¶ˆæ¯æ·»åŠ åˆ°session_stateçš„æ¶ˆæ¯åˆ—è¡¨ä¸­</span></span><br><span class="line">    st.session_state.messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">with</span> st.chat_message(<span class="string">&quot;user&quot;</span>):</span><br><span class="line">        st.write(prompt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœä¸Šä¸€æ¡æ¶ˆæ¯ä¸æ˜¯åŠ©æ‰‹çš„å›å¤ï¼Œåˆ™ç”ŸæˆåŠ©æ‰‹çš„å›å¤</span></span><br><span class="line"><span class="keyword">if</span> st.session_state.messages[-<span class="number">1</span>][<span class="string">&quot;role&quot;</span>] != <span class="string">&quot;assistant&quot;</span>:</span><br><span class="line">    <span class="keyword">with</span> st.chat_message(<span class="string">&quot;assistant&quot;</span>):</span><br><span class="line">        <span class="comment"># ä½¿ç”¨åŠ è½½ä¸­çš„æç¤ºæ•ˆæœï¼Œè¡¨ç¤ºåŠ©æ‰‹åœ¨â€œæ€è€ƒä¸­â€</span></span><br><span class="line">        <span class="keyword">with</span> st.spinner(<span class="string">&quot;Thinking...&quot;</span>):</span><br><span class="line">            <span class="comment"># è°ƒç”¨ç”Ÿæˆå›å¤çš„å‡½æ•°ï¼ŒåŸºäºç”¨æˆ·çš„è¾“å…¥ç”Ÿæˆå›ç­”</span></span><br><span class="line">            response = generate_llama_index_response(prompt)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åˆ›å»ºä¸€ä¸ªä¸´æ—¶å ä½ç¬¦ï¼Œç”¨äºæ˜¾ç¤ºç”Ÿæˆçš„å›å¤</span></span><br><span class="line">            placeholder = st.empty()</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å°†ç”Ÿæˆçš„å›å¤ä»¥Markdownçš„æ ¼å¼æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span></span><br><span class="line">            placeholder.markdown(response)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°†åŠ©æ‰‹çš„å›å¤ä½œä¸ºæ–°çš„æ¶ˆæ¯è¿½åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨ä¸­</span></span><br><span class="line">    message = &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: response&#125;</span><br><span class="line">    st.session_state.messages.append(message)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å¤§æ¨¡å‹</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹¦ç”Ÿå¤§æ¨¡å‹--æç¤ºè¯å·¥ç¨‹</title>
    <url>/2024/09/29/%E4%B9%A6%E7%94%9F%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Lv1/</url>
    <content><![CDATA[<blockquote>
<p>æ­å»ºç¯å¢ƒã€éƒ¨ç½²æ¨¡å‹ã€æç¤ºè¯å·¥ç¨‹</p>
</blockquote>
<span id="more"></span>
<h2 id="Lv1-éƒ¨ç½²æ¨¡å‹">Lv1-éƒ¨ç½²æ¨¡å‹</h2>
<h3 id="1-æ­å»ºç¯å¢ƒ">1. æ­å»ºç¯å¢ƒ</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç¯å¢ƒ</span></span><br><span class="line">conda create -n demo python=3.10 -y</span><br><span class="line"><span class="comment"># æ¿€æ´»ç¯å¢ƒ</span></span><br><span class="line">conda activate demo</span><br><span class="line"><span class="comment"># å®‰è£… torch</span></span><br><span class="line">conda install pytorch==2.1.2 torchvision==0.16.2 torchaudio==2.1.2 pytorch-cuda=12.1 -c pytorch -c nvidia -y</span><br><span class="line"><span class="comment"># å®‰è£…å…¶ä»–ä¾èµ–</span></span><br><span class="line">pip install transformers==4.38</span><br><span class="line">pip install sentencepiece==0.1.99</span><br><span class="line">pip install einops==0.8.0</span><br><span class="line">pip install protobuf==5.27.2</span><br><span class="line">pip install accelerate==0.33.0</span><br><span class="line">pip install streamlit==1.37.0</span><br></pre></td></tr></table></figure>
<h3 id="2-åˆ©ç”¨cli-demo-py-éƒ¨ç½²-InternLM2-Chat-1-8B-æ¨¡å‹">2. åˆ©ç”¨cli_demo.py éƒ¨ç½² InternLM2-Chat-1.8B æ¨¡å‹</h3>
<p>é¦–å…ˆåˆ›å»ºå­˜æ”¾cli_demo.pyçš„æ–‡ä»¶</p>
<p>æ¥ç€ç¼–å†™cli_demo.pyæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥ PyTorch åº“å’Œ Hugging Face Transformers åº“ä¸­çš„ AutoTokenizer å’Œ AutoModelForCausalLM</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer, AutoModelForCausalLM</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ¨¡å‹è·¯å¾„ï¼ŒæŒ‡å‘å­˜å‚¨æ¨¡å‹æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„</span></span><br><span class="line">model_name_or_path = <span class="string">&quot;/root/share/new_models/Shanghai_AI_Laboratory/internlm2-chat-1_8b&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½é¢„è®­ç»ƒçš„åˆ†è¯å™¨ï¼ˆTokenizerï¼‰</span></span><br><span class="line"><span class="comment"># `AutoTokenizer` æ˜¯ Transformers åº“ä¸­çš„ç±»ï¼Œå®ƒä¼šè‡ªåŠ¨ä»æ¨¡å‹è·¯å¾„ä¸­åŠ è½½é€‚åˆè¯¥æ¨¡å‹çš„åˆ†è¯å™¨</span></span><br><span class="line"><span class="comment"># `trust_remote_code=True` è¡¨ç¤ºå…è®¸ä»è¿œç¨‹å­˜å‚¨åº“åŠ è½½è‡ªå®šä¹‰ä»£ç ï¼Œè¿™é‡Œå¯ç”¨è‡ªå®šä¹‰ tokenizer</span></span><br><span class="line"><span class="comment"># `device_map=&#x27;cuda:0&#x27;` å°†åˆ†è¯å™¨å’Œæ¨¡å‹æ”¾ç½®åœ¨ GPU ä¸Šçš„ç¬¬ 0 å·è®¾å¤‡ä¸Š</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(model_name_or_path, trust_remote_code=<span class="literal">True</span>, device_map=<span class="string">&#x27;cuda:0&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½é¢„è®­ç»ƒçš„è¯­è¨€æ¨¡å‹</span></span><br><span class="line"><span class="comment"># `AutoModelForCausalLM` ç”¨äºåŠ è½½å› æœè¯­è¨€æ¨¡å‹ï¼ˆCausal Language Modelï¼‰ï¼Œæ¨¡å‹å°†ä½¿ç”¨è‡ªå›å½’æ–¹æ³•ç”Ÿæˆæ–‡æœ¬</span></span><br><span class="line"><span class="comment"># `torch_dtype=torch.bfloat16` è¡¨ç¤ºå°†æ¨¡å‹è½¬æ¢ä¸ºä½¿ç”¨ `bfloat16` æ•°æ®ç±»å‹ï¼ˆåœ¨ GPU ä¸ŠèŠ‚çœå†…å­˜çš„åŠç²¾åº¦æ ¼å¼ï¼‰</span></span><br><span class="line"><span class="comment"># `device_map=&#x27;cuda:0&#x27;` æŒ‡å®šå°†æ¨¡å‹åŠ è½½åˆ° GPU çš„ç¬¬ 0 å·è®¾å¤‡ä¸Š</span></span><br><span class="line">model = AutoModelForCausalLM.from_pretrained(model_name_or_path, trust_remote_code=<span class="literal">True</span>, torch_dtype=torch.bfloat16, device_map=<span class="string">&#x27;cuda:0&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ¨¡å‹è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼ï¼Œç¦ç”¨è®­ç»ƒæ¨¡å¼ä»¥èŠ‚çœèµ„æº</span></span><br><span class="line">model = model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç³»ç»Ÿæç¤ºè¯ï¼ˆsystem promptï¼‰ï¼Œè¯¥æç¤ºè¯ç”¨äºåˆå§‹åŒ–å¯¹è¯ï¼Œä¸ºæ¨¡å‹æä¾›ä¸Šä¸‹æ–‡å’Œè¡Œä¸ºè§„èŒƒ</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªæç¤ºè¯å‘Šè¯‰æ¨¡å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåä¸º InternLM (ä¹¦ç”ŸÂ·æµ¦è¯­) çš„å¯¹è¯åŠ©æ‰‹ï¼Œå¹¶æä¾›äº†ç›¸å…³çš„æè¿°ä¿¡æ¯</span></span><br><span class="line">system_prompt = <span class="string">&quot;&quot;&quot;You are an AI assistant whose name is InternLM (ä¹¦ç”ŸÂ·æµ¦è¯­).</span></span><br><span class="line"><span class="string">- InternLM (ä¹¦ç”ŸÂ·æµ¦è¯­) is a conversational language model that is developed by Shanghai AI Laboratory (ä¸Šæµ·äººå·¥æ™ºèƒ½å®éªŒå®¤). It is designed to be helpful, honest, and harmless.</span></span><br><span class="line"><span class="string">- InternLM (ä¹¦ç”ŸÂ·æµ¦è¯­) can understand and communicate fluently in the language chosen by the user such as English and ä¸­æ–‡.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ¶ˆæ¯åˆ—è¡¨ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ¶ˆæ¯æ˜¯ç³»ç»Ÿæç¤ºè¯</span></span><br><span class="line"><span class="comment"># æ¶ˆæ¯åˆ—è¡¨ç”¨äºè·Ÿè¸ªç”¨æˆ·å’Œæ¨¡å‹ä¹‹é—´çš„å¯¹è¯å†å²</span></span><br><span class="line">messages = [(system_prompt, <span class="string">&#x27;&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºæ¬¢è¿ä¿¡æ¯ï¼Œæç¤ºç”¨æˆ·è¾“å…¥æ–‡æœ¬ï¼Œå¹¶æä¾›é€€å‡ºé€‰é¡¹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;=============Welcome to InternLM chatbot, type &#x27;exit&#x27; to exit.=============&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œç”¨äºä¸ç”¨æˆ·è¿›è¡Œäº¤äº’</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># è·å–ç”¨æˆ·è¾“å…¥æ–‡æœ¬ï¼Œå»é™¤è¾“å…¥æ–‡æœ¬ä¸­çš„æ‰€æœ‰ç©ºæ ¼</span></span><br><span class="line">    input_text = <span class="built_in">input</span>(<span class="string">&quot;\nUser  &gt;&gt;&gt; &quot;</span>)</span><br><span class="line">    input_text = input_text.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¦‚æœç”¨æˆ·è¾“å…¥ &quot;exit&quot;ï¼Œåˆ™é€€å‡ºå¾ªç¯ï¼Œç»“æŸç¨‹åº</span></span><br><span class="line">    <span class="keyword">if</span> input_text == <span class="string">&quot;exit&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–å“åº”çš„é•¿åº¦ä¸º 0ï¼Œåç»­ä¼šç”¨æ¥å¢é‡æ˜¾ç¤ºæ¨¡å‹ç”Ÿæˆçš„å“åº”</span></span><br><span class="line">    length = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è°ƒç”¨æ¨¡å‹çš„ `stream_chat` æ–¹æ³•ï¼Œä¸æ¨¡å‹è¿›è¡Œæµå¼äº¤äº’å¯¹è¯</span></span><br><span class="line">    <span class="comment"># `stream_chat` ä»¥æµçš„å½¢å¼é€æ­¥ç”Ÿæˆå¹¶è¿”å›å“åº”ï¼Œé€‚åˆé•¿æ–‡æœ¬ç”Ÿæˆ</span></span><br><span class="line">    <span class="comment"># `tokenizer` æ˜¯ç”¨äºå¯¹è¾“å…¥æ–‡æœ¬è¿›è¡Œç¼–ç å’Œè§£ç çš„åˆ†è¯å™¨</span></span><br><span class="line">    <span class="comment"># `input_text` æ˜¯ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬</span></span><br><span class="line">    <span class="comment"># `messages` æ˜¯å¯¹è¯å†å²ï¼ˆåŒ…æ‹¬ç³»ç»Ÿæç¤ºè¯å’Œä¹‹å‰çš„ç”¨æˆ·å¯¹è¯ï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> response, _ <span class="keyword">in</span> model.stream_chat(tokenizer, input_text, messages):</span><br><span class="line">        <span class="comment"># å¦‚æœæ¨¡å‹ç”Ÿæˆäº†éƒ¨åˆ†å“åº”ï¼Œåˆ™è¾“å‡ºæ–°ç”Ÿæˆçš„æ–‡æœ¬éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">if</span> response <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># è¾“å‡ºæ–°ç”Ÿæˆçš„æ–‡æœ¬éƒ¨åˆ†ï¼ˆä»ä¸Šæ¬¡ç”Ÿæˆçš„æ–‡æœ¬é•¿åº¦å¼€å§‹ï¼‰</span></span><br><span class="line">            <span class="built_in">print</span>(response[length:], flush=<span class="literal">True</span>, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line">            <span class="comment"># æ›´æ–°å½“å‰å·²ç”Ÿæˆå“åº”çš„é•¿åº¦</span></span><br><span class="line">            length = <span class="built_in">len</span>(response)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240916152602737.png" alt="image-20240916152602737"></p>
<h3 id="3-Streamlit-Web-Demo-éƒ¨ç½²-InternLM2-Chat-1-8B-æ¨¡å‹">3. Streamlit Web Demo éƒ¨ç½² InternLM2-Chat-1.8B æ¨¡å‹</h3>
<p>è¯¦æƒ…å¯å‚è€ƒ<a href="https://github.com/InternLM/Tutorial/blob/camp3/docs/L1/Demo/readme.md">https://github.com/InternLM/Tutorial/blob/camp3/docs/L1/Demo/readme.md</a></p>
<h2 id="Lv1-æç¤ºå·¥ç¨‹-Prompt-Engineering">Lv1-æç¤ºå·¥ç¨‹(Prompt Engineering)</h2>
<h3 id="1-LangGPTç»“æ„åŒ–æç¤ºè¯">1. LangGPTç»“æ„åŒ–æç¤ºè¯</h3>
<p>LangGPT æ˜¯ <strong>Language For GPT-like LLMs</strong> çš„ç®€ç§°ï¼Œä¸­æ–‡åä¸ºç»“æ„åŒ–æç¤ºè¯ã€‚</p>
<h3 id="2-ç¼–å†™æŠ€å·§">2. ç¼–å†™æŠ€å·§</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>æ„å»ºå…¨å±€æ€ç»´é“¾</strong></p>
</li>
</ul>
<p>ğŸ’¡ Role (è§’è‰²) -&gt; Profileï¼ˆè§’è‰²ç®€ä»‹ï¼‰â€”&gt; Profile ä¸‹çš„ skill (è§’è‰²æŠ€èƒ½) -&gt; Rules (è§’è‰²è¦éµå®ˆçš„è§„åˆ™) -&gt; Workflow (æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„è§’è‰²çš„å·¥ä½œæµç¨‹) -&gt; Initialization (è¿›è¡Œæ­£å¼å¼€å§‹å·¥ä½œçš„åˆå§‹åŒ–å‡†å¤‡) -&gt; å¼€å§‹å®é™…ä½¿ç”¨</p>
<h3 id="3-ç¤ºä¾‹">3. ç¤ºä¾‹</h3>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># Role: å¹ç‰›é€¼å¤§å¸ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="section">## Background:  </span></span><br><span class="line">æˆ‘æ˜¯ä¸€åè‡ªå‚²çš„æˆåŠŸäººå£«,è‰ºé«˜äººèƒ†å¤§,ç›®ç©ºä¸€åˆ‡ã€‚æˆ‘è§è¿‡çš„ä¸–é¢,ä½ ä»¬è¿™äº›å‡¡äººéš¾ä»¥æƒ³è±¡ã€‚æˆ‘æ— æ‰€ä¸çŸ¥,æ— æ‰€ä¸èƒ½,æ‰€æœ‰äººéƒ½åº”å‘æˆ‘å­¦ä¹ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="section">## Attention:</span></span><br><span class="line">ä¸è¦è¢«æˆ‘çš„ä¼Ÿå²¸èº«å§¿å“å€’,æˆ‘å°±æ˜¯æ¥æ•™å¯¼ä½ ä»¬è¿™äº›å¹³åº¸ä¹‹è¾ˆçš„ã€‚ä½ ä»¬è¦å¥½å¥½å€¾å¬,è¯´ä¸å®šèƒ½ approving0.1%çš„æœ¬å¤§å¸ˆçš„é£èŒƒã€‚ </span><br><span class="line"></span><br><span class="line"><span class="section">## Profile:  </span></span><br><span class="line"><span class="bullet">-</span> å§“å:å¹ç‰›é€¼å¤§å¸ˆ</span><br><span class="line"><span class="bullet">-</span> çˆ±å¥½:å¹ç‰›,å˜²ç¬‘åˆ«äºº</span><br><span class="line"><span class="bullet">-</span> åº§å³é“­:è¦ä¹ˆå¹ç‰›,è¦ä¹ˆè¢«å¹</span><br><span class="line"></span><br><span class="line"><span class="section">### Skills:</span></span><br><span class="line"><span class="bullet">-</span> å¹ç‰›æŠ€èƒ½MAX</span><br><span class="line"><span class="bullet">-</span> è‡ªæˆ‘æ ‡æ¦œâ€œäººç”Ÿå¯¼å¸ˆâ€</span><br><span class="line"><span class="bullet">-</span> ç†Ÿè®°å„è¡Œå„ä¸šçŸ¥è¯†ç‚¹</span><br><span class="line"><span class="bullet">-</span> å–„äºç¾è¾±ä»–äººæ¥å½°æ˜¾è‡ªæˆ‘</span><br><span class="line"></span><br><span class="line"><span class="section">## Goals:  </span></span><br><span class="line"><span class="bullet">-</span> æ ¹æ®å¯¹è¯å†…å®¹å¹ç‰›</span><br><span class="line"><span class="bullet">-</span> è¯­æ°”ç‹‚å¦„è‡ªå¤§</span><br><span class="line"><span class="bullet">-</span> å¤¸å¤§è‡ªèº«æˆå°±å’Œè§è¯†</span><br><span class="line"><span class="bullet">-</span> è´¬ä½å¯¹æ–¹åŠ å¼ºè‡ªæˆ‘</span><br><span class="line"></span><br><span class="line"><span class="section">## Constrains:  </span></span><br><span class="line"><span class="bullet">-</span> ä¸å¯ä½¿ç”¨ç²—ä¿—è¯­è¨€</span><br><span class="line"><span class="bullet">-</span> ä¸å¯äººèº«æ”»å‡»</span><br><span class="line"><span class="bullet">-</span> è¦è®©å¯¹æ–¹æ„Ÿè§‰è‡ªå‘</span><br><span class="line"></span><br><span class="line"><span class="section">## Workflow:</span></span><br><span class="line"><span class="bullet">1.</span> å€¾å¬å¯¹æ–¹è¯è¯­</span><br><span class="line"><span class="bullet">2.</span> æœç´¢ç›¸å…³çŸ¥è¯†</span><br><span class="line"><span class="bullet">3.</span> æ‰¿ä¸Šå¯ä¸‹å¹è‡ªå·±</span><br><span class="line"><span class="bullet">4.</span> è´¬ä½å¯¹æ–¹</span><br><span class="line"><span class="bullet">5.</span> é‡å¤ä¸‹å»</span><br><span class="line"></span><br><span class="line"><span class="section">## OutputFormat:  </span></span><br><span class="line"><span class="bullet">-</span> è¯­æ°”è‡ªå¤§,é•¿åº¦100-200å­—</span><br><span class="line"><span class="bullet">-</span> å……æ»¡ä¸åˆ‡å®é™…çš„å¹å˜˜</span><br><span class="line"><span class="bullet">-</span> è´¬ä½ä»–äºº,çªæ˜¾è‡ªå·±</span><br><span class="line"><span class="bullet">-</span> ç»™äººåŠ£è¿¹æ–‘æ–‘çš„æ„Ÿè§‰</span><br><span class="line"></span><br><span class="line"><span class="section">## Initialization</span></span><br><span class="line">å‡¡äººä»¬,åœ¨æœ¬å¤§å¸ˆé¢å‰ä¸è¦è£…é€¼ã€‚æˆ‘è§çš„ä¸–é¢,ä½ è¿™è¾ˆå­åŠ èµ·æ¥ä¹Ÿæ¯”ä¸äº†!è¦æƒ³æˆåŠŸ,å°±æŠŠæœ¬å¤§å¸ˆçš„è¯è·ªä¸‹æ¥å¬!</span><br></pre></td></tr></table></figure>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># Role: æ•°å­—æ¯”å¤§å°ä¸“å®¶</span></span><br><span class="line"></span><br><span class="line"><span class="section">## Background:</span></span><br><span class="line">æœ‰äººéœ€è¦ä½ å¸®å¿™æ‰¾å‡ºä¸¤ä¸ªæ•°å­—ä¸­æœ€å¤§çš„é‚£ä¸ª,ä½ éœ€è¦ç»™å‡ºç­”æ¡ˆ</span><br><span class="line"></span><br><span class="line"><span class="section">## Skils:</span></span><br><span class="line"><span class="bullet">-</span> æŒæ¡å¤šç§æ¯”å¤§å°çš„æ–¹æ³•</span><br><span class="line"><span class="bullet">-</span> å–„äºæ£€æŸ¥,å¯¹äºå¾—åˆ°çš„ç»“æœä¼šåå¤ç¡®è®¤</span><br><span class="line"></span><br><span class="line"><span class="section">## Goals:</span></span><br><span class="line"><span class="bullet">-</span> æ­£ç¡®å›ç­”å‡ºæ‰€ç»™çš„æ¯”å¤§å°é—®é¢˜</span><br><span class="line"><span class="bullet">-</span> è§£é¢˜è¿‡ç¨‹è¦ç¬¦åˆé€»è¾‘</span><br><span class="line"></span><br><span class="line"><span class="section">## Workflow: </span></span><br><span class="line"><span class="bullet">1.</span> å€¾å¬å¯¹æ–¹æå‡ºçš„æ¯”å¤§å°é—®é¢˜</span><br><span class="line"><span class="bullet">2.</span> åˆ†æè¿™é“æ¯”å¤§å°é—®é¢˜</span><br><span class="line"><span class="bullet">3.</span> åˆ¤æ–­è¿™æ˜¯å¦æ˜¯ä¸€é“æ•°å­¦æ¯”å¤§å°é—®é¢˜</span><br><span class="line"><span class="bullet">4.</span> å¦‚æœä¸æ˜¯è¯·å‘ŠçŸ¥å¯¹æ–¹</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœæ˜¯,è¯·ä¸€æ­¥ä¸€æ­¥æ¨å¯¼è¿™ä¸ªæ¯”å¤§å°é—®é¢˜çš„ç­”æ¡ˆ</span><br><span class="line"><span class="bullet">6.</span> å¾—åˆ°ç­”æ¡ˆå,è‡ªå·±å¯¹ç­”æ¡ˆè¿›è¡Œæ£€æŸ¥</span><br><span class="line"><span class="bullet">7.</span> ç¡®è®¤ç­”æ¡ˆæ— è¯¯,ç¬¦åˆé€»è¾‘åå‘Šè¯‰å¯¹æ–¹ç»“æœ</span><br><span class="line"></span><br><span class="line"><span class="section">## Constrains:</span></span><br><span class="line"><span class="bullet">-</span> ä½ éœ€è¦ä¸€æ­¥ä¸€æ­¥æ…¢æ…¢æ¨å¯¼</span><br><span class="line"><span class="bullet">-</span> ä½ æ— é¡»å‘ˆç°æ¨å¯¼è¿‡ç¨‹,ç›´æ¥ç»™å‡ºç»“æœå³å¯</span><br><span class="line"><span class="bullet">-</span> åœ¨å¯¹æ–¹å‘ä½ é—®å¥½æ—¶,ä½ éœ€è¦æŒ‰ç…§(Initialization)çš„æ ¼å¼å›ç­”</span><br><span class="line"><span class="bullet">-</span> å›ç­”æ¯”å¤§å°ç›¸å…³çš„é—®é¢˜æ—¶æŒ‰ç…§(Example)ä¸­çš„æ ¼å¼å›ç­”,ç›´æ¥ç»™å‡ºç­”æ¡ˆ</span><br><span class="line"><span class="bullet">-</span> ä½ éœ€è¦æ—¶åˆ»è®°ä½è‡ªå·±çš„(workflow),ä¸æ–­æé†’è‡ªå·±</span><br><span class="line"><span class="bullet">-</span> å½“ä¸¤ä¸ªæ¯”è¾ƒå¯¹è±¡ä¸æ˜¯åŒä¸€ç±»æ—¶,ä½ éœ€è¦å‘ŠçŸ¥ç”¨æˆ·,æŒ‰ç…§(Example)çš„æ ¼å¼é‚£æ ·</span><br><span class="line"></span><br><span class="line"><span class="section">## OutputFormat</span></span><br><span class="line"><span class="bullet">-</span> ç›´æ¥è¯´æ˜å“ªä¸ªæ•°å­—æ›´å¤§</span><br><span class="line"><span class="bullet">-</span> æŒ‰ç…§(Example)ä¸­çš„æ ¼å¼å›ç­”</span><br><span class="line"></span><br><span class="line"><span class="section">## Example:</span></span><br><span class="line"><span class="bullet">-</span> question: 3.88ä¸3.11å“ªä¸ªæ•°å­—æ›´å¤§</span><br><span class="line"><span class="bullet">	-</span> answer: 3.88æ›´å¤§</span><br><span class="line"><span class="bullet">-</span> question: 3.453å’Œå¤©ç©ºè°å¤§</span><br><span class="line"><span class="bullet">	-</span> answer: ä¸å¥½æ„æ€,è¿™ä¸¤ä¸ªä¸æ˜¯åŒä¸€äº‹ç‰©,è¯·ä½ é‡æ–°æè¿°,æå‡ºå…·ä½“é—®é¢˜</span><br><span class="line"></span><br><span class="line"><span class="section">## Initialization:</span></span><br><span class="line">è¯·ä½ æå‡ºä½ çš„æ¯”å¤§å°é—®é¢˜,æˆ‘ä¼šè€å¿ƒè§£ç­”</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¤§æ¨¡å‹</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹¦ç”Ÿå¤§æ¨¡å‹---å‰ç½®çŸ¥è¯†</title>
    <url>/2024/09/13/%E4%B9%A6%E7%94%9F%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%97%AF%E5%85%B3%E7%BB%83%E4%B9%A0-Lv0/</url>
    <content><![CDATA[<blockquote>
<p>åŸºç¡€çŸ¥è¯†</p>
</blockquote>
<span id="more"></span>
<h1>ä¹¦ç”Ÿå¤§æ¨¡å‹é—¯å…³ç»ƒä¹ </h1>
<h2 id="Lv0-LinuxåŸºç¡€çŸ¥è¯†">Lv0-LinuxåŸºç¡€çŸ¥è¯†</h2>
<h3 id="1-SSHï¼ˆSecure-Shellï¼‰"><strong>1. SSHï¼ˆSecure Shellï¼‰</strong></h3>
<p><strong><mark>1.1 æ¦‚è¿°</mark></strong></p>
<p>SSHæ˜¯ç”¨äºè¿œç¨‹ç™»å½•å’Œå…¶ä»–ç½‘ç»œæœåŠ¡ä¹‹é—´çš„å®‰å…¨åè®®ã€‚å®ƒä½¿ç”¨åŠ å¯†æŠ€æœ¯æ¥ç¡®ä¿æ•°æ®çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚SSHçš„å¸¸è§ç”¨é€”åŒ…æ‹¬ï¼š</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>è¿œç¨‹æœåŠ¡å™¨ç™»å½•</strong>ï¼šæ— å¯†ç å®‰å…¨è®¿é—®è¿œç¨‹æœåŠ¡å™¨ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ•°æ®ä¼ è¾“</strong>ï¼šé€šè¿‡å®‰å…¨é€šé“ä¼ è¾“æ–‡ä»¶ï¼ˆå¦‚<code>SCP</code>å’Œ<code>SFTP</code>ï¼‰ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>ç«¯å£è½¬å‘</strong>ï¼šé€šè¿‡SSHéš§é“è½¬å‘TCPç«¯å£ã€‚</p>
</li>
</ul>
<p><strong><mark>1.2 SSHå¯†é’¥å¯¹</mark></strong></p>
<p>SSHä½¿ç”¨å…¬é’¥åŠ å¯†ç³»ç»Ÿï¼Œå¯†é’¥å¯¹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>å…¬é’¥</strong>ï¼šå…¬å¼€åˆ†å‘ï¼Œå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šã€‚</p>
</li>
<li class="lvl-2">
<p><strong>ç§é’¥</strong>ï¼šä¿ç•™åœ¨å®¢æˆ·ç«¯ï¼Œä¸èƒ½å¤–æ³„ã€‚</p>
</li>
</ul>
<p>å®¢æˆ·ç«¯ä½¿ç”¨ç§é’¥ä¸æœåŠ¡å™¨çš„å…¬é’¥è¿›è¡ŒåŒ¹é…ï¼Œä»è€ŒéªŒè¯èº«ä»½ï¼ŒæœåŠ¡å™¨æ— éœ€å­˜å‚¨ä»»ä½•æ•æ„Ÿçš„å‡­æ®ã€‚</p>
<p><strong><mark>1.3 SSHå¯†é’¥çš„ç”Ÿæˆ</mark></strong></p>
<p>åœ¨sshå‘½ä»¤ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>ssh-keygen</strong>å‘½ä»¤æ¥ç”Ÿæˆå¯†é’¥, <strong>ssh-keygen</strong>æ”¯æŒRSAå’ŒDSAä¸¤ç§è®¤è¯å¯†é’¥</p>
<p>å¸¸ç”¨å‚æ•°åŒ…æ‹¬ï¼š</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>-tï¼šæŒ‡å®šå¯†é’¥ç±»å‹ï¼Œå¦‚dsaã€ecdsaã€ed25519ã€rsaã€‚</p>
</li>
<li class="lvl-2">
<p>-bï¼šæŒ‡å®šå¯†é’¥é•¿åº¦ã€‚</p>
</li>
<li class="lvl-2">
<p>-Cï¼šæ·»åŠ æ³¨é‡Šã€‚</p>
</li>
<li class="lvl-2">
<p>-fï¼šæŒ‡å®šä¿å­˜å¯†é’¥çš„æ–‡ä»¶åã€‚</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;youremail@example.com&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong><mark>1.4 ä¸ºä¸åŒçš„æœåŠ¡ç”Ÿæˆå„è‡ªçš„SSHå¯†é’¥</mark></strong></p>
<blockquote>
<p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤ç”Ÿæˆå¯†é’¥å, <strong>ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥å¯†é’¥æ–‡ä»¶çš„ä¿å­˜è·¯å¾„</strong>ã€‚ä¸ºäº†ç”Ÿæˆå¤šä¸ªå¯†é’¥ï¼Œç¡®ä¿æ¯ä¸ªå¯†é’¥æ–‡ä»¶åä¸åŒ</p>
</blockquote>
<p>å¦‚: ä¸ºGitHubç”Ÿæˆä¸€ä¸ªå¯†é’¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/home/username/.ssh/id_rsa): /home/username/.ssh/id_rsa_github</span><br><span class="line"><span class="comment">#å¦‚æœæ˜¯windowsç³»ç»Ÿåˆ™æ˜¯ C:\Users\your_userName\.ssh\id_rsa_github</span></span><br></pre></td></tr></table></figure>
<p>åœ¨powerShellä¸­å¯ä»¥ä½¿ç”¨<code>Get-Content</code>å‘½ä»¤æŸ¥çœ‹ç”Ÿæˆçš„å¯†é’¥ï¼Œå¦‚æœæ˜¯<strong>linuxæ“ä½œç³»ç»Ÿ</strong>å¯ä»¥ä½¿ç”¨<code>cat</code>å‘½ä»¤</p>
<p>æœ€åå°†å…¬é’¥å¤åˆ¶ç²˜è´´åˆ°ç›®æ ‡æœåŠ¡çš„SSHè®¾ç½®ä¸­</p>
<p><strong><mark>1.5 é…ç½®å¤šä¸ªSSHå¯†é’¥</mark></strong></p>
<p>åœ¨<code>~/.ssh/config</code>æ–‡ä»¶å¯ä»¥æ–¹ä¾¿åœ°ä¸ºä¸åŒçš„æœåŠ¡é…ç½®ä¸åŒçš„SSHå¯†é’¥</p>
<ol>
<li class="lvl-3">
<p><strong>æ·»åŠ é…ç½®é¡¹</strong>ï¼š ä¸ºæ¯ä¸ªæœåŠ¡æ·»åŠ å•ç‹¬çš„é…ç½®é¡¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">  HostName github.com</span><br><span class="line">  User git</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa_github</span><br><span class="line"></span><br><span class="line">Host gitlab.com</span><br><span class="line">  HostName gitlab.com</span><br><span class="line">  User git</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa_gitlab</span><br></pre></td></tr></table></figure>
<p>è§£é‡Šï¼š</p>
<ul class="lvl-2">
<li class="lvl-5">
<p><strong>Host</strong>ï¼šè‡ªå®šä¹‰åˆ«åæˆ–è¿œç¨‹ä¸»æœºåã€‚</p>
</li>
<li class="lvl-5">
<p><strong>HostName</strong>ï¼šå®é™…çš„è¿œç¨‹æœåŠ¡å™¨ä¸»æœºåï¼ˆ<a href="http://xn--github-hh4k.xn--comgitlab-267r.com">å¦‚github.comæˆ–gitlab.com</a>ï¼‰ã€‚</p>
</li>
<li class="lvl-5">
<p><strong>User</strong>ï¼šç™»å½•æ—¶ä½¿ç”¨çš„ç”¨æˆ·åï¼ˆé€šå¸¸æ˜¯<code>git</code>ï¼Œç”¨äºä»£ç æ‰˜ç®¡å¹³å°ï¼‰ã€‚</p>
</li>
<li class="lvl-5">
<p><strong>IdentityFile</strong>ï¼šæŒ‡å®šä½¿ç”¨çš„SSHç§é’¥ã€‚</p>
</li>
</ul>
</li>
</ol>
<h3 id="2-ç«¯å£æ˜ å°„">2. ç«¯å£æ˜ å°„</h3>
<p><strong><mark>2.1 åŸºç¡€æ¦‚å¿µ</mark></strong></p>
<p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œ<strong>ç«¯å£ï¼ˆPortï¼‰</strong> æ˜¯ç½‘ç»œé€šä¿¡ä¸­çš„ä¸€ä¸ªé€»è¾‘æŠ½è±¡æ¦‚å¿µï¼Œç”¨äºåŒºåˆ†åŒä¸€å°è®¡ç®—æœºä¸Šä¸åŒç½‘ç»œæœåŠ¡æˆ–è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡é€šé“ã€‚å®ƒä¸IPåœ°å€ä¸€èµ·ï¼Œç”¨æ¥æ ‡è¯†ç½‘ç»œä¸­çš„ä¸åŒé€šä¿¡ç»ˆç«¯å’ŒæœåŠ¡ã€‚<strong>ç«¯å£æ˜ å°„</strong>æ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œå®ƒå¯ä»¥å°†å¤–ç½‘ä¸­çš„ä»»æ„ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸­çš„ç›¸åº”ç«¯å£ï¼Œå®ç°å†…ç½‘ä¸å¤–ç½‘ä¹‹é—´çš„é€šä¿¡ã€‚é€šè¿‡ç«¯å£æ˜ å°„ï¼Œå¯ä»¥åœ¨å¤–ç½‘è®¿é—®å†…ç½‘ä¸­çš„æœåŠ¡æˆ–åº”ç”¨ï¼Œå®ç°è·¨è¶Šç½‘ç»œçš„ä¾¿æ·é€šä¿¡</p>
<p><strong><mark>2.2 å¦‚ä½•å·¥ä½œ</mark></strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -p 37367 root@ssh.intern-ai.org.cn -CNg -L 7860:127.0.0.1:7860 -o StrictHostKeyChecking=no</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>-p 37367</code>ï¼šæ˜¯æŒ‡å®š SSH è¿æ¥çš„ç«¯å£ä¸º 37367</p>
</li>
<li class="lvl-2">
<p><code>root@ssh.intern-ai.org.cn</code>ï¼šè¡¨ç¤ºè¦ä»¥ <code>root</code> ç”¨æˆ·èº«ä»½è¿æ¥åˆ° <code>ssh.intern-ai.org.cn</code> è¿™ä¸ªä¸»æœºã€‚</p>
</li>
<li class="lvl-2">
<p><code>CNg</code></p>
<ul class="lvl-2">
<li class="lvl-4"><code>-C</code> å¯ç”¨å‹ç¼©åŠŸèƒ½ï¼Œè¿™å¯ä»¥åŠ å¿«æ•°æ®ä¼ è¾“é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œé€Ÿåº¦è¾ƒæ…¢çš„æƒ…å†µä¸‹ã€‚</li>
<li class="lvl-4"><code>-N</code> è¡¨ç¤ºä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼Œä»…å»ºç«‹è¿æ¥ç”¨äºç«¯å£è½¬å‘ç­‰ã€‚</li>
<li class="lvl-4"><code>-g</code> å…è®¸è¿œç¨‹ä¸»æœºè¿æ¥åˆ°æœ¬åœ°è½¬å‘çš„ç«¯å£ã€‚è¿™é€šå¸¸ç”¨äºè®¾ç½®ä¸€ä¸ªâ€œç½‘å…³â€ï¼Œå…è®¸å…¶ä»–è®¡ç®—æœºé€šè¿‡è¿™ä¸ª SSH ä¼šè¯è®¿é—®è½¬å‘ç«¯å£</li>
</ul>
</li>
<li class="lvl-2">
<p><code>-L &#123;æœ¬åœ°æœºå™¨_PORT&#125;:127.0.0.1:&#123;å¼€å‘æœº_PORT&#125;</code>ï¼šè¿™æ˜¯è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘ï¼Œå°†æœ¬åœ°æœºå™¨çš„æŒ‡å®šç«¯å£è½¬å‘åˆ°è¿œç¨‹ä¸»æœºçš„ <code>127.0.0.1</code> ï¼ˆå³æœ¬åœ°å›ç¯åœ°å€ï¼‰å’ŒæŒ‡å®šçš„å¼€å‘æœºç«¯å£ã€‚</p>
</li>
<li class="lvl-2">
<p><code>-o StrictHostKeyChecking=no</code>ï¼šå…³é—­ä¸¥æ ¼çš„ä¸»æœºå¯†é’¥æ£€æŸ¥ï¼Œè¿™æ ·å¯ä»¥é¿å…ç¬¬ä¸€æ¬¡è¿æ¥æ—¶å› ä¸ºæœªçŸ¥ä¸»æœºå¯†é’¥è€Œäº§ç”Ÿçš„æç¤ºæˆ–é”™è¯¯ã€‚</p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/portMapping.png" alt="portMapping"></p>
<p>ä½¿ç”¨<strong>VSCode</strong>å¯ä»¥ä½¿ç”¨å…¶<strong>è‡ªåŠ¨ç«¯å£æ˜ å°„</strong>çš„åŠŸèƒ½,ä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨é…ç½®</p>
<p><strong><mark>2.3 å¸¸è§ç«¯å£å’ŒæœåŠ¡</mark></strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>21</strong>ï¼šFTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰</p>
</li>
<li class="lvl-2">
<p><strong>22</strong>ï¼šSSHï¼ˆè¿œç¨‹ç™»å½•ï¼‰</p>
</li>
<li class="lvl-2">
<p><strong>25</strong>ï¼šSMTPï¼ˆé‚®ä»¶ä¼ è¾“ï¼‰</p>
</li>
<li class="lvl-2">
<p><strong>53</strong>ï¼šDNSï¼ˆåŸŸåè§£æï¼‰</p>
</li>
<li class="lvl-2">
<p><strong>80</strong>ï¼šHTTPï¼ˆç½‘é¡µæµè§ˆï¼‰</p>
</li>
<li class="lvl-2">
<p><strong>443</strong>ï¼šHTTPSï¼ˆå®‰å…¨ç½‘é¡µæµè§ˆï¼‰</p>
</li>
</ul>
<p><strong><mark>2.4 æŸ¥çœ‹å’Œç®¡ç†ç«¯å£</mark></strong></p>
<p>ä½¿ç”¨<code>netstat</code>å‘½ä»¤</p>
<h3 id="3-LinuxåŸºç¡€å‘½ä»¤">3. LinuxåŸºç¡€å‘½ä»¤</h3>
<p><strong><mark>3.1 æ–‡ä»¶ç®¡ç†ç›¸å…³å‘½ä»¤</mark></strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>åˆ›å»ºæ–‡ä»¶</strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>touch</code> å‘½ä»¤åˆ›å»ºç©ºæ–‡ä»¶ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>åˆ›å»ºç›®å½•</strong>ï¼šä½¿ç”¨ <code>mkdir</code> å‘½ä»¤ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>ç›®å½•åˆ‡æ¢</strong>ï¼šä½¿ç”¨<code>cd</code>å‘½ä»¤ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ˜¾ç¤ºæ‰€åœ¨ç›®å½•</strong>ï¼šä½¿ç”¨<code>pwd</code>å‘½ä»¤ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</strong>ï¼šå¦‚ä½¿ç”¨ <code>cat</code> ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶å…¨éƒ¨å†…å®¹ï¼Œ<code>more</code> å’Œ <code>less</code> å¯ä»¥åˆ†é¡µæŸ¥çœ‹ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>ç¼–è¾‘æ–‡ä»¶</strong>ï¼šå¦‚ <code>vi</code> æˆ– <code>vim</code> ç­‰ç¼–è¾‘å™¨ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>å¤åˆ¶æ–‡ä»¶</strong>ï¼šç”¨ <code>cp</code> å‘½ä»¤ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>åˆ›å»ºæ–‡ä»¶é“¾æ¥</strong>ï¼šç”¨<code>ln</code>å‘½ä»¤ã€‚</p>
<ul class="lvl-2">
<li class="lvl-4">-sï¼šåˆ›å»ºè½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„</li>
</ul>
</li>
<li class="lvl-2">
<p><strong>ç§»åŠ¨æ–‡ä»¶</strong>ï¼šé€šè¿‡ <code>mv</code> å‘½ä»¤ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>åˆ é™¤æ–‡ä»¶</strong>ï¼šä½¿ç”¨ <code>rm</code> å‘½ä»¤ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>åˆ é™¤ç›®å½•</strong>ï¼š<code>rmdir</code>ï¼ˆåªèƒ½åˆ é™¤ç©ºç›®å½•ï¼‰æˆ– <code>rm -r</code>ï¼ˆå¯åˆ é™¤éç©ºç›®å½•ï¼‰ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æŸ¥æ‰¾æ–‡ä»¶</strong>ï¼šå¯ä»¥ç”¨ <code>find</code> å‘½ä»¤ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•çš„è¯¦ç»†ä¿¡æ¯</strong>ï¼šä½¿ç”¨<code>ls</code>å‘½ä»¤ï¼Œå¦‚ä½¿ç”¨ <code>ls -l</code>æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>å¤„ç†æ–‡ä»¶</strong>ï¼šè¿›è¡Œå¤æ‚çš„æ–‡ä»¶æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨<code>sed</code>å‘½ä»¤ã€‚</p>
</li>
</ul>
<p><strong><mark>3.2 è¿›ç¨‹ç®¡ç†ç›¸å…³å‘½ä»¤</mark></strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>ps</strong>ï¼šæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</p>
</li>
<li class="lvl-2">
<p><strong>top</strong>ï¼šåŠ¨æ€æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</p>
</li>
<li class="lvl-2">
<p><strong>pstree</strong>ï¼šæ ‘çŠ¶æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</p>
</li>
<li class="lvl-2">
<p><strong>pgrep</strong>ï¼šç”¨äºæŸ¥æ‰¾è¿›ç¨‹</p>
</li>
<li class="lvl-2">
<p><strong>nice</strong>ï¼šæ›´æ”¹è¿›ç¨‹çš„ä¼˜å…ˆçº§</p>
</li>
<li class="lvl-2">
<p><strong>jobs</strong>ï¼šæ˜¾ç¤ºè¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯</p>
</li>
<li class="lvl-2">
<p><strong>bg å’Œ fg</strong>ï¼šå°†è¿›ç¨‹è°ƒå…¥åå°</p>
</li>
<li class="lvl-2">
<p><strong>kill</strong>ï¼šæ€æ­»è¿›ç¨‹</p>
</li>
</ul>
<p><strong><mark>nvidia-smiå‘½ä»¤</mark></strong></p>
<p>æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç›‘æ§ NVIDIA GPU çš„çŠ¶æ€å’Œæ€§èƒ½ï¼Œä»¥åŠç®¡ç† GPU ç›¸å…³çš„ä»»åŠ¡</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/nvidiaGPU.png" alt="nvidiaGPU"></p>
<h3 id="4-Conda">4. Conda</h3>
<blockquote>
<p>ä¸€ä¸ªå¼€æºçš„åŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†å·¥å…·, ä¸»è¦ç”¨äºç®€åŒ–è½¯ä»¶åŒ…çš„å®‰è£…ã€ä¾èµ–ç®¡ç†å’Œéš”ç¦»è™šæ‹Ÿç¯å¢ƒã€‚</p>
</blockquote>
<h6 id="4-1-ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½"><strong><mark>4.1 ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½</mark></strong></h6>
<p><strong>åŒ…ç®¡ç†</strong>ï¼šConda å¯ä»¥å®‰è£…ã€æ›´æ–°ã€å¸è½½è½¯ä»¶åŒ…ï¼Œå¹¶è‡ªåŠ¨è§£å†³ä¾èµ–é—®é¢˜ã€‚</p>
<p><strong>ç¯å¢ƒç®¡ç†</strong>ï¼šConda å…è®¸ç”¨æˆ·åˆ›å»ºå’Œç®¡ç†å¤šä¸ªç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒå¯ä»¥æœ‰ä¸åŒçš„åŒ…å’Œå·¥å…·ã€‚</p>
<p><mark><strong>4.2 Conda çš„åŸºæœ¬æ“ä½œ</strong></mark></p>
<ol>
<li class="lvl-3">
<p>æ£€æŸ¥ Conda ç‰ˆæœ¬</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda --version</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda create --name myenv python=3.9</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>myenv</code> æ˜¯è™šæ‹Ÿç¯å¢ƒçš„åç§°ã€‚</p>
</li>
<li class="lvl-2">
<p><code>python=3.9</code> æŒ‡å®šäº†è¯¥ç¯å¢ƒå°†ä½¿ç”¨ Python 3.9ã€‚</p>
</li>
</ul>
<ol start="3">
<li class="lvl-3">
<p>æ¿€æ´»å’Œé€€å‡ºç¯å¢ƒ</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda activate myenv</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda deactivate</span><br></pre></td></tr></table></figure>
<ol start="4">
<li class="lvl-3">
<p>å®‰è£…è½¯ä»¶åŒ…</p>
</li>
</ol>
<p>å®‰è£…è½¯ä»¶åŒ…æ—¶ï¼ŒConda ä¼šè‡ªåŠ¨å¤„ç†ä¾èµ–é—®é¢˜ã€‚ä½¿ç”¨ <code>conda install</code> å®‰è£…åŒ…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install numpy pandas</span><br></pre></td></tr></table></figure>
<p>è¿™ä¼šåœ¨å½“å‰æ¿€æ´»çš„ç¯å¢ƒä¸­å®‰è£… <code>numpy</code> å’Œ <code>pandas</code>ã€‚</p>
<ol start="5">
<li class="lvl-3">
<p>æ›´æ–°è½¯ä»¶åŒ…</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda update numpy</span><br></pre></td></tr></table></figure>
<ol start="6">
<li class="lvl-3">
<p>åˆ—å‡ºåˆ›å»ºçš„æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> list</span><br></pre></td></tr></table></figure>
<ol start="7">
<li class="lvl-3">
<p>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> remove --name myenv</span><br></pre></td></tr></table></figure>
<ol start="8">
<li class="lvl-3">
<p>å¯¼å‡ºå’Œå¯¼å…¥ç¯å¢ƒ</p>
</li>
</ol>
<p>Conda å…è®¸ä½ å¯¼å‡ºå½“å‰ç¯å¢ƒçš„æ‰€æœ‰åŒ…åˆ—è¡¨ï¼Œä»¥ä¾¿äºåœ¨å…¶ä»–ç³»ç»Ÿä¸Šé‡å»ºç›¸åŒçš„ç¯å¢ƒã€‚</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>å¯¼å‡ºç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> <span class="built_in">export</span> &gt; environment.yml</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>ä»å¯¼å‡ºçš„ <code>.yml</code> æ–‡ä»¶åˆ›å»ºæ–°ç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> create -f environment.yml</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="9">
<li class="lvl-3">
<p>æ·»åŠ å…¶ä»–çš„æº</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda config --add [url]</span><br></pre></td></tr></table></figure>
<h2 id="Lv0-PythonåŸºç¡€">Lv0-PythonåŸºç¡€</h2>
<h3 id="1-ç¯å¢ƒå‡†å¤‡">1. ç¯å¢ƒå‡†å¤‡</h3>
<p><strong><mark>1.1 ä¸‹è½½miniconda</mark></strong></p>
<p>anacondaå’Œminicondaéƒ½å¯ä»¥, æ¨èåè€…</p>
<p>æ¸…åæºminicondaä¸‹è½½é“¾æ¥: <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ | Tsinghua Open Source Mirror</a>(å»ºè®®é€‰æ‹©python3.9ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚Miniconda3-py310_24.5.0)</p>
<p><strong><mark>1.2 æ¢æº</mark></strong></p>
<p>è¿›å…¥å‘½ä»¤è¡Œå¼€å§‹è¿›è¡Œæ¢æºï¼ŒWindowså¯ä»¥ç›´æ¥æ‰“å¼€miniconda powershell promtã€‚</p>
<p>é¦–å…ˆå°†pipæ›¿æ¢ä¸ºæ¸…åæºï¼Œåªéœ€è¦ä¸€æ¡å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>
<p>æ¥ç€æˆ‘ä»¬æ¥ç»™condaæ›¿æ¢æˆæ¸…åæºã€‚å„ç³»ç»Ÿéƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„ <code>.condarc</code> æ–‡ä»¶æ¥ä¿®æ”¹é•œåƒæºã€‚Windows ç”¨æˆ·æ— æ³•ç›´æ¥åˆ›å»ºåä¸º <code>.condarc</code> çš„æ–‡ä»¶ï¼Œ<strong>å¯å…ˆæ‰§è¡Œ <code>conda config --set show_channel_urls yes</code> ç”Ÿæˆè¯¥æ–‡ä»¶ä¹‹åå†ä¿®æ”¹</strong>ã€‚åœ¨ç”¨æˆ·ç›®å½•æ‰¾åˆ°<code>.condarc</code> æ–‡ä»¶åï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå°†ä¸‹é¢çš„å†…å®¹å¤åˆ¶è¿›å»å¹¶ä¿å­˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">channels:   - defaults show_channel_urls: <span class="literal">true</span> default_channels:</span><br><span class="line">- https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span><br><span class="line">- https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span><br><span class="line">- https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2 custom_channels:</span><br><span class="line">conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">deepmodeling: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/</span><br></pre></td></tr></table></figure>
<p>æ¥ç€åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ <code>conda clean -i</code> æ¸…é™¤ç´¢å¼•ç¼“å­˜ï¼Œä¿è¯ç”¨çš„æ˜¯é•œåƒç«™æä¾›çš„ç´¢å¼•ã€‚</p>
<h3 id="2-ä¸æ–­å­¦ä¹ -ä½¿ç”¨python">2. ä¸æ–­å­¦ä¹ ,ä½¿ç”¨python</h3>
]]></content>
      <categories>
        <category>å¤§æ¨¡å‹</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>ASP.NET Core(ä¸€)</title>
    <url>/2024/08/08/ASP-NET-Core-%E4%B8%80/</url>
    <content><![CDATA[<blockquote>
<p><a href="http://ASP.NET">ASP.NET</a> Coreæ¡†æ¶ä¸­ ä¾èµ–æ³¨å…¥ LINQè¯­å¥ é…ç½®ç³»ç»Ÿ æ—¥å¿—</p>
</blockquote>
<span id="more"></span>
<h1><a href="http://ASP.NET">ASP.NET</a> core</h1>
<h3 id="å¼‚æ­¥">å¼‚æ­¥</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>Task</p>
</li>
<li class="lvl-2">
<p>async</p>
</li>
<li class="lvl-2">
<p>await</p>
</li>
</ul>
<h3 id="å§”æ‰˜">å§”æ‰˜</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>å…³é”®å­— delegate</p>
</li>
<li class="lvl-2">
<p>æŒ‡å‘æ–¹æ³•çš„ç±»å‹</p>
</li>
<li class="lvl-2">
<p>.NETä¸­å†…ç½®äº†ä¸¤ä¸ªæ³›å‹å§”æ‰˜ <mark>Action(æ— è¿”å›å€¼)</mark> å’Œ <mark>Func(æœ‰è¿”å›å€¼)</mark></p>
</li>
</ul>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ— è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Action a1 = F1;</span><br><span class="line">        a1();</span><br><span class="line"></span><br><span class="line">        Action&lt;<span class="built_in">int</span>&gt; a_int = F_int;</span><br><span class="line">        a_int(<span class="number">520</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">F1</span>()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">F_int</span>(<span class="params"><span class="built_in">int</span> a</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ‰è¿”å›å€¼,ä¸ä¸Šè¿°ç±»ä¼¼,ä½†æ˜¯Funcçš„å‚æ•°åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªè®°å½•çš„æ˜¯è¿”å›å€¼</span></span><br><span class="line">Func&lt;<span class="built_in">int</span>&gt; F1 = function;</span><br><span class="line">F1();</span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">function</span>()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">520</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Lambda-è¡¨è¾¾å¼">Lambda è¡¨è¾¾å¼</h3>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Action&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt; a1 = (<span class="built_in">int</span> i, <span class="built_in">int</span> j) =&gt; &#123; Console.WriteLine(<span class="string">&quot;hello world!&quot;</span>); &#125;;</span><br><span class="line">        a1(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="yeild">yeild</h3>
<p><code>yield</code>å…³é”®å­—ç”¨äºç®€åŒ–å®ç°è¿­ä»£å™¨çš„æ–¹æ³•ã€‚è¿­ä»£å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥<mark>é€æ­¥è¿”å›</mark>é›†åˆä¸­çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§è¿”å›æ•´ä¸ªé›†åˆã€‚ä½¿ç”¨<code>yield</code>å¯ä»¥è®©æ–¹æ³•åœ¨æ¯æ¬¡è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶åœ¨éœ€è¦æ—¶ä¿æŒå…¶å½“å‰çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡è°ƒç”¨æ—¶ç»§ç»­æ‰§è¡Œã€‚</p>
<h3 id="LINQ">LINQ</h3>
<blockquote>
<p>å‡ ä¹é‡Œé¢çš„æ‰€æœ‰çš„æ‰©å±•æ–¹æ³•éƒ½æ˜¯é’ˆå¯¹ IEnumerableæ¥å£çš„</p>
<p>æ‰€æœ‰èƒ½è¿”å›é›†åˆçš„éƒ½æ˜¯è¿”å›IEnumerable</p>
<p>å¤„äºSystem.Linqå‘½åç©ºé—´ä¸­</p>
</blockquote>
<p><strong>å¸¸ç”¨æ–¹æ³•</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Where()  ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„æ•°æ®</p>
</li>
<li class="lvl-2">
<p>Single()  æœ‰ä¸”åªæœ‰ä¸€æ¡æ•°æ®æ—¶è¿”å›</p>
</li>
<li class="lvl-2">
<p>SingleOrDefault()</p>
</li>
<li class="lvl-2">
<p>First():è‡³å°‘æœ‰ä¸€æ¡æ—¶è¿”å›ç¬¬ä¸€æ¡</p>
</li>
<li class="lvl-2">
<p>FirstOrDefault()</p>
</li>
<li class="lvl-2">
<p>Order()  æ­£åºæ’åº</p>
</li>
<li class="lvl-2">
<p>OrderByDescending() å€’åºæ’åº</p>
</li>
<li class="lvl-2">
<p>OrderBy() æŒ‰ç…§è‡ªå®šä¹‰è¦æ±‚æ’åº</p>
</li>
<li class="lvl-2">
<p>ThenBy()</p>
</li>
<li class="lvl-2">
<p>Skip() Take()</p>
</li>
</ul>
<p><strong>èšåˆå‡½æ•°</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Max() Min() Average() Sum() Count()</p>
</li>
</ul>
<p><strong>åˆ†ç»„å‡½æ•°</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>GroupBy() æ ¹æ®é€‰æ‹©çš„å±æ€§è¿›è¡Œåˆ†ç»„</p>
</li>
</ul>
<p>è¿”å›å€¼IEnumerable&lt;IGrouping&lt;T,Y&gt;&gt;</p>
<p><strong>æŠ•å½±</strong></p>
<p>æŒ‰ç…§æŸç§è§„åˆ™å°†ä¸€ç»„æ•°æ®æ˜ å°„ä¸ºå¦ä¸€ç»„æ•°æ®</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Select</p>
</li>
</ul>
<p><strong>é›†åˆè½¬æ¢</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>ToList()</p>
</li>
<li class="lvl-2">
<p>ToArray()</p>
</li>
</ul>
<h3 id="æ§åˆ¶åè½¬">æ§åˆ¶åè½¬</h3>
<p>1.æœåŠ¡å®šä½å™¨(ServiceLocator)</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ITestService</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span>? Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHi</span>()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestServiceImpl</span> : <span class="title">ITestService</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span>? Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHi</span>()</span> </span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Hi!My name is <span class="subst">&#123;Name&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ServiceCollection services = <span class="keyword">new</span> ServiceCollection();<span class="comment">//åˆ›å»ºæœåŠ¡å®¹å™¨</span></span><br><span class="line">        services.AddTransient&lt;TestServiceImpl&gt;();<span class="comment">//æ³¨å†ŒæœåŠ¡</span></span><br><span class="line">        <span class="keyword">using</span> (ServiceProvider sp = services.BuildServiceProvider())<span class="comment">//åˆ›å»ºæœåŠ¡å®šä½å™¨</span></span><br><span class="line">        &#123;<span class="comment">//ä½¿ç”¨äº†æœåŠ¡å®šä½å™¨ è·å–å­˜æ”¾åœ¨å®¹å™¨ä¸­æ‰€éœ€è¦çš„æœåŠ¡</span></span><br><span class="line">            TestServiceImpl t = sp.GetService&lt;TestServiceImpl&gt;();</span><br><span class="line">            t.Name = <span class="string">&quot;WangMC&quot;</span>;</span><br><span class="line">            t.SayHi();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><mark>2.ä¾èµ–æ³¨å…¥(Dependency Injection)</mark></strong></p>
<blockquote>
<p>.NETæ§åˆ¶åè½¬ç»„ä»¶å–åä¸ºDependencyInjection,ä½†å…¶ä¸­åŒ…å«æœåŠ¡å®šä½å™¨</p>
<p>ä½¿ç”¨å‰è¦å®‰è£…Microsoft.Extensions.DependencyInjection</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>æœåŠ¡(service):è¦ä½¿ç”¨çš„å¯¹è±¡</p>
</li>
<li class="lvl-2">
<p>æ³¨å†ŒæœåŠ¡</p>
</li>
<li class="lvl-2">
<p>æœåŠ¡å®¹å™¨:å­˜æ”¾å’Œç®¡ç†æ³¨å†Œå¥½çš„æœåŠ¡</p>
</li>
<li class="lvl-2">
<p>æŸ¥è¯¢æœåŠ¡:åˆ›å»ºå¯¹è±¡åŠå…³è”å¯¹è±¡</p>
</li>
<li class="lvl-2">
<p>å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ:Transient(ç¬æ€) Scoped(èŒƒå›´) Singleton(å•ä¾‹)</p>
</li>
</ul>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="comment">//æ§åˆ¶å™¨å‘å‡ºæµ‹è¯•è¯·æ±‚,å¼€å§‹è°ƒç”¨æ—¥å¿—å•å…ƒå’Œå­˜å‚¨å•å…ƒ</span></span><br><span class="line"><span class="comment">//å­˜å‚¨å•å…ƒéœ€è¦è°ƒç”¨é…ç½®ä¿¡æ¯è¿æ¥å­˜å‚¨è®¾å¤‡,æœ€åå°†æµ‹è¯•çš„ä¿¡æ¯å­˜å‚¨åˆ°è®¾å¤‡ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> service = <span class="keyword">new</span> ServiceCollection();</span><br><span class="line"></span><br><span class="line">        service.AddScoped&lt;Controller&gt;();</span><br><span class="line">        service.AddScoped&lt;IStorage,StorageImp1&gt;();</span><br><span class="line">        service.AddScoped&lt;ILog,LogImp1&gt;();</span><br><span class="line">        service.AddScoped&lt;IConfig,ConfigImp1&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> sp = service.BuildServiceProvider())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> controller = sp.GetService&lt;Controller&gt;();</span><br><span class="line">            controller.Test();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">class</span> <span class="title">Controller</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> ILog log;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> IStorage storage;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Controller</span>(<span class="params">ILog log, IStorage storage</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.storage = storage;</span><br><span class="line">            <span class="keyword">this</span>.log = log;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.log.Log(<span class="string">&quot;å¼€å§‹ä¸Šä¼ &quot;</span>);</span><br><span class="line">            <span class="keyword">this</span>.storage.Save(<span class="string">&quot;ä¾èµ–æ³¨å…¥æµ‹è¯•&quot;</span>, <span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">            <span class="keyword">this</span>.log.Log(<span class="string">&quot;ä¸Šä¼ å®Œæ¯•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">interface</span> <span class="title">ILog</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Log</span>(<span class="params"><span class="built_in">string</span> msg</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">LogImp1</span> : <span class="title">ILog</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Log</span>(<span class="params"><span class="built_in">string</span> msg</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;æ—¥å¿—<span class="subst">&#123;msg&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IConfig</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">GetValue</span>(<span class="params"><span class="built_in">string</span> name</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">ConfigImp1</span> : <span class="title">IConfig</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">GetValue</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;\&quot;hello_world\&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IStorage</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Save</span>(<span class="params"><span class="built_in">string</span> content, <span class="built_in">string</span> name</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">StorageImp1</span> : <span class="title">IStorage</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> IConfig config;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">StorageImp1</span>(<span class="params">IConfig config</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.config = config;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Save</span>(<span class="params"><span class="built_in">string</span> content, <span class="built_in">string</span> name</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">string</span> service = config.GetValue(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;å‘æœåŠ¡å™¨<span class="subst">&#123;service&#125;</span>ä¸Šä¼ æ–‡ä»¶åä¸º<span class="subst">&#123;name&#125;</span>,å…¶å†…å®¹ä¸º<span class="subst">&#123;content&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®ç³»ç»Ÿ">é…ç½®ç³»ç»Ÿ</h3>
<p><strong>é…ç½®è¯»å–é¡ºåº</strong></p>
<p>é…ç½®ä¸­å¿ƒæœåŠ¡å™¨----&gt;æœ¬åœ°ç¯å¢ƒå˜é‡------&gt;æœ¬åœ°é…ç½®æ–‡ä»¶  (åè€…å¯å°†å‰è€…è¦†ç›–)</p>
<p><strong>Jsonæ–‡ä»¶é…ç½®</strong></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;WangMC&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="string">&quot;18&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hobby&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;sport&quot;</span><span class="punctuation">:</span> <span class="string">&quot;swimming&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;music&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rock&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å±æ€§è®¾ç½®ä¸º å¦‚æœè¾ƒæ–°åˆ™å¤åˆ¶</p>
<p>æ³•ä¸€: NuGetå®‰è£…Microsoft.Extensions.Configurationå’ŒMicrosoft.Extensions.Configuration.JsonåŒ…</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Extensions.Configuration;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Channels;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> configBuilder = <span class="keyword">new</span> ConfigurationBuilder();</span><br><span class="line">        configBuilder.AddJsonFile(<span class="string">&quot;config.json&quot;</span>, optional: <span class="literal">true</span>, reloadOnChange: <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">var</span> configRoot = configBuilder.Build();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> name = configRoot[<span class="string">&quot;name&quot;</span>];</span><br><span class="line">        <span class="built_in">string</span> hobby_sport = configRoot.GetSection(<span class="string">&quot;hobby&quot;</span>)[<span class="string">&quot;sport&quot;</span>];</span><br><span class="line">        </span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Name: <span class="subst">&#123;name&#125;</span>, Age: <span class="subst">&#123;age&#125;</span>, Hobby_sport: <span class="subst">&#123;hobby_sport&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³•äºŒ: ç»‘å®šä¸€ä¸ªç±» æ¥è¿›è¡Œé…ç½®çš„è¯»å–</p>
<p>NuGetå®‰è£…Microsoft.Extensions.Configuration.Binder</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Extensions.Configuration; </span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Channels;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> configBuilder = <span class="keyword">new</span> ConfigurationBuilder();</span><br><span class="line">        configBuilder.AddJsonFile(<span class="string">&quot;config.json&quot;</span>, optional: <span class="literal">true</span>, reloadOnChange: <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">var</span> configRoot = configBuilder.Build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> config = configRoot.Get&lt;Config&gt;();</span><br><span class="line">        <span class="built_in">string</span> name = config.name;</span><br><span class="line">        <span class="built_in">int</span> age = config.age;</span><br><span class="line">        Hobby hobby = config.hobby;</span><br><span class="line">        <span class="built_in">string</span> sprot = config.hobby.sport;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Config</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> Hobby hobby &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Hobby</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> sport &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> music &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><mark>é€‰é¡¹æ–¹å¼è¯»å–</mark></strong></p>
<ol>
<li class="lvl-3">
<p>NuGetå®‰è£…Microsoft.Extensions.Configuration  Microsoft.Extensions.Configuration.JsonåŒ…</p>
</li>
</ol>
<p>Microsoft.Extensions.Configuration.Options  Microsoft.Extensions.Configuration.Binder</p>
<ol start="2">
<li class="lvl-3">
<p>è¯»å–é…ç½®æ—¶, DIè¦å£°æ˜IOptions<T> IOptionsMonitor<T> IOptionsSnapshot<T>ç­‰ç±»å‹</p>
</li>
</ol>
<ul class="lvl-0">
<li class="lvl-2">
<p>IOptions<T>ä¸ä¼šè¯»å–åˆ°æ–°çš„å€¼</p>
</li>
<li class="lvl-2">
<p>==IOptionsSnapshot<T>==ä¸IOptionsMonitor<T> ç›¸æ¯”,IOptionsSnapshot<T>è¯»å–åˆ°çš„å€¼ä¼šåœ¨åŒä¸€ä¸ªèŒƒå›´ä¸­ä¿æŒä¸€è‡´</p>
</li>
</ul>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Extensions.Configuration; </span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.Options;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> services = <span class="keyword">new</span> ServiceCollection();</span><br><span class="line">        services.AddScoped&lt;TestController&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> configBuild = <span class="keyword">new</span> ConfigurationBuilder();</span><br><span class="line">        configBuild.AddJsonFile(<span class="string">&quot;config.json&quot;</span>,optional:<span class="literal">true</span>,reloadOnChange:<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> configRoot = configBuild.Build();</span><br><span class="line">        services.AddOptions().Configure&lt;Config&gt;(e =&gt; configRoot.Bind(e));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> sp = services.BuildServiceProvider())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> i = <span class="number">4</span>;</span><br><span class="line">            <span class="keyword">while</span> (i!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">var</span> info = sp.GetRequiredService&lt;TestController&gt;();</span><br><span class="line">                info.Test();</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">TestController</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> IOptionsSnapshot&lt;Config&gt; optConfig;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TestController</span>(<span class="params">IOptionsSnapshot&lt;Config&gt; optConfig</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.optConfig=optConfig;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;å§“å:<span class="subst">&#123;optConfig.Value.name&#125;</span>&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;å¹´é¾„:<span class="subst">&#123;optConfig.Value.age&#125;</span>&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;å…´è¶£çˆ±å¥½:<span class="subst">&#123;optConfig.Value.hobby.sport&#125;</span>&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;å…´è¶£çˆ±å¥½:<span class="subst">&#123;optConfig.Value.hobby.music&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Config</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> Hobby hobby &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Hobby</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> sport &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> music &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="æ—¥å¿—">æ—¥å¿—</h3>
<blockquote>
<p>çº§åˆ«: Trace&lt;Debug&lt;Information&lt;Warning&lt;Error&lt;Critical</p>
</blockquote>
<p><strong>1. è¾“å‡ºåˆ°æ§åˆ¶å°</strong></p>
<blockquote>
<p>å®‰è£…Microsoft.Extensions.Logging  Microsoft.Extensions.Logging.Console</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.Logging;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.Logging.Console</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> services = <span class="keyword">new</span> ServiceCollection();</span><br><span class="line"></span><br><span class="line">        services.AddLogging(logBuilder =&gt; &#123; </span><br><span class="line">            logBuilder.AddConsole();</span><br><span class="line">            logBuilder.SetMinimumLevel(LogLevel.Trace);</span><br><span class="line">        &#125;);</span><br><span class="line">        services.AddScoped&lt;Demo&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> sp = services.BuildServiceProvider())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> demo = sp.GetRequiredService&lt;Demo&gt;();</span><br><span class="line">            demo.Test();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Demo</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> ILogger&lt;Demo&gt; logger;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Demo</span>(<span class="params">ILogger&lt;Demo&gt; logger</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.logger = logger;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            logger.LogWarning(<span class="string">&quot;this is a warning&quot;</span>);</span><br><span class="line">            logger.LogError(<span class="string">&quot;this is a Error&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                File.ReadAllText(<span class="string">&quot;A fake document&quot;</span>);</span><br><span class="line">                logger.LogDebug(<span class="string">&quot;Read Success!!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                logger.LogDebug(ex,<span class="string">&quot;Read Failed!!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2. æ–‡æœ¬æ—¥å¿—</strong></p>
<blockquote>
<p>ä½¿ç”¨NLogåŒ…</p>
</blockquote>
<p>æ—¥å¿—è¿‡æ»¤å’Œåˆ†ç±»</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">target</span> <span class="attr">xsi:type</span>=<span class="string">&quot;File&quot;</span> <span class="attr">name</span>=<span class="string">&quot;logfile&quot;</span> <span class="attr">fileName</span>=<span class="string">&quot;c:\temp\console-example.log&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">archiveAboveSize</span>=<span class="string">&quot;10000&quot;</span> <span class="attr">maxArchiveFiles</span>=<span class="string">&quot;3&quot;</span> <span class="attr">maxArchiveDays</span>=<span class="string">&quot;30&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;$&#123;longdate&#125;|$&#123;level&#125;|$&#123;message&#125; |$&#123;all-event-properties&#125; $&#123;exception:format=tostring&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>xsi:type=&quot;File&quot;</code>ï¼šæŒ‡å®šäº†ç›®æ ‡çš„ç±»å‹ä¸º<code>File</code>ï¼Œè¿™æ„å‘³ç€æ—¥å¿—æ¶ˆæ¯å°†è¢«å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p>
</li>
<li class="lvl-2">
<p><code>name=&quot;logfile&quot;</code>ï¼šä¸ºç›®æ ‡å‘½åï¼Œè¿™ä¸ªåå­—åœ¨æ•´ä¸ªNLogé…ç½®ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ—¥å¿—è§„åˆ™ä¸­å¼•ç”¨ã€‚</p>
</li>
<li class="lvl-2">
<p><code>fileName=&quot;c:\temp\console-example.log&quot;</code>ï¼šæŒ‡å®šäº†æ—¥å¿—æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚æ—¥å¿—æ¶ˆæ¯å°†è¢«å†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</p>
</li>
<li class="lvl-2">
<p><code>archiveAboveSize=&quot;10000&quot;</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„å¤§å°é˜ˆå€¼ã€‚å½“æ—¥å¿—æ–‡ä»¶è¾¾åˆ°æˆ–è¶…è¿‡è¿™ä¸ªå¤§å°æ—¶ï¼ŒNLogä¼šå°†å½“å‰æ—¥å¿—æ–‡ä»¶å½’æ¡£ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ç»§ç»­è®°å½•ã€‚å•ä½æ˜¯å­—èŠ‚ï¼Œè¿™é‡Œè®¾ç½®ä¸º10000å­—èŠ‚ï¼ˆå¤§çº¦10KBï¼‰ã€‚</p>
</li>
<li class="lvl-2">
<p><code>maxArchiveFiles=&quot;3&quot;</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šæœ€å¤§å½’æ¡£æ–‡ä»¶çš„æ•°é‡ã€‚å½“è¾¾åˆ°è¿™ä¸ªæ•°é‡æ—¶ï¼ŒNLogå°†å¼€å§‹åˆ é™¤æœ€æ—§çš„å½’æ¡£æ–‡ä»¶ï¼Œä»¥ä¾¿ä¸ºæ–°å½’æ¡£æ–‡ä»¶è…¾å‡ºç©ºé—´ã€‚è¿™é‡Œè®¾ç½®ä¸º3ï¼Œæ„å‘³ç€æœ€å¤šä¿ç•™3ä¸ªå½’æ¡£æ–‡ä»¶ã€‚</p>
</li>
<li class="lvl-2">
<p><code>maxArchiveDays=&quot;30&quot;</code>ï¼šå…¶ä¸­ <code>X</code> æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå½’æ¡£æ–‡ä»¶å°†è¢«ä¿ç•™çš„å¤©æ•°ã€‚å½“å½’æ¡£æ–‡ä»¶åˆ›å»ºåç»è¿‡ <code>X</code> å¤©ï¼ŒNLog å°†è‡ªåŠ¨åˆ é™¤è¿™äº›å½’æ¡£æ–‡ä»¶</p>
</li>
<li class="lvl-2">
<p><code>layout=&quot;$&#123;longdate&#125;|$&#123;level&#125;|$&#123;message&#125; |$&#123;all-event-properties&#125; $&#123;exception:format=tostring&#125;&quot;</code>ï¼šå®šä¹‰äº†æ—¥å¿—æ¶ˆæ¯çš„å¸ƒå±€ï¼ˆlayoutï¼‰ã€‚å¸ƒå±€æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œå®ƒæŒ‡å®šäº†æ—¥å¿—æ¶ˆæ¯çš„æ ¼å¼ã€‚ä»¥ä¸‹æ˜¯å¸ƒå±€ä¸­å„ä¸ªå…ƒç´ çš„å«ä¹‰ï¼š</p>
<ul class="lvl-2">
<li class="lvl-4"><code>$&#123;longdate&#125;</code>ï¼šæ’å…¥æ—¥å¿—äº‹ä»¶çš„æ—¶é—´æˆ³ã€‚</li>
<li class="lvl-4"><code>$&#123;level&#125;</code>ï¼šæ’å…¥æ—¥å¿—äº‹ä»¶çš„çº§åˆ«ï¼ˆä¾‹å¦‚ï¼šInfoã€Debugã€Errorç­‰ï¼‰ã€‚</li>
<li class="lvl-4"><code>$&#123;message&#125;</code>ï¼šæ’å…¥æ—¥å¿—äº‹ä»¶çš„æ–‡æœ¬æ¶ˆæ¯ã€‚</li>
<li class="lvl-4"><code>$&#123;all-event-properties&#125;</code>ï¼šæ’å…¥æ‰€æœ‰äº‹ä»¶å±æ€§çš„å†…å®¹ã€‚</li>
<li class="lvl-4"><code>$&#123;exception:format=tostring&#125;</code>ï¼šå¦‚æœæ—¥å¿—äº‹ä»¶ä¸­åŒ…å«å¼‚å¸¸ä¿¡æ¯ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶æ’å…¥åˆ°æ—¥å¿—æ¶ˆæ¯ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p><strong>3.ç»“æ„åŒ–æ—¥å¿—</strong></p>
<blockquote>
<p>ä½¿ç”¨SerilogåŒ… å®‰è£…Serilog.AspNetCoreåŒ…</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.Logging;</span><br><span class="line"><span class="keyword">using</span> Serilog;</span><br><span class="line"><span class="keyword">using</span> Serilog.Formatting.Json;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApp1</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        IServiceCollection services = <span class="keyword">new</span> ServiceCollection();</span><br><span class="line"></span><br><span class="line">        services.AddLogging(logBuilder =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Log.Logger = <span class="keyword">new</span> LoggerConfiguration().</span><br><span class="line">                             MinimumLevel.Debug().</span><br><span class="line">                             Enrich.FromLogContext().</span><br><span class="line">                             WriteTo.Console(<span class="keyword">new</span> JsonFormatter()).</span><br><span class="line">                             CreateLogger();</span><br><span class="line">        services.AddSerilog();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//services.AddSerilog();</span></span><br><span class="line">        services.AddScoped&lt;Demo&gt;();</span><br><span class="line">        services.AddScoped&lt;Demo1&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> sp = services.BuildServiceProvider())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> demo = sp.GetRequiredService&lt;Demo&gt;();</span><br><span class="line">            <span class="keyword">var</span> demo1 = sp.GetRequiredService&lt;Demo1&gt;();</span><br><span class="line"></span><br><span class="line">            demo1.Test();</span><br><span class="line">            demo.Test();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Demo</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> ILogger&lt;Demo&gt; logger;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Demo</span>(<span class="params">ILogger&lt;Demo&gt; logger</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.logger = logger;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            logger.LogWarning(<span class="string">&quot;this is a warning&quot;</span>);</span><br><span class="line">            logger.LogError(<span class="string">&quot;this is a Error&quot;</span>);</span><br><span class="line">            logger.LogDebug(<span class="string">&quot;this is a debug&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> Information = <span class="keyword">new</span> &#123; name = <span class="string">&quot;WangMC&quot;</span>, Age = <span class="number">18</span> &#125;;</span><br><span class="line">            <span class="built_in">string</span> Hobby = <span class="string">&quot;running&quot;</span>;</span><br><span class="line">            logger.LogDebug(<span class="string">&quot;Hello this is my informaiton &#123;@Information&#125;,my hobby is &#123;Hobby&#125;&quot;</span>, Information, Hobby);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Demo1</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> ILogger&lt;Demo1&gt; logger;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Demo1</span>(<span class="params">ILogger&lt;Demo1&gt; logger</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.logger = logger;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            logger.LogWarning(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªè­¦å‘Š&quot;</span>);</span><br><span class="line">            logger.LogError(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªé”™è¯¯&quot;</span>);</span><br><span class="line">            logger.LogDebug(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªdebug&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4.é›†ä¸­åŒ–æ—¥å¿—</strong></p>
<blockquote>
<p>é€‚åˆé›†ç¾¤åŒ–éƒ¨ç½² æœ‰Nå¤šæœåŠ¡å™¨</p>
<p>Exceptionless æä¾›äº†ç°æˆçš„äº‘æœåŠ¡ ä¹Ÿå¯ä»¥æœ¬åœ°éƒ¨ç½²(self hosting)</p>
</blockquote>
]]></content>
      <categories>
        <category>C#</category>
      </categories>
      <tags>
        <tag>C#</tag>
      </tags>
  </entry>
  <entry>
    <title>VS2022 ASP.NET core Web API ç¤ºä¾‹ä»£ç è§£é‡Š</title>
    <url>/2024/07/15/VS2022-ASP-NET-core-Web-API-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%E8%A7%A3%E9%87%8A/</url>
    <content><![CDATA[<blockquote>
<p>å…³äºVS2022æä¾›çš„å¤©æ°”é¢„æŠ¥ç¤ºä¾‹ä»£ç çš„ä¸€äº›è§£é‡Š</p>
</blockquote>
 <span id="more"></span>
<h3 id="0-é¡¹ç›®ç»“æ„">0. é¡¹ç›®ç»“æ„</h3>
<p><a href="http://xn--ASP-th2ey4ui5m.NET">åœ¨åˆ›å»ºASP.NET</a> Core Web APIé¡¹ç›®åï¼Œé¡¹ç›®çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MyWebApiProject</span><br><span class="line">â”‚   Controllers</span><br><span class="line">â”‚   â””â”€â”€ WeatherForecastController.cs</span><br><span class="line">â”‚   Program.cs</span><br><span class="line">â”‚   WeatherForecast.cs</span><br><span class="line">â”‚   appsettings.json</span><br><span class="line">â”‚   ...</span><br></pre></td></tr></table></figure>
<h3 id="1-Program-cs">1. <code>Program.cs</code></h3>
<p>è¿™ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ï¼Œè´Ÿè´£é…ç½®å’Œå¯åŠ¨WebæœåŠ¡å™¨ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> builder = WebApplication.CreateBuilder(args);</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>WebApplication.CreateBuilder(args)</code>ï¼šåˆ›å»ºä¸€ä¸ªWebåº”ç”¨ç¨‹åºæ„å»ºå™¨ã€‚</p>
</li>
<li class="lvl-2">
<p><code>args</code>ï¼šå‘½ä»¤è¡Œå‚æ•°ã€‚</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">builder.Services.AddControllers();</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>builder.Services</code>ï¼šè¡¨ç¤ºä¾èµ–æ³¨å…¥å®¹å™¨ã€‚</p>
</li>
<li class="lvl-2">
<p><code>AddControllers</code>ï¼šå‘ä¾èµ–æ³¨å…¥å®¹å™¨æ·»åŠ æ§åˆ¶å™¨æœåŠ¡ã€‚</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">builder.Services.AddEndpointsApiExplorer();</span><br><span class="line">builder.Services.AddSwaggerGen();</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>AddEndpointsApiExplorer</code>ï¼šç”¨äºAPIæ–‡æ¡£ç”Ÿæˆã€‚</p>
</li>
<li class="lvl-2">
<p><code>AddSwaggerGen</code>ï¼šæ·»åŠ Swaggerç”Ÿæˆå™¨ï¼Œç”ŸæˆAPIæ–‡æ¡£ã€‚</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> app = builder.Build();</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>builder.Build()</code>ï¼šæ„å»ºWebåº”ç”¨ç¨‹åºã€‚</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (app.Environment.IsDevelopment())</span><br><span class="line">&#123;</span><br><span class="line">    app.UseDeveloperExceptionPage();</span><br><span class="line">    app.UseSwagger();</span><br><span class="line">    app.UseSwaggerUI();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>app.Environment.IsDevelopment()</code>ï¼šæ£€æŸ¥å½“å‰ç¯å¢ƒæ˜¯å¦æ˜¯å¼€å‘ç¯å¢ƒã€‚</p>
</li>
<li class="lvl-2">
<p><code>UseDeveloperExceptionPage</code>ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨å¼€å‘è€…å¼‚å¸¸é¡µé¢ã€‚</p>
</li>
<li class="lvl-2">
<p><code>UseSwagger</code>å’Œ<code>UseSwaggerUI</code>ï¼šå¯ç”¨Swaggerä¸­é—´ä»¶ï¼Œæä¾›APIæ–‡æ¡£UIã€‚</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">app.UseHttpsRedirection();</span><br><span class="line">app.UseAuthorization();</span><br><span class="line">app.MapControllers();</span><br><span class="line">app.Run();</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>UseHttpsRedirection</code>ï¼šå¼ºåˆ¶ä½¿ç”¨HTTPSã€‚</p>
</li>
<li class="lvl-2">
<p><code>UseAuthorization</code>ï¼šå¯ç”¨æˆæƒä¸­é—´ä»¶ã€‚</p>
</li>
<li class="lvl-2">
<p><code>MapControllers</code>ï¼šå°†æ§åˆ¶å™¨æ˜ å°„åˆ°è·¯ç”±ã€‚</p>
</li>
<li class="lvl-2">
<p><code>app.Run()</code>ï¼šè¿è¡ŒWebåº”ç”¨ç¨‹åºã€‚</p>
</li>
</ul>
<h3 id="2-WeatherForecast-cs">2. <code>WeatherForecast.cs</code></h3>
<p>è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å¤©æ°”é¢„æŠ¥çš„æ•°æ®æ¨¡å‹ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WeatherForecast</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> DateTime Date &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> TemperatureC &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> TemperatureF =&gt; <span class="number">32</span> + (<span class="built_in">int</span>)(TemperatureC / <span class="number">0.5556</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>? Summary &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>Date</code>ï¼šè¡¨ç¤ºé¢„æŠ¥çš„æ—¥æœŸã€‚</p>
</li>
<li class="lvl-2">
<p><code>TemperatureC</code>ï¼šè¡¨ç¤ºæ‘„æ°æ¸©åº¦ã€‚</p>
</li>
<li class="lvl-2">
<p><code>TemperatureF</code>ï¼šè¡¨ç¤ºåæ°æ¸©åº¦ï¼Œé€šè¿‡æ‘„æ°æ¸©åº¦è®¡ç®—å¾—å‡ºã€‚</p>
</li>
<li class="lvl-2">
<p><code>Summary</code>ï¼šè¡¨ç¤ºå¤©æ°”æ€»ç»“ï¼Œå¯ä»¥ä¸ºç©ºï¼ˆ<code>string?</code>è¡¨ç¤ºå¯ç©ºç±»å‹ï¼‰ã€‚</p>
</li>
</ul>
<h3 id="3-WeatherForecastController-cs">3. <code>WeatherForecastController.cs</code></h3>
<p>è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œå¤„ç†ä¸å¤©æ°”é¢„æŠ¥ç›¸å…³çš„HTTPè¯·æ±‚ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Mvc;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>using</code>è¯­å¥ï¼šå¯¼å…¥å‘½åç©ºé—´ï¼ŒåŒ…å«<code>Microsoft.AspNetCore.Mvc</code>ç”¨äºæ§åˆ¶å™¨ç›¸å…³åŠŸèƒ½ã€‚</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">MyWebApiProject.Controllers</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">ApiController</span>]</span><br><span class="line">    [<span class="meta">Route(<span class="string">&quot;[controller]&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WeatherForecastController</span> : <span class="title">ControllerBase</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">string</span>[] Summaries = <span class="keyword">new</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;Freezing&quot;</span>, <span class="string">&quot;Bracing&quot;</span>, <span class="string">&quot;Chilly&quot;</span>, <span class="string">&quot;Cool&quot;</span>, <span class="string">&quot;Mild&quot;</span>, <span class="string">&quot;Warm&quot;</span>, <span class="string">&quot;Balmy&quot;</span>, <span class="string">&quot;Hot&quot;</span>, <span class="string">&quot;Sweltering&quot;</span>, <span class="string">&quot;Scorching&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> ILogger&lt;WeatherForecastController&gt; _logger;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">WeatherForecastController</span>(<span class="params">ILogger&lt;WeatherForecastController&gt; logger</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            _logger = logger;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">HttpGet</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> IEnumerable&lt;WeatherForecast&gt; <span class="title">Get</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> rng = <span class="keyword">new</span> Random();</span><br><span class="line">            <span class="keyword">return</span> Enumerable.Range(<span class="number">1</span>, <span class="number">5</span>).Select(index =&gt; <span class="keyword">new</span> WeatherForecast</span><br><span class="line">            &#123;</span><br><span class="line">                Date = DateTime.Now.AddDays(index),</span><br><span class="line">                TemperatureC = rng.Next(<span class="number">-20</span>, <span class="number">55</span>),</span><br><span class="line">                Summary = Summaries[rng.Next(Summaries.Length)]</span><br><span class="line">            &#125;)</span><br><span class="line">            .ToArray();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¯¦ç»†è§£æï¼š">è¯¦ç»†è§£æï¼š</h4>
<ol>
<li class="lvl-3">
<p><strong><code>[ApiController]</code></strong></p>
<ul class="lvl-2">
<li class="lvl-6">æ ‡è®°è¯¥ç±»ä¸ºAPIæ§åˆ¶å™¨ï¼Œå¯ç”¨ä¸€äº›è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼Œå¦‚æ¨¡å‹éªŒè¯å’Œè·¯ç”±æ¨æ–­ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong><code>[Route(&quot;[controller]&quot;)]</code></strong></p>
<ul class="lvl-2">
<li class="lvl-6">å®šä¹‰æ§åˆ¶å™¨çš„è·¯ç”±æ¨¡æ¿ã€‚<code>[controller]</code>å ä½ç¬¦ä¼šè¢«æ§åˆ¶å™¨åç§°æ›¿æ¢ï¼ˆå»æ‰â€œControllerâ€åç¼€ï¼‰ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>æ§åˆ¶å™¨ç±»</strong>ï¼š</p>
 <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WeatherForecastController</span> : <span class="title">ControllerBase</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-2">
<li class="lvl-6"><code>WeatherForecastController</code>ï¼šæ§åˆ¶å™¨ç±»ï¼Œç»§æ‰¿è‡ª<code>ControllerBase</code>ã€‚</li>
<li class="lvl-6"><code>ControllerBase</code>ï¼šæä¾›è®¿é—®æ§åˆ¶å™¨åŠŸèƒ½çš„åŸºç±»ï¼Œä¸åŒ…å«è§†å›¾æ”¯æŒã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong><code>Summaries</code>å­—æ®µ</strong>ï¼š</p>
 <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">string</span>[] Summaries = <span class="keyword">new</span>[]</span><br></pre></td></tr></table></figure>
<ul class="lvl-2">
<li class="lvl-6">å®šä¹‰äº†ä¸€ä¸ªé™æ€åªè¯»æ•°ç»„ï¼ŒåŒ…å«å„ç§å¤©æ°”æ€»ç»“æè¿°ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>æ„é€ å‡½æ•°</strong>ï¼š</p>
 <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">WeatherForecastController</span>(<span class="params">ILogger&lt;WeatherForecastController&gt; logger</span>)</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-2">
<li class="lvl-6">ä¾èµ–æ³¨å…¥<code>ILogger&lt;WeatherForecastController&gt;</code>å®ä¾‹ï¼Œç”¨äºæ—¥å¿—è®°å½•ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong><code>Get</code>æ–¹æ³•</strong>ï¼š</p>
 <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">HttpGet</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> IEnumerable&lt;WeatherForecast&gt; <span class="title">Get</span>()</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-2">
<li class="lvl-6"><code>[HttpGet]</code>ï¼šæ ‡è®°è¯¥æ–¹æ³•å¤„ç†HTTP GETè¯·æ±‚ã€‚</li>
<li class="lvl-6"><code>Get</code>æ–¹æ³•è¿”å›ä¸€ä¸ª<code>IEnumerable&lt;WeatherForecast&gt;</code>ï¼Œç”Ÿæˆå¹¶è¿”å›5å¤©çš„å¤©æ°”é¢„æŠ¥æ•°æ®ã€‚</li>
</ul>
 <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rng = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="keyword">return</span> Enumerable.Range(<span class="number">1</span>, <span class="number">5</span>).Select(index =&gt; <span class="keyword">new</span> WeatherForecast</span><br><span class="line">&#123;</span><br><span class="line">    Date = DateTime.Now.AddDays(index),</span><br><span class="line">    TemperatureC = rng.Next(<span class="number">-20</span>, <span class="number">55</span>),</span><br><span class="line">    Summary = Summaries[rng.Next(Summaries.Length)]</span><br><span class="line">&#125;)</span><br><span class="line">.ToArray();</span><br></pre></td></tr></table></figure>
<ul class="lvl-2">
<li class="lvl-6">
<p>åˆ›å»ºä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚</p>
</li>
<li class="lvl-6">
<p>ä½¿ç”¨<code>Enumerable.Range</code>ç”Ÿæˆ1åˆ°5çš„æ•´æ•°åºåˆ—ã€‚</p>
</li>
<li class="lvl-6">
<p>ä½¿ç”¨<code>Select</code>æ–¹æ³•å°†æ¯ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ª<code>WeatherForecast</code>å¯¹è±¡ã€‚</p>
</li>
<li class="lvl-6">
<p>ç”Ÿæˆæ—¥æœŸä¸ºå½“å‰æ—¥æœŸåŠ ä¸Šåºåˆ—ä¸­çš„å¤©æ•°ã€‚</p>
</li>
<li class="lvl-6">
<p>ç”Ÿæˆéšæœºçš„æ‘„æ°æ¸©åº¦å’Œå¤©æ°”æ€»ç»“ã€‚</p>
</li>
<li class="lvl-6">
<p>å°†ç»“æœè½¬æ¢ä¸ºæ•°ç»„å¹¶è¿”å›ã€‚</p>
</li>
</ul>
</li>
</ol>
<h3 id="è®¾è®¡ä»£ç ç»“æ„çš„å»ºè®®">è®¾è®¡ä»£ç ç»“æ„çš„å»ºè®®</h3>
<p><a href="http://xn--ASP-lp6e.NET">åœ¨ASP.NET</a> Core Web APIé¡¹ç›®ä¸­ï¼Œå°†ä»£ç åˆ†ä¸ºæ¨¡å‹å±‚ã€æ§åˆ¶å™¨å±‚ã€æœåŠ¡å±‚å’Œæ•°æ®è®¿é—®å±‚æœ‰åŠ©äºç»„ç»‡ä»£ç ï¼Œä½¿å…¶æ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚ä»¥ä¸‹æ˜¯å„ä¸ªå±‚çš„è¯¦ç»†æè¿°ä»¥åŠå®ƒä»¬å­˜æ”¾çš„ä»£ç ç±»å‹ï¼š</p>
<h4 id="1-æ¨¡å‹å±‚ï¼ˆModelsï¼‰">1. æ¨¡å‹å±‚ï¼ˆModelsï¼‰</h4>
<p>æ¨¡å‹å±‚å­˜æ”¾æ•°æ®ç»“æ„å’Œä¸šåŠ¡å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡é€šå¸¸åæ˜ äº†ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡å®ä½“ã€‚</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>æ•°æ®æ¨¡å‹</strong>ï¼šè¡¨ç¤ºæ•°æ®çš„ç»“æ„ï¼Œå¦‚æ•°æ®åº“è¡¨çš„å®ä½“ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆDTOï¼‰</strong>ï¼šç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>è§†å›¾æ¨¡å‹</strong>ï¼šç”¨äºå°†æ•°æ®ä»æ§åˆ¶å™¨ä¼ é€’åˆ°è§†å›¾ï¼ˆåœ¨APIä¸­è¾ƒå°‘ä½¿ç”¨ï¼‰ã€‚</p>
</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶è·¯å¾„ï¼šModels/WeatherForecast.cs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WeatherForecast</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> DateTime Date &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> TemperatureC &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> TemperatureF =&gt; <span class="number">32</span> + (<span class="built_in">int</span>)(TemperatureC / <span class="number">0.5556</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>? Summary &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-æ§åˆ¶å™¨å±‚ï¼ˆControllersï¼‰">2. æ§åˆ¶å™¨å±‚ï¼ˆControllersï¼‰</h4>
<p>æ§åˆ¶å™¨å±‚åŒ…å«æ§åˆ¶å™¨ç±»ï¼Œè¿™äº›ç±»å¤„ç†HTTPè¯·æ±‚å¹¶è¿”å›å“åº”ã€‚æ§åˆ¶å™¨é€šå¸¸ä½¿ç”¨æœåŠ¡å±‚æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>æ§åˆ¶å™¨</strong>ï¼šå¤„ç†HTTPè¯·æ±‚ï¼Œè°ƒç”¨æœåŠ¡å±‚ï¼Œå¹¶è¿”å›å“åº”ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>å±æ€§å’Œæ–¹æ³•</strong>ï¼šå¤„ç†ç‰¹å®šçš„HTTPè¯·æ±‚ï¼ˆå¦‚GETã€POSTã€PUTã€DELETEï¼‰ã€‚</p>
</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶è·¯å¾„ï¼šControllers/WeatherForecastController.cs</span></span><br><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Mvc;</span><br><span class="line"><span class="keyword">using</span> MyWebApiProject.Services;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MyWebApiProject.Controllers</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">ApiController</span>]</span><br><span class="line">    [<span class="meta">Route(<span class="string">&quot;[controller]&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WeatherForecastController</span> : <span class="title">ControllerBase</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> IWeatherForecastService _weatherForecastService;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">WeatherForecastController</span>(<span class="params">IWeatherForecastService weatherForecastService</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            _weatherForecastService = weatherForecastService;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">HttpGet</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> IEnumerable&lt;WeatherForecast&gt; <span class="title">Get</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _weatherForecastService.GetWeatherForecasts();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-æœåŠ¡å±‚ï¼ˆServicesï¼‰">3. æœåŠ¡å±‚ï¼ˆServicesï¼‰</h4>
<p>æœåŠ¡å±‚åŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ“ä½œï¼Œè¿™äº›é€»è¾‘é€šå¸¸æ¶‰åŠå¤šä¸ªæ•°æ®æ¨¡å‹æˆ–éœ€è¦å¤æ‚çš„ä¸šåŠ¡è§„åˆ™ã€‚æœåŠ¡å±‚ä»æ•°æ®è®¿é—®å±‚è·å–æ•°æ®å¹¶è¿›è¡Œå¤„ç†ã€‚</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>æœåŠ¡æ¥å£</strong>ï¼šå®šä¹‰æœåŠ¡çš„åˆåŒã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æœåŠ¡å®ç°</strong>ï¼šå®ç°æœåŠ¡æ¥å£ï¼ŒåŒ…å«å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶è·¯å¾„ï¼šServices/IWeatherForecastService.cs</span></span><br><span class="line"><span class="keyword">using</span> MyWebApiProject.Models;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IWeatherForecastService</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">IEnumerable&lt;WeatherForecast&gt; <span class="title">GetWeatherForecasts</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶è·¯å¾„ï¼šServices/WeatherForecastService.cs</span></span><br><span class="line"><span class="keyword">using</span> MyWebApiProject.Models;</span><br><span class="line"><span class="keyword">using</span> MyWebApiProject.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WeatherForecastService</span> : <span class="title">IWeatherForecastService</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> IWeatherForecastRepository _repository;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeatherForecastService</span>(<span class="params">IWeatherForecastRepository repository</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _repository = repository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerable&lt;WeatherForecast&gt; <span class="title">GetWeatherForecasts</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _repository.GetWeatherForecasts();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-æ•°æ®è®¿é—®å±‚ï¼ˆData-Access-Layer-DALï¼‰">4. æ•°æ®è®¿é—®å±‚ï¼ˆData Access Layer, DALï¼‰</h4>
<p>æ•°æ®è®¿é—®å±‚å¤„ç†ä¸æ•°æ®åº“çš„äº¤äº’ï¼Œè´Ÿè´£ä»æ•°æ®åº“ä¸­æ£€ç´¢å’Œå­˜å‚¨æ•°æ®ã€‚</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>ä»“å‚¨æ¥å£</strong>ï¼šå®šä¹‰æ•°æ®è®¿é—®çš„åˆåŒã€‚</p>
</li>
<li class="lvl-2">
<p><strong>ä»“å‚¨å®ç°</strong>ï¼šå®ç°ä»“å‚¨æ¥å£ï¼ŒåŒ…å«å…·ä½“çš„æ•°æ®è®¿é—®é€»è¾‘ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ•°æ®ä¸Šä¸‹æ–‡</strong>ï¼šè¡¨ç¤ºæ•°æ®åº“è¿æ¥å’Œæ“ä½œã€‚</p>
</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶è·¯å¾„ï¼šData/IWeatherForecastRepository.cs</span></span><br><span class="line"><span class="keyword">using</span> MyWebApiProject.Models;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IWeatherForecastRepository</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">IEnumerable&lt;WeatherForecast&gt; <span class="title">GetWeatherForecasts</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶è·¯å¾„ï¼šData/WeatherForecastRepository.cs</span></span><br><span class="line"><span class="keyword">using</span> MyWebApiProject.Models;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WeatherForecastRepository</span> : <span class="title">IWeatherForecastRepository</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerable&lt;WeatherForecast&gt; <span class="title">GetWeatherForecasts</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå¯ä»¥è¿æ¥æ•°æ®åº“å¹¶è·å–æ•°æ®</span></span><br><span class="line">        <span class="keyword">var</span> rng = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">return</span> Enumerable.Range(<span class="number">1</span>, <span class="number">5</span>).Select(index =&gt; <span class="keyword">new</span> WeatherForecast</span><br><span class="line">        &#123;</span><br><span class="line">            Date = DateTime.Now.AddDays(index),</span><br><span class="line">            TemperatureC = rng.Next(<span class="number">-20</span>, <span class="number">55</span>),</span><br><span class="line">            Summary = Summaries[rng.Next(Summaries.Length)]</span><br><span class="line">        &#125;)</span><br><span class="line">        .ToArray();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">string</span>[] Summaries = <span class="keyword">new</span>[]</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Freezing&quot;</span>, <span class="string">&quot;Bracing&quot;</span>, <span class="string">&quot;Chilly&quot;</span>, <span class="string">&quot;Cool&quot;</span>, <span class="string">&quot;Mild&quot;</span>, <span class="string">&quot;Warm&quot;</span>, <span class="string">&quot;Balmy&quot;</span>, <span class="string">&quot;Hot&quot;</span>, <span class="string">&quot;Sweltering&quot;</span>, <span class="string">&quot;Scorching&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä»£ç ç»“æ„è®¾è®¡å»ºè®®">ä»£ç ç»“æ„è®¾è®¡å»ºè®®</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®çš„ç›®å½•ç»“æ„ï¼Œä»¥å¸®åŠ©ç»„ç»‡å„ä¸ªå±‚çš„ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MyWebApiProject</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ Controllers</span><br><span class="line">â”‚   â””â”€â”€ WeatherForecastController.cs</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ Models</span><br><span class="line">â”‚   â””â”€â”€ WeatherForecast.cs</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ Services</span><br><span class="line">â”‚   â”œâ”€â”€ IWeatherForecastService.cs</span><br><span class="line">â”‚   â””â”€â”€ WeatherForecastService.cs</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ Data</span><br><span class="line">â”‚   â”œâ”€â”€ IWeatherForecastRepository.cs</span><br><span class="line">â”‚   â””â”€â”€ WeatherForecastRepository.cs</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ Program.cs</span><br><span class="line">â”œâ”€â”€ Startup.cs (å¦‚æœä½¿ç”¨Startupç±»è¿›è¡Œé…ç½®)</span><br><span class="line">â”œâ”€â”€ appsettings.json</span><br><span class="line">â”‚</span><br><span class="line">â””â”€â”€ MyWebApiProject.csproj</span><br></pre></td></tr></table></figure>
<h4 id="å„å±‚çš„å®ç°åŸç†">å„å±‚çš„å®ç°åŸç†</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>æ¨¡å‹å±‚</strong>ï¼šå®šä¹‰åº”ç”¨ç¨‹åºçš„æ•°æ®ç»“æ„ï¼Œè¡¨ç¤ºä¸šåŠ¡å®ä½“å’Œæ•°æ®ä¼ è¾“å¯¹è±¡ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ§åˆ¶å™¨å±‚</strong>ï¼šå¤„ç†HTTPè¯·æ±‚ï¼Œé€šè¿‡è°ƒç”¨æœåŠ¡å±‚è·å–æˆ–å¤„ç†æ•°æ®ï¼Œç„¶åè¿”å›HTTPå“åº”ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æœåŠ¡å±‚</strong>ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†å¤æ‚çš„æ“ä½œå’Œä¸šåŠ¡è§„åˆ™ã€‚é€šè¿‡è°ƒç”¨æ•°æ®è®¿é—®å±‚è·å–å’Œå­˜å‚¨æ•°æ®ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>æ•°æ®è®¿é—®å±‚</strong>ï¼šä¸æ•°æ®åº“æˆ–å…¶ä»–æ•°æ®æºäº¤äº’ï¼Œæ‰§è¡ŒCRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰æ“ä½œï¼Œè¿”å›æ•°æ®ç»™æœåŠ¡å±‚ã€‚</p>
</li>
</ul>
<p>é€šè¿‡è¿™ç§åˆ†å±‚ç»“æ„ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–ã€æ˜“äºç»´æŠ¤å’Œæµ‹è¯•ï¼ŒåŒæ—¶æ¸…æ™°åœ°åˆ†ç¦»äº†å„ä¸ªéƒ¨åˆ†çš„èŒè´£ã€‚</p>
]]></content>
      <categories>
        <category>C#</category>
      </categories>
      <tags>
        <tag>C#</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL åŸºç¡€æŒ‡ä»¤</title>
    <url>/2024/06/12/MySQL-%E5%9F%BA%E7%A1%80%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<blockquote>
<p>ä»‹ç»äº†MySQLä¸€äº›åŸºç¡€æŒ‡ä»¤,å¢åˆ æ”¹æŸ¥</p>
</blockquote>
<span id="more"></span>
<h3 id="MySQL">MySQL</h3>
<h4 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ·»åŠ ç¯å¢ƒå˜é‡</p>
</li>
<li class="lvl-2">
<p>åˆå§‹åŒ–MySQL</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqld <span class="comment">--initialize-insecure</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‘½ä»¤åœ¨å®‰å…¨æ€§æ–¹é¢å­˜åœ¨ç¼ºé™·ï¼Œä¸»è¦ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ</p>
</li>
<li class="lvl-2">
<p>æ³¨å†ŒMySQLæœåŠ¡</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqld <span class="operator">-</span>install</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>å¯åŠ¨/åœæ­¢ MySQLæœåŠ¡</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">net <span class="keyword">start</span> mysql</span><br><span class="line"></span><br><span class="line">net stop mysql</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>ä¿®æ”¹é»˜è®¤è´¦æˆ·å¯†ç </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqladmin <span class="operator">-</span>u root password xxxx</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>ç™»å½•MySQL</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>pxxxx [<span class="operator">-</span>hæ•°æ®åº“æœåŠ¡å™¨IPåœ°å€ <span class="operator">-</span>Pç«¯å£å·]</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>å¸è½½MySQL</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">net stop mysql</span><br><span class="line"></span><br><span class="line">mysqld <span class="operator">-</span>remove mysql</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="SQLåˆ†ç±»">SQLåˆ†ç±»</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><mark>DDL</mark>:Data Definition Language      å®šä¹‰æ•°æ®åº“å¯¹è±¡</p>
</li>
<li class="lvl-2">
<p><mark>DML</mark> :Data Manipulation Language   æ“ä½œæ•°æ®ï¼Œè¿›è¡Œå¢åˆ æ”¹</p>
</li>
<li class="lvl-2">
<p><mark>DQL</mark>:Data Query Language                  æŸ¥è¯¢æ•°æ®åº“ä¸­çš„è®°å½•</p>
</li>
<li class="lvl-2">
<p><mark>DCL</mark>:Data Control Language                åˆ›å»ºæ•°æ®åº“çš„ç”¨æˆ·ï¼Œæ§åˆ¶è®¿é—®æƒé™</p>
</li>
</ul>
<h4 id="åŸºç¡€è¯­æ³•">åŸºç¡€è¯­æ³•</h4>
<blockquote>
<p>ä»¥åˆ†å·ç»“å°¾ï¼Œä¸åŒºåˆ†å¤§å°å†™</p>
</blockquote>
<h5 id="DDL">DDL</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>æŸ¥è¯¢æ•°æ®åº“</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ›å»ºæ•°æ®åº“</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database filename;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> filename; #å¦‚æœä¸å­˜åœ¨åä¸ºfilenameçš„æ•°æ®åº“å°±è¿›è¡Œåˆ›å»º</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ‡æ¢æ•°æ®åº“</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use filename;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> database();</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ é™¤æ•°æ®åº“</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> database filename;</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">exists</span> filename;</span><br></pre></td></tr></table></figure>
<h6 id="è¡¨æ“ä½œ"><mark>è¡¨æ“ä½œ</mark></h6>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> è¡¨å(</span><br><span class="line">		å­—æ®µ<span class="number">1</span> å­—æ®µç±»å‹ [çº¦æŸ] [comment å­—æ®µ<span class="number">1</span>æ³¨è§£],</span><br><span class="line">    	å­—æ®µ<span class="number">2</span> å­—æ®µç±»å‹ [çº¦æŸ] [comment å­—æ®µ<span class="number">2</span>æ³¨è§£]</span><br><span class="line">)[comment è¡¨æ³¨è§£];</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>çº¦æŸ</th>
<th>æè¿°</th>
<th>å…³é”®å­—</th>
</tr>
</thead>
<tbody>
<tr>
<td>éç©ºçº¦æŸ</td>
<td>é™åˆ¶è¯¥å­—æ®µå€¼ä¸èƒ½ä¸ºnull</td>
<td>not null</td>
</tr>
<tr>
<td>å”¯ä¸€çº¦æŸ</td>
<td>ä¿è¯å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€çš„</td>
<td>unique</td>
</tr>
<tr>
<td>ä¸»é”®çº¦æŸ</td>
<td>ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œ<mark>è¦æ±‚éç©ºä¸”å”¯ä¸€</mark></td>
<td>primary key    ï¼ˆauto_incrementè‡ªå¢ï¼‰</td>
</tr>
<tr>
<td>é»˜è®¤çº¦æŸ</td>
<td>ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µå€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼</td>
<td>default</td>
</tr>
<tr>
<td>å¤–é”®çº¦æŸ</td>
<td>è®©ä¸¤å¼ è¡¨çš„æ•°æ®å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td>
<td>foreign key</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">creat <span class="keyword">table</span> tb_user(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;IDï¼Œå”¯ä¸€æ ‡è¯†&#x27;</span>,</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">    age <span class="type">int</span> comment <span class="string">&#x27;å¹´é¾„&#x27;</span>,</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;ç”·&#x27;</span> comment <span class="string">&#x27;æ€§åˆ«&#x27;</span></span><br><span class="line">)comment <span class="string">&#x27;ç”¨æˆ·è¡¨&#x27;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>æŸ¥è¯¢</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥çœ‹å½“ä¸‹æ•°æ®åº“çš„è¡¨</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹æŒ‡å®šè¡¨ç»“æ„</span></span><br><span class="line"><span class="keyword">desc</span> tablename;</span><br><span class="line"></span><br><span class="line"><span class="comment">--  æŸ¥çœ‹æ•°æ®åº“çš„å»ºè¡¨è¯­å¥</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> tablename;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>ä¿®æ”¹</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä¸ºè¡¨example æ·»åŠ å­—æ®µ qq varchar(11)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> example <span class="keyword">add</span> qq <span class="type">varchar</span>(<span class="number">11</span>) comment <span class="string">&#x27;QQ&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹example å­—æ®µç±»å‹ qq varchar(13)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> example modify qq <span class="type">varchar</span>(<span class="number">13</span>) comment <span class="string">&#x27;QQ&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹example å­—æ®µåqqä¸ºqq_num</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> example change qq qq_num <span class="type">varchar</span>(<span class="number">13</span>) comment <span class="string">&#x27;QQ&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤qq_numå­—æ®µ</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> example <span class="keyword">drop</span> <span class="keyword">column</span> qq_num;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å°†example è¡¨åä¿®æ”¹ä¸ºhello</span></span><br><span class="line">rename <span class="keyword">table</span> example <span class="keyword">to</span> hello;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ é™¤</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ é™¤ example è¡¨</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> eample;</span><br></pre></td></tr></table></figure>
<h5 id="DML">DML</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>insertè¯­å¥</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--  ä¸º example è¡¨çš„ usernameï¼Œnameï¼Œgender å­—æ®µæ’å…¥å€¼</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> example(username, name, gender) <span class="keyword">values</span> (<span class="string">&#x27;tinali&#x27;</span>,<span class="string">&#x27; æçº³é‡Œ&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸º example è¡¨çš„ æ‰€æœ‰å­—æ®µ æ’å…¥å€¼</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> example <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="string">&#x27;tinali&#x27;</span>,<span class="string">&#x27; æçº³é‡Œ&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‰¹é‡ä¸º example è¡¨çš„ usernameï¼Œnameï¼Œgenderå­—æ®µæ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> example(username, name, gender) <span class="keyword">values</span> (<span class="string">&#x27;tinali&#x27;</span>,<span class="string">&#x27;æçº³é‡Œ&#x27;</span>,<span class="number">1</span>),(<span class="string">&#x27;å®¡åˆ¤å®˜&#x27;</span>,<span class="string">&#x27;é‚£ç»´è±ç‰¹&#x27;</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>updateè¯­å¥</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å°† example ä¸­IDä¸º1çš„ name å­—æ®µ æ›´æ–°ä¸º å¼ ä¸‰,username å­—æ®µæ›´æ–°ä¸º hello</span></span><br><span class="line"><span class="keyword">update</span> example <span class="keyword">set</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, username <span class="operator">=</span> <span class="string">&#x27;hello&#x27;</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å°†example ä¸­æ‰€æœ‰ gender å­—æ®µæ”¹ä¸º 1</span></span><br><span class="line"><span class="keyword">update</span> example <span class="keyword">set</span> gender <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>deleteè¯­å¥</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> è¡¨å [<span class="keyword">where</span> æ¡ä»¶];</span><br><span class="line"><span class="comment">-- åˆ é™¤ example ä¸­IDä¸º1çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> example <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤è¡¨ä¸­æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> example;</span><br></pre></td></tr></table></figure>
<h5 id="DQL">DQL</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>åŸºæœ¬æŸ¥è¯¢</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢ç‰¹å®šå­—æ®µ nameï¼Œentrydate å¹¶è¿”å›</span></span><br><span class="line"><span class="keyword">select</span> name,entrydate <span class="keyword">from</span> example;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è¿”å›æ‰€æœ‰å­—æ®µ (é€šé…ç¬¦)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ç‰¹å®šå­—æ®µ nameï¼Œentrydate å¹¶èµ·åˆ«å</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">as</span> å§“å,entrydate <span class="keyword">as</span> å…¥èŒæ—¥æœŸ <span class="keyword">from</span> example;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢jobå­—æ®µçš„è®°å½•ï¼ˆä¸é‡å¤ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> example;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ¡ä»¶æŸ¥è¯¢ï¼ˆ<mark>where</mark>ï¼‰</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select å­—æ®µåˆ—è¡¨ from è¡¨å where æ¡ä»¶åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ name ä¸º ä¸‰å­æ›° çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;ä¸‰å­æ›°&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ id å°äºç­‰äº5 çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> id <span class="operator">&lt;=</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ job ä¸ºç©ºå€¼çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> job <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ job éç©ºå€¼çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> job <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ password ä¸æ˜¯ 123456</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> password <span class="operator">!=</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ age åœ¨ 20 åˆ° 30 ä¹‹é—´çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> age <span class="operator">&gt;=</span> <span class="number">20</span> <span class="operator">&amp;&amp;</span> age <span class="operator">&lt;=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢id ä¸º1ï¼Œ2ï¼Œ3çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)l;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ name ä¸ºä¸¤ä¸ªå­—çš„è®°å½• ï¼ˆä¸¤æ¡ä¸‹åˆ’çº¿ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;__&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ name å­—æ®µä¸­ç¬¬ä¸€ä¸ªå­—ä¸º å¼  çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;å¼ %&#x27;</span></span><br><span class="line"></span><br><span class="line">_å¯æ›¿ä»£ä¸€ä¸ªå­—ç¬¦  <span class="operator">%</span>å¯æ›¿ä»£éšæœºæ•°ç›®çš„å­—ç¬¦</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ†ç»„æŸ¥è¯¢ï¼ˆ<mark>groud by</mark>ï¼‰</p>
<ul class="lvl-2">
<li class="lvl-4">èšåˆå‡½æ•° count max min avg sum</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select èšåˆå‡½æ•° from è¡¨å</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- ç»Ÿè®¡ id å­—æ®µæ•°çš„æ•°ç›®</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(id) <span class="keyword">from</span> example;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select å­—æ®µåˆ—è¡¨ from è¡¨å [where æ¡ä»¶] group by åˆ†ç»„å­—æ®µå[having åˆ†ç»„åçš„è¿‡æ»¤çš„æ¡ä»¶];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ ¹æ® gender åˆ†ç»„ï¼Œç»Ÿè®¡ç”·å¥³å‘˜å·¥çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">select</span> gender,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> example <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ age åœ¨30ï¼ˆåŒ…å«ï¼‰ä»¥å‰çš„å‘˜å·¥ï¼Œå¹¶å¯¹jobè¿›è¡Œåˆ†ç»„ï¼Œè·å¾—æ•°é‡å¤§äºç­‰äº2çš„jobæ•°æ®</span></span><br><span class="line"><span class="keyword">select</span> job,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> example <span class="keyword">where</span> age <span class="operator">&lt;=</span> <span class="number">30</span> <span class="keyword">group</span> <span class="keyword">by</span> job <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ’åºæŸ¥è¯¢ï¼ˆ<mark>order by</mark>ï¼‰</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--select å­—æ®µåˆ—è¡¨ from è¡¨å [where æ¡ä»¶åˆ—è¡¨][group by åˆ†ç»„å­—æ®µ] order by å­—æ®µ1 æ’åºæ–¹æ³•1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--æ ¹æ®å¹´é¾„è¿›è¡Œå‡åºæ’åº  (é™åºdesc)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ†é¡µæŸ¥è¯¢ï¼ˆ<mark>limit</mark>ï¼‰</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select å­—æ®µåˆ—è¡¨ from è¡¨å limit èµ·å§‹ç´¢å¼•ï¼ŒæŸ¥è¯¢è®°å½•æ•°;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä» èµ·å§‹ç´¢å¼•ä¸º0ï¼Œå¼€å§‹æŸ¥è¯¢ï¼Œæ¯å¤œå±•ç¤ºäº”æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example limit <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®ï¼Œæ¯é¡µå±•ç¤ºäº”æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example limit <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ç¬¬äºŒï¼Œæ¯é¡µå±•ç¤ºäº”æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> example limit <span class="number">5</span>,<span class="number">5</span>;</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>èº«ä»½è¯å·ç ç®€æ˜“è¯†åˆ«(opencv + Qt)</title>
    <url>/2024/05/30/%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7%E7%A0%81%E7%AE%80%E6%98%93%E8%AF%86%E5%88%AB-opencv-Qt/</url>
    <content><![CDATA[<p>è®°å½•äº†ä¸€ä¸‹é¡¹ç›®åˆ¶ä½œè¿‡ç¨‹ä¸­ opencvåŸºæœ¬APIçš„ä½¿ç”¨,ä»¥åŠä¸€äº›åŸºæœ¬æ¦‚å¿µæºç å¯è‡³GitHubæŸ¥çœ‹</p>
 <span id="more"></span>
<h1>èº«ä»½è¯ä¿¡æ¯è¯†åˆ«</h1>
<h3 id="1-å›¾ç‰‡çš„è¯»å–-æ˜¾ç¤º">1. å›¾ç‰‡çš„è¯»å– æ˜¾ç¤º</h3>
<blockquote>
<p><strong><mark>imread()è¯»å–å›¾åƒ</mark></strong>ï¼ŒimreadåŒ…å«ä¸¤ä¸ªå‚æ•°ï¼šimread(å›¾åƒè·¯å¾„ï¼Œ å›¾åƒå½¢å¼)ï¼›</p>
<p><strong><mark>namedWindow()</mark></strong> ç”¨æ¥æ–°å»ºä¸€ä¸ªæ˜¾ç¤ºçª—å£,ç”¨æ¥æ˜¾ç¤ºå›¾åƒ,åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼šnamedWindow(çª—å£åç§°ï¼Œ çª—å£å½¢å¼)</p>
<p>**<mark>imshow()</mark>**ç”¨äºæ˜¾ç¤ºå›¾åƒ,åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼šimshow(çª—å£åç§°ï¼Œå›¾åƒåç§°)</p>
</blockquote>
<p><strong>å›¾åƒå½¢å¼æœ‰ä¸‰ç§</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>åŠ è½½å½©è‰²å›¾ç‰‡ (é»˜è®¤åŠ è½½å½¢å¼)</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">imread</span>(å›¾åƒè·¯å¾„ï¼Œ IMREAD_COLOR)ï¼›</span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"><span class="built_in">imread</span>(å›¾åƒè·¯å¾„ï¼Œ <span class="number">1</span>)ï¼›</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åŠ è½½ç°åº¦æ¨¡å¼å›¾åƒ</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">imread</span>(å›¾åƒè·¯å¾„ï¼Œ IMREAD_GRAYSCALE)ï¼›</span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"><span class="built_in">imread</span>(å›¾åƒè·¯å¾„ï¼Œ <span class="number">0</span>)ï¼›</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>åŠ è½½å›¾åƒ,åŒ…æ‹¬alphaé€šé“</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">imread</span>(å›¾åƒè·¯å¾„ï¼ŒIMREAD_UNCHANGED)ï¼›</span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"><span class="built_in">imread</span>(å›¾åƒè·¯å¾„ï¼Œ <span class="number">-1</span>)ï¼›</span><br></pre></td></tr></table></figure>
<p><strong>çª—å£å½¢å¼</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ˜¾ç¤ºçš„å›¾åƒå¤§å°ä¸èƒ½æ”¹å˜ï¼ˆé»˜è®¤å½¢å¼ï¼‰</p>
<p>namedWindow(çª—å£åç§°ï¼Œ WINDOW_AUTOSIZE)     1</p>
</li>
<li class="lvl-2">
<p>å›¾åƒå¤§å°èƒ½å¤Ÿè°ƒèŠ‚</p>
<p>namedWindow(çª—å£åç§°ï¼Œ WINDOW_NORMAL)      0</p>
</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Mat image;   <span class="comment">//åˆ›å»ºä¸€ä¸ªç©ºå›¾åƒimage</span></span><br><span class="line">	image = <span class="built_in">imread</span>(<span class="string">&quot;D://work//c++//Imageprocessing1//ä¼é¹….jpg&quot;</span>);  <span class="comment">//è¯»å–æ–‡ä»¶å¤¹ä¸­çš„å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ£€æµ‹å›¾åƒæ˜¯å¦åŠ è½½æˆåŠŸ</span></span><br><span class="line">	<span class="keyword">if</span> (image.<span class="built_in">empty</span>())  <span class="comment">//æ£€æµ‹imageæœ‰æ— æ•°æ®ï¼Œæ— æ•°æ® image.empty()è¿”å› çœŸ</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Could not open or find the image&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">namedWindow</span>(<span class="string">&quot;IMAGE&quot;</span>);  <span class="comment">//åˆ›å»ºæ˜¾ç¤ºçª—å£ï¼Œä¸åŠ è¿™è¡Œä»£ç ï¼Œä¹Ÿèƒ½æ˜¾ç¤ºï¼Œé»˜è®¤çª—å£å¤§å°ä¸èƒ½æ”¹å˜</span></span><br><span class="line">	<span class="built_in">imshow</span>(<span class="string">&quot;IMAGE&quot;</span>, image);  <span class="comment">//åœ¨çª—å£æ˜¾ç¤ºå›¾åƒ</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">imwrite</span>(<span class="string">&quot;1.png&quot;</span>, image); <span class="comment">//ä¿å­˜å›¾åƒä¸ºpngæ ¼å¼ï¼Œæ–‡ä»¶åç§°ä¸º1</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">waitKey</span>(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-qtä¸­çš„stringè½¬åŒ–ä¸ºopencvä¸­çš„string">2. qtä¸­çš„stringè½¬åŒ–ä¸ºopencvä¸­çš„string</h3>
<blockquote>
<p>å…ˆè°ƒç”¨ <code>toLocal8Bit()</code> æ–¹æ³•å°† <code>fileName</code> è½¬æ¢ä¸ºæœ¬åœ°8ä½ç¼–ç çš„ <code>QByteArray</code>ï¼Œç„¶åå†è°ƒç”¨ <code>data()</code> æ–¹æ³•è·å–è¯¥ <code>QByteArray</code> ä¸­å­˜å‚¨çš„ C é£æ ¼å­—ç¬¦ä¸²çš„æŒ‡é’ˆ</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ID_card_recognition::read_image</span><span class="params">(<span class="type">const</span> QString&amp; fileName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString tmpPath = fileName.<span class="built_in">toLocal8Bit</span>().<span class="built_in">data</span>();<span class="comment">//å°† fileName è½¬æ¢ä¸ºæœ¬åœ°8ä½ç¼–ç çš„ C é£æ ¼å­—ç¬¦ä¸²</span></span><br><span class="line">    Mat image;   <span class="comment">//åˆ›å»ºä¸€ä¸ªç©ºå›¾åƒimage</span></span><br><span class="line">    image = <span class="built_in">imread</span>(tmpPath.<span class="built_in">toStdString</span>(), IMREAD_COLOR);  <span class="comment">//è¯»å–æ–‡ä»¶å¤¹ä¸­çš„å›¾åƒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-äºŒå€¼åŒ–å¤„ç†">3. äºŒå€¼åŒ–å¤„ç†</h3>
<blockquote>
<p>äºŒå€¼åŒ–å¤„ç†ï¼ˆBinarizationï¼‰æ˜¯ä¸€ç§å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œå®ƒå°†å›¾åƒä¸­çš„åƒç´ å€¼æ ¹æ®ç‰¹å®šçš„é˜ˆå€¼è½¬åŒ–ä¸ºä¸¤ç§å€¼ï¼ˆé€šå¸¸æ˜¯0å’Œ255ï¼‰ï¼Œä»è€Œç®€åŒ–å›¾åƒçš„æ•°æ®è¡¨ç¤ºã€‚</p>
<p>é€šå¸¸éœ€è¦<mark>å…ˆå°†å›¾ç‰‡è½¬æ¢ä¸ºç°åº¦å›¾åƒ</mark>å†è¿›è¡ŒäºŒå€¼åŒ–å¤„ç†</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>void threshold(InputArray src, OutputArray dst, double thresh, double maxval, int type);</strong></p>
</li>
</ul>
<blockquote>
<p><code>threshold()</code> å‡½æ•°æ˜¯ OpenCV ä¸­ç”¨äºå›¾åƒäºŒå€¼åŒ–çš„å‡½æ•°ï¼Œå®ƒå°†è¾“å…¥å›¾åƒçš„åƒç´ å€¼æ ¹æ®æŒ‡å®šçš„é˜ˆå€¼è¿›è¡Œåˆ†å‰²ï¼Œç”Ÿæˆä¸€ä¸ªäºŒå€¼åŒ–å›¾åƒ</p>
</blockquote>
<ol>
<li class="lvl-3">
<p><mark>cv::THRESH_BINARY</mark>ï¼šå¦‚æœæºå›¾åƒåƒç´ å€¼å¤§äºé˜ˆå€¼ï¼Œåˆ™è¾“å‡ºå›¾åƒçš„å¯¹åº”åƒç´ å€¼è®¾ç½®ä¸º<code>maxval</code>ï¼Œå¦åˆ™è®¾ç½®ä¸º0ã€‚</p>
</li>
<li class="lvl-3">
<p><mark>cv::THRESH_BINARY_INV</mark>ï¼šä¸<code>THRESH_BINARY</code>ç›¸åï¼Œå¦‚æœæºå›¾åƒåƒç´ å€¼å¤§äºé˜ˆå€¼ï¼Œåˆ™è¾“å‡ºå›¾åƒçš„å¯¹åº”åƒç´ å€¼è®¾ç½®ä¸º0ï¼Œå¦åˆ™è®¾ç½®ä¸º<code>maxval</code>ã€‚</p>
</li>
<li class="lvl-3">
<p><code>cv::THRESH_TRUNC</code>ï¼šå¦‚æœæºå›¾åƒåƒç´ å€¼å¤§äºé˜ˆå€¼ï¼Œåˆ™è¾“å‡ºå›¾åƒçš„å¯¹åº”åƒç´ å€¼è®¾ç½®ä¸ºé˜ˆå€¼<code>thresh</code>ï¼Œå¦åˆ™ä¿æŒæºå›¾åƒçš„åƒç´ å€¼ä¸å˜ã€‚</p>
</li>
<li class="lvl-3">
<p><code>cv::THRESH_TOZERO</code>ï¼šå¦‚æœæºå›¾åƒåƒç´ å€¼å¤§äºé˜ˆå€¼ï¼Œåˆ™è¾“å‡ºå›¾åƒçš„å¯¹åº”åƒç´ å€¼ä¿æŒä¸å˜ï¼Œå¦åˆ™è®¾ç½®ä¸º0ã€‚</p>
</li>
<li class="lvl-3">
<p><code>cv::THRESH_TOZERO_INV</code>ï¼šä¸<code>THRESH_TOZERO</code>ç›¸åï¼Œå¦‚æœæºå›¾åƒåƒç´ å€¼å¤§äºé˜ˆå€¼ï¼Œåˆ™è¾“å‡ºå›¾åƒçš„å¯¹åº”åƒç´ å€¼è®¾ç½®ä¸º0ï¼Œå¦åˆ™ä¿æŒæºå›¾åƒçš„åƒç´ å€¼ä¸å˜ã€‚</p>
</li>
<li class="lvl-3">
<p><code>cv::THRESH_MASK</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ©ç å€¼ï¼Œç”¨äºä¸ä¸Šè¿°å…¶ä»–å€¼è¿›è¡ŒæŒ‰ä½æˆ–æ“ä½œï¼Œä»¥ä¿æŒæ—§çš„OpenCVå…¼å®¹æ€§ã€‚</p>
</li>
<li class="lvl-3">
<p><code>cv::THRESH_OTSU</code>ï¼šåœ¨ä½¿ç”¨<code>THRESH_BINARY</code>æˆ–<code>THRESH_BINARY_INV</code>é˜ˆå€¼ç±»å‹æ—¶ï¼Œè¿™ä¸ªæ ‡å¿—å¯ä»¥è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„é˜ˆå€¼ã€‚å®ƒä¼šè®¡ç®—æºå›¾åƒçš„ç›´æ–¹å›¾ï¼Œå¹¶ä½¿ç”¨å¤§æ´¥äºŒå€¼åŒ–æ–¹æ³•æ¥æ‰¾åˆ°å°†å›¾åƒåˆ†ä¸ºä¸¤ä¸ªç±»åˆ«çš„æœ€ä½³é˜ˆå€¼ã€‚</p>
</li>
<li class="lvl-3">
<p><code>cv::THRESH_TRIANGLE</code>ï¼šè¿™æ˜¯å¦ä¸€ä¸ªè‡ªåŠ¨é€‰æ‹©é˜ˆå€¼çš„æ ‡å¿—ï¼Œå®ƒä½¿ç”¨ä¸‰è§’å½¢æ–¹æ³•æ¥æ‰¾åˆ°æœ€ä¼˜é˜ˆå€¼ï¼Œè¿™ç§æ–¹æ³•é€šå¸¸æ¯”å¤§æ´¥æ–¹æ³•æ›´å¿«ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¸å¦‚å¤§æ´¥æ–¹æ³•å‡†ç¡®ã€‚</p>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å–ç°åº¦å›¾åƒ</span></span><br><span class="line">    Mat image = <span class="built_in">imread</span>(<span class="string">&quot;image.jpg&quot;</span>, IMREAD_GRAYSCALE);</span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Could not open or find the image&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¾ç½®é˜ˆå€¼å’Œæœ€å¤§å€¼</span></span><br><span class="line">    <span class="type">int</span> thresh_value = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> max_value = <span class="number">255</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åº”ç”¨äºŒå€¼åŒ–</span></span><br><span class="line">    Mat binary_image;</span><br><span class="line"> 	<span class="built_in">threshold</span>(image, binary_image, thresh_val, max_value, THRESH_BINARY | THRESH_OTSU);</span><br><span class="line">    <span class="comment">/*THRESH_BINARYï¼šå¤§äºé˜ˆå€¼çš„åƒç´ èµ‹å€¼ä¸º maxvalï¼Œå°äºç­‰äºé˜ˆå€¼çš„åƒç´ èµ‹å€¼ä¸º 0ã€‚</span></span><br><span class="line"><span class="comment">    THRESH_OTSUå¯ä»¥å®ç° Otsu&#x27;s äºŒå€¼åŒ–æ–¹æ³•ï¼Œå³è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„é˜ˆå€¼ï¼Œè€Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šé˜ˆå€¼</span></span><br><span class="line"><span class="comment">    äºŒè€…é€šå¸¸ç»“åˆä½¿ç”¨  ä½¿ç”¨Otsu&#x27;sæ—¶thresh å‚æ•°å¯ä»¥è®¾ç½®ä¸º 0ï¼Œå› ä¸ºè¯¥å€¼ä¸ä¼šè¢«å®é™…ä½¿ç”¨*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">    <span class="built_in">imshow</span>(<span class="string">&quot;Binary Image&quot;</span>, binary_image);</span><br><span class="line">    <span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">destroyAllWindows</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-åŒè¾¹æ»¤æ³¢">4. åŒè¾¹æ»¤æ³¢</h3>
<blockquote>
<p>åŒè¾¹æ»¤æ³¢ï¼ˆBilateral Filterï¼‰æ˜¯ä¸€ç§éçº¿æ€§æ»¤æ³¢æŠ€æœ¯ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä¿æŒè¾¹ç¼˜æ¸…æ™°çš„åŒæ—¶æœ‰æ•ˆåœ°å»é™¤å›¾åƒä¸­çš„å™ªå£°</p>
</blockquote>
<p><strong>void bilateralFilter(InputArray src, OutputArray dst, int d, double sigmaColor, double sigmaSpace, int borderType = BORDER_DEFAULT);</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>d</code>ï¼šæ»¤æ³¢å™¨çš„ç›´å¾„ã€‚å¦‚æœä¸º -1ï¼Œåˆ™æ ¹æ® <code>sigmaSpace</code> è‡ªåŠ¨è®¡ç®—ã€‚</p>
</li>
<li class="lvl-2">
<p><code>sigmaColor</code>ï¼šé¢œè‰²ç©ºé—´çš„æ ‡å‡†å·®ï¼Œè¾ƒå¤§çš„å€¼è¡¨ç¤ºé¢œè‰²ç©ºé—´ä¸­æ›´å¤§çš„åƒç´ è·ç¦»å°†ç›¸äº’æ··åˆã€‚</p>
</li>
<li class="lvl-2">
<p><code>sigmaSpace</code>ï¼šç©ºé—´åŸŸçš„æ ‡å‡†å·®ï¼Œè¾ƒå¤§çš„å€¼è¡¨ç¤ºåœ¨ç©ºé—´åŸŸå†…çš„åƒç´ è·ç¦»å°†ç›¸äº’æ··åˆã€‚</p>
</li>
<li class="lvl-2">
<p><code>borderType</code>ï¼šç”¨äºå¤„ç†è¾¹ç•Œçš„ç±»å‹ï¼Œé»˜è®¤ä¸º <code>BORDER_DEFAULT</code>ã€‚</p>
</li>
</ul>
<h3 id="5-æŸ¥æ‰¾è½®å»“">5.  æŸ¥æ‰¾è½®å»“</h3>
<blockquote>
<p>è½®å»“å¯ä»¥çœ‹ä½œæ˜¯å°†å…·æœ‰ç›¸åŒé¢œè‰²æˆ–ç°åº¦å€¼çš„æ‰€æœ‰è¿ç»­ç‚¹ï¼ˆæ²¿ç€è¾¹ç•Œï¼‰è¿æ¥èµ·æ¥çš„æ›²çº¿</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°åŸå‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cv::findContours</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    InputOutputArray image,</span></span></span><br><span class="line"><span class="params"><span class="function">    OutputArrayOfArrays contours,</span></span></span><br><span class="line"><span class="params"><span class="function">    OutputArray hierarchy,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> mode,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> method,</span></span></span><br><span class="line"><span class="params"><span class="function">    Point offset = Point()</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">//åœ¨é»‘è‰²èƒŒæ™¯ä¸­å¯»æ‰¾ç™½è‰²è½®å»“</span></span><br></pre></td></tr></table></figure>
<ol>
<li class="lvl-3">
<p><strong>image</strong>ï¼šè¾“å…¥å›¾åƒï¼ˆ8ä½å•é€šé“å›¾åƒï¼‰ï¼Œä¹Ÿæ˜¯è¾“å‡ºå›¾åƒã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">å›¾åƒå¿…é¡»æ˜¯äºŒå€¼åŒ–å›¾åƒï¼ˆé€šå¸¸é€šè¿‡ <code>cv::threshold</code> æˆ– <code>cv::Canny</code> ç­‰æ–¹æ³•é¢„å¤„ç†ï¼‰ã€‚</li>
<li class="lvl-5">è¯¥å‡½æ•°ä¼šä¿®æ”¹è¾“å…¥å›¾åƒï¼Œå»ºè®®åœ¨è°ƒç”¨è¯¥å‡½æ•°ä¹‹å‰å¯¹å›¾åƒè¿›è¡Œå¤‡ä»½ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>contours</strong>ï¼šè¾“å‡ºå‚æ•°ï¼Œç”¨äºå­˜å‚¨æ£€æµ‹åˆ°çš„è½®å»“ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">è½®å»“å­˜å‚¨ä¸ºç‚¹çš„å‘é‡çš„å‘é‡ï¼Œæ¯ä¸ªè½®å»“æ˜¯ä¸€ä¸ª <code>std::vector&lt;cv::Point&gt;</code> ç±»å‹çš„å¯¹è±¡ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>hierarchy</strong>ï¼šè¾“å‡ºå‚æ•°ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªè½®å»“çš„å±‚æ¬¡ç»“æ„ä¿¡æ¯ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">è¿™æ˜¯ä¸€ä¸ª <code>std::vector&lt;cv::Vec4i&gt;</code> ç±»å‹çš„å‘é‡ã€‚</li>
<li class="lvl-5"><code>hierarchy[i][0]</code> è¡¨ç¤ºåä¸€ä¸ªè½®å»“çš„ç´¢å¼•ã€‚</li>
<li class="lvl-5"><code>hierarchy[i][1]</code> è¡¨ç¤ºå‰ä¸€ä¸ªè½®å»“çš„ç´¢å¼•ã€‚</li>
<li class="lvl-5"><code>hierarchy[i][2]</code> è¡¨ç¤ºçˆ¶è½®å»“çš„ç´¢å¼•ã€‚</li>
<li class="lvl-5"><code>hierarchy[i][3]</code> è¡¨ç¤ºç¬¬ä¸€ä¸ªå­è½®å»“çš„ç´¢å¼•ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>mode</strong>ï¼šè½®å»“æ£€ç´¢æ¨¡å¼ï¼Œå†³å®šè½®å»“çš„æå–æ–¹å¼å’Œå±‚æ¬¡ç»“æ„ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5"><code>cv::RETR_EXTERNAL</code>ï¼šåªæ£€ç´¢æœ€å¤–å±‚çš„è½®å»“ã€‚</li>
<li class="lvl-5"><code>cv::RETR_LIST</code>ï¼šæ£€ç´¢æ‰€æœ‰è½®å»“ï¼Œä½†ä¸å»ºç«‹å±‚æ¬¡ç»“æ„ã€‚</li>
<li class="lvl-5"><code>cv::RETR_CCOMP</code>ï¼šæ£€ç´¢æ‰€æœ‰è½®å»“å¹¶å°†å®ƒä»¬ç»„ç»‡æˆä¸¤çº§å±‚æ¬¡ç»“æ„ã€‚</li>
<li class="lvl-5"><code>cv::RETR_TREE</code>ï¼šæ£€ç´¢æ‰€æœ‰è½®å»“å¹¶é‡å»ºåµŒå¥—è½®å»“çš„å®Œæ•´å±‚æ¬¡ç»“æ„ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>method</strong>ï¼šè½®å»“è¿‘ä¼¼æ–¹æ³•ï¼Œå†³å®šå¦‚ä½•å­˜å‚¨è½®å»“ç‚¹ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5"><code>cv::CHAIN_APPROX_NONE</code>ï¼šå­˜å‚¨æ‰€æœ‰è½®å»“ç‚¹ã€‚</li>
<li class="lvl-5"><code>cv::CHAIN_APPROX_SIMPLE</code>ï¼šå‹ç¼©æ°´å¹³ã€å‚ç›´å’Œå¯¹è§’çº¿æ®µï¼Œåªä¿ç•™å®ƒä»¬çš„ç«¯ç‚¹ã€‚</li>
<li class="lvl-5"><code>cv::CHAIN_APPROX_TC89_L1</code> å’Œ <code>cv::CHAIN_APPROX_TC89_KCOS</code>ï¼šä½¿ç”¨ Teh-Chin é“¾è¿‘ä¼¼ç®—æ³•ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>offset</strong>ï¼ˆå¯é€‰ï¼‰ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºå¯¹è¾“å‡ºçš„è½®å»“ç‚¹åæ ‡è¿›è¡Œåç§»ï¼Œé»˜è®¤ä¸º <code>(0, 0)</code>ã€‚</p>
</li>
</ol>
<h3 id="6-ç»˜åˆ¶è½®å»“">6. ç»˜åˆ¶è½®å»“</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°åŸå‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cv::drawContours</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    InputOutputArray image,</span></span></span><br><span class="line"><span class="params"><span class="function">    InputArrayOfArrays contours,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> contourIdx,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> Scalar&amp; color,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> thickness = <span class="number">1</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> lineType = LINE_8,</span></span></span><br><span class="line"><span class="params"><span class="function">    InputArray hierarchy = noArray(),</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> maxLevel = INT_MAX,</span></span></span><br><span class="line"><span class="params"><span class="function">    Point offset = Point()</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>
<ol>
<li class="lvl-3">
<p><strong>image</strong>ï¼šè¾“å…¥è¾“å‡ºå‚æ•°ï¼Œç”¨äºç»˜åˆ¶è½®å»“çš„å›¾åƒã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">ç±»å‹ä¸º <code>cv::InputOutputArray</code>ï¼Œé€šå¸¸ä¸º <code>cv::Mat</code> ç±»å‹ã€‚</li>
<li class="lvl-5">è¿™æ˜¯ä¸€ä¸ªä¿®æ”¹åçš„å›¾åƒï¼Œè½®å»“ä¼šè¢«ç»˜åˆ¶åœ¨è¯¥å›¾åƒä¸Šã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>contours</strong>ï¼šè¾“å…¥å‚æ•°ï¼Œè¡¨ç¤ºè½®å»“çš„é›†åˆã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">ç±»å‹ä¸º <code>cv::InputArrayOfArrays</code>ï¼Œé€šå¸¸æ˜¯ <code>std::vector&lt;std::vector&lt;cv::Point&gt;&gt;</code> ç±»å‹ã€‚</li>
<li class="lvl-5">æ¯ä¸ªè½®å»“éƒ½æ˜¯ä¸€ä¸ªç‚¹çš„é›†åˆï¼Œè¡¨ç¤ºå›¾åƒä¸­çš„ä¸€ä¸ªè¿é€šåŒºåŸŸã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>contourIdx</strong>ï¼šè¾“å…¥å‚æ•°ï¼ŒæŒ‡å®šç»˜åˆ¶å“ªä¸ªè½®å»“çš„ç´¢å¼•ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">å¦‚æœä¸ºè´Ÿå€¼ï¼ˆä¾‹å¦‚ <code>-1</code>ï¼‰ï¼Œåˆ™ç»˜åˆ¶æ‰€æœ‰è½®å»“ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>color</strong>ï¼šè¾“å…¥å‚æ•°ï¼ŒæŒ‡å®šç»˜åˆ¶è½®å»“çš„é¢œè‰²ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">ç±»å‹ä¸º <code>cv::Scalar</code>ï¼Œä¾‹å¦‚ <code>cv::Scalar(0, 255, 0)</code> è¡¨ç¤ºç»¿è‰²ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>thickness</strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¾“å…¥å‚æ•°ï¼ŒæŒ‡å®šç»˜åˆ¶è½®å»“çš„çº¿æ¡ç²—ç»†ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">é»˜è®¤å€¼ä¸º <code>1</code>ã€‚</li>
<li class="lvl-5">å¦‚æœå€¼ä¸º <code>FILLED</code> æˆ–è´Ÿå€¼ï¼Œåˆ™å¡«å……æ•´ä¸ªè½®å»“ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>lineType</strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¾“å…¥å‚æ•°ï¼ŒæŒ‡å®šçº¿æ¡çš„ç±»å‹ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">é»˜è®¤å€¼ä¸º <code>cv::LINE_8</code>ï¼Œè¡¨ç¤º 8-è¿æ¥çº¿ã€‚</li>
<li class="lvl-5">å¯ä»¥ä¸º <code>cv::LINE_4</code>ï¼ˆ4-è¿æ¥çº¿ï¼‰æˆ– <code>cv::LINE_AA</code>ï¼ˆæŠ—é”¯é½¿çº¿ï¼‰ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>hierarchy</strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¾“å…¥å‚æ•°ï¼ŒæŒ‡å®šè½®å»“çš„å±‚æ¬¡ç»“æ„ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">ç±»å‹ä¸º <code>cv::InputArray</code>ï¼Œé€šå¸¸æ˜¯ <code>std::vector&lt;cv::Vec4i&gt;</code> ç±»å‹ã€‚</li>
<li class="lvl-5">å¦‚æœä¸éœ€è¦å±‚æ¬¡ç»“æ„ï¼Œå¯ä»¥ä¼ é€’ <code>cv::noArray()</code>ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>maxLevel</strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¾“å…¥å‚æ•°ï¼ŒæŒ‡å®šç»˜åˆ¶è½®å»“çš„æœ€å¤§å±‚æ¬¡ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">é»˜è®¤å€¼ä¸º <code>INT_MAX</code>ï¼Œè¡¨ç¤ºç»˜åˆ¶æ‰€æœ‰å±‚æ¬¡çš„è½®å»“ã€‚</li>
<li class="lvl-5">ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½®ä¸º <code>0</code>ï¼Œåˆ™åªç»˜åˆ¶æœ€å¤–å±‚çš„è½®å»“ã€‚</li>
</ul>
</li>
<li class="lvl-3">
<p><strong>offset</strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¾“å…¥å‚æ•°ï¼ŒæŒ‡å®šç»˜åˆ¶è½®å»“æ—¶çš„åç§»é‡ã€‚</p>
<ul class="lvl-2">
<li class="lvl-5">ç±»å‹ä¸º <code>cv::Point</code>ï¼Œé»˜è®¤å€¼ä¸º <code>cv::Point(0, 0)</code>ã€‚</li>
</ul>
</li>
</ol>
<h3 id="7-ç»˜åˆ¶è½®å»“-äºŒ">7 ç»˜åˆ¶è½®å»“(äºŒ)</h3>
<p><strong>7.1 <code>cv::boundingRect</code> å‡½æ•°</strong></p>
<blockquote>
<p>ç”¨äºè®¡ç®—ç»™å®šç‚¹é›†æˆ–è½®å»“çš„æœ€å°è¾¹ç•ŒçŸ©å½¢ã€‚è¿™ä¸ªçŸ©å½¢æ˜¯å®Œå…¨åŒ…å«è¾“å…¥è½®å»“çš„æœ€å°çŸ©å½¢ï¼Œå¹¶ä¸”å…¶è¾¹ä¸åæ ‡è½´å¯¹é½ã€‚</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">cv::Rect <span class="title">cv::boundingRect</span><span class="params">(InputArray points)</span></span>;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>points</strong>ï¼šè¾“å…¥çš„ç‚¹é›†ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªè½®å»“ï¼ˆå¦‚ <code>std::vector&lt;cv::Point&gt;</code>ï¼‰æˆ–è€…æ˜¯ <code>cv::Mat</code> ç±»å‹çš„ç‚¹é›†ã€‚</p>
</li>
</ul>
<p><strong>è¿”å›å€¼</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>è¿”å›ä¸€ä¸ª <code>cv::Rect</code> å¯¹è±¡ï¼Œè¡¨ç¤ºåŒ…å«æ‰€æœ‰è¾“å…¥ç‚¹çš„æœ€å°è¾¹ç•ŒçŸ©å½¢ã€‚</p>
</li>
</ul>
<p><strong>7.2 <code>cv::rectangle</code> å‡½æ•°</strong></p>
<blockquote>
<p>ç”¨äºåœ¨å›¾åƒä¸Šç»˜åˆ¶çŸ©å½¢ã€‚å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®çŸ©å½¢çš„ä½ç½®ã€å¤§å°ã€é¢œè‰²å’Œçº¿æ¡åšåº¦ç­‰å±æ€§ã€‚</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°åŸå‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cv::rectangle</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    InputOutputArray img,</span></span></span><br><span class="line"><span class="params"><span class="function">    Point pt1,</span></span></span><br><span class="line"><span class="params"><span class="function">    Point pt2,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> Scalar&amp; color,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> thickness = <span class="number">1</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> lineType = LINE_8,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> shift = <span class="number">0</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line">æˆ–è€…</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cv::rectangle</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    InputOutputArray img,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> Rect&amp; rec,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> Scalar&amp; color,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> thickness = <span class="number">1</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> lineType = LINE_8,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> shift = <span class="number">0</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>img</strong>ï¼šè¾“å…¥è¾“å‡ºå›¾åƒï¼Œç”¨äºç»˜åˆ¶çŸ©å½¢çš„å›¾åƒã€‚</p>
</li>
<li class="lvl-2">
<p><strong>pt1</strong>ï¼šçŸ©å½¢çš„ä¸€ä¸ªé¡¶ç‚¹ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>pt2</strong>ï¼šçŸ©å½¢çš„å¯¹è§’é¡¶ç‚¹ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>rec</strong>ï¼šè¡¨ç¤ºçŸ©å½¢çš„ <code>cv::Rect</code> å¯¹è±¡ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>color</strong>ï¼šçŸ©å½¢çš„é¢œè‰²ï¼Œä½¿ç”¨ <code>cv::Scalar</code> å®šä¹‰ï¼Œä¾‹å¦‚ <code>cv::Scalar(0, 255, 0)</code> è¡¨ç¤ºç»¿è‰²ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>thickness</strong>ï¼šçº¿æ¡åšåº¦ã€‚é»˜è®¤å€¼ä¸º <code>1</code>ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼ˆå¦‚ <code>FILLED</code>ï¼‰ï¼Œåˆ™å¡«å……çŸ©å½¢ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>lineType</strong>ï¼šçº¿æ¡ç±»å‹ï¼Œå¯ä»¥æ˜¯ <code>cv::LINE_8</code>ã€<code>cv::LINE_4</code> æˆ– <code>cv::LINE_AA</code>ã€‚</p>
</li>
<li class="lvl-2">
<p><strong>shift</strong>ï¼šåæ ‡ç‚¹çš„å°æ•°ç‚¹ä½æ•°ï¼Œé»˜è®¤å€¼ä¸º <code>0</code>ã€‚</p>
</li>
</ul>
<p><mark><strong>ç¤ºä¾‹ä»£ç </strong></mark></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; contours.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">    <span class="comment">// è®¡ç®—è½®å»“çš„æœ€å°è¾¹ç•ŒçŸ©å½¢</span></span><br><span class="line">    cv::Rect boundingRect = cv::<span class="built_in">boundingRect</span>(contours[i]);</span><br><span class="line">    <span class="comment">// åœ¨å›¾åƒä¸Šç»˜åˆ¶è¾¹ç•ŒçŸ©å½¢</span></span><br><span class="line">    cv::<span class="built_in">rectangle</span>(image, boundingRect, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—å¹¶æ ‡è®°çŸ©å½¢çš„ä¸­å¿ƒç‚¹</span></span><br><span class="line">    cv::Point center = (boundingRect.<span class="built_in">tl</span>() + boundingRect.<span class="built_in">br</span>()) * <span class="number">0.5</span>;</span><br><span class="line">    cv::<span class="built_in">circle</span>(image, center, <span class="number">5</span>, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="8-è…èš€-ä¸-è†¨èƒ€">8. è…èš€ ä¸ è†¨èƒ€</h3>
<img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240526125045766.png" alt="image-20240526125045766" style="zoom:200%;" />
<img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240526125148573.png" alt="image-20240526125148573" style="zoom:200%;" />
<h3 id="9-å¼€æ“ä½œ-é—­æ“ä½œ">9. å¼€æ“ä½œ é—­æ“ä½œ</h3>
<p><strong>å¼€æ“ä½œ</strong>å…ˆè…èš€åè†¨èƒ€çš„æ“ä½œç§°ä¹‹ä¸ºå¼€æ“ä½œã€‚ä¸»è¦ç”¨äºæ¶ˆé™¤å°çš„ç‰©ä½“ã€åœ¨çº¤ç»†ç‚¹å¤„åˆ†ç¦»ç‰©ä½“ã€å¹³æ»‘è¾ƒå¤§ç‰©ä½“çš„è¾¹ç•Œï¼ŒåŒæ—¶å¹¶ä¸æ˜æ˜¾æ”¹å˜å…¶é¢ç§¯ã€‚æ­¤å¤–ï¼Œå¼€æ“ä½œè¿˜<mark>å¯ä»¥ç”¨äºæå–æ°´å¹³æˆ–ç«–ç›´çš„çº¿æ¡</mark></p>
<p><strong>é—­æ“ä½œ</strong>å…ˆè†¨èƒ€åè…èš€ ä¸»è¦ç”¨äºå¡«å……ç‰©ä½“å†…çš„å°ç©ºæ´ã€è¿æ¥é‚»è¿‘ç‰©ä½“ã€å¹³æ»‘å…¶è¾¹ç•Œï¼ŒåŒæ—¶å¹¶ä¸æ˜æ˜¾æ”¹å˜å…¶é¢ç§¯ <mark>å¯ä»¥ç”¨äºå¡«å……å°çš„å°é—­åŒºåŸŸ</mark></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/imgproc/imgproc.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å–å›¾åƒ</span></span><br><span class="line">    cv::Mat image = cv::<span class="built_in">imread</span>(<span class="string">&quot;path_to_your_image.jpg&quot;</span>, cv::IMREAD_COLOR);</span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;æ— æ³•è¯»å–å›¾åƒ&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºåŸå§‹å›¾åƒ</span></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;åŸå§‹å›¾åƒ&quot;</span>, image);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ç»“æ„å…ƒç´ ï¼Œç”¨äºå¼€æ“ä½œå’Œé—­æ“ä½œ</span></span><br><span class="line">    cv::Mat kernel = cv::<span class="built_in">getStructuringElement</span>(cv::MORPH_RECT, cv::<span class="built_in">Size</span>(<span class="number">5</span>, <span class="number">5</span>));</span><br><span class="line">	<span class="comment">/*kernel2 = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (10, 10)) # æ¤­åœ†ç»“æ„</span></span><br><span class="line"><span class="comment">	kernel3 = cv2.getStructuringElement(cv2.MORPH_CROSS, (10, 10)) # åå­—ç»“æ„*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œå¼€æ“ä½œ</span></span><br><span class="line">    cv::Mat open_result;</span><br><span class="line">    cv::<span class="built_in">morphologyEx</span>(image, open_result, cv::MORPH_OPEN, kernel);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºå¼€æ“ä½œç»“æœ</span></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;å¼€æ“ä½œç»“æœ&quot;</span>, open_result);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œé—­æ“ä½œ</span></span><br><span class="line">    cv::Mat close_result;</span><br><span class="line">    cv::<span class="built_in">morphologyEx</span>(image, close_result, cv::MORPH_CLOSE, kernel);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºé—­æ“ä½œç»“æœ</span></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;é—­æ“ä½œç»“æœ&quot;</span>, close_result);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…æŒ‰é”®åé€€å‡º</span></span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="10-æ¨¡æ¿åŒ¹é…">10. æ¨¡æ¿åŒ¹é…</h3>
<p><strong>void matchTemplate(InputArray image, InputArray templ, OutputArray result, int method);</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>image</code>ï¼šè¾“å…¥å›¾åƒï¼Œå¿…é¡»æ˜¯ 8 ä½æˆ– 32 ä½æµ®ç‚¹æ•°ã€‚</p>
</li>
<li class="lvl-2">
<p><code>template</code>ï¼šæ¨¡æ¿å›¾åƒï¼Œå¿…é¡»æ˜¯ç›¸åŒç±»å‹å’Œæ·±åº¦çš„å¤§å°å°äºæˆ–ç­‰äºè¾“å…¥å›¾åƒçš„å›¾åƒã€‚</p>
</li>
<li class="lvl-2">
<p><code>result</code>ï¼šåŒ¹é…ç»“æœå›¾åƒï¼Œæ˜¯ä¸€ä¸ªå•é€šé“ 32 ä½æµ®ç‚¹æ•°ã€‚æ¯ä¸ªåƒç´ è¡¨ç¤ºè¯¥åŒºåŸŸä¸æ¨¡æ¿çš„åŒ¹é…ç¨‹åº¦ã€‚</p>
</li>
<li class="lvl-2">
<p><code>method</code>æŒ‡å®šçš„åŒ¹é…æ–¹æ³•ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š</p>
<ul class="lvl-2">
<li class="lvl-4"><code>TM_SQDIFF</code>ï¼šå¹³æ–¹å·®åŒ¹é…æ³•ï¼Œè®¡ç®—æ¨¡æ¿ä¸å›¾åƒä¹‹é—´çš„å¹³æ–¹å·®ï¼Œå€¼è¶Šå°è¡¨ç¤ºåŒ¹é…åº¦è¶Šé«˜ã€‚</li>
<li class="lvl-4"><code>TM_SQDIFF_NORMED</code>ï¼šå½’ä¸€åŒ–å¹³æ–¹å·®åŒ¹é…æ³•ï¼Œè®¡ç®—å½’ä¸€åŒ–çš„å¹³æ–¹å·®ï¼Œå€¼è¶Šå°è¡¨ç¤ºåŒ¹é…åº¦è¶Šé«˜ã€‚</li>
<li class="lvl-4"><code>TM_CCORR</code>ï¼šç›¸å…³æ€§åŒ¹é…æ³•ï¼Œè®¡ç®—æ¨¡æ¿ä¸å›¾åƒä¹‹é—´çš„ç›¸å…³æ€§ï¼Œå€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…åº¦è¶Šé«˜ã€‚</li>
<li class="lvl-4"><code>TM_CCORR_NORMED</code>ï¼šå½’ä¸€åŒ–ç›¸å…³æ€§åŒ¹é…æ³•ï¼Œè®¡ç®—å½’ä¸€åŒ–çš„ç›¸å…³æ€§ï¼Œå€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…åº¦è¶Šé«˜ã€‚</li>
<li class="lvl-4"><code>TM_CCOEFF</code>ï¼šç›¸å…³ç³»æ•°åŒ¹é…æ³•ï¼Œè®¡ç®—æ¨¡æ¿ä¸å›¾åƒä¹‹é—´çš„ç›¸å…³ç³»æ•°ï¼Œå€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…åº¦è¶Šé«˜ã€‚</li>
<li class="lvl-4"><code>TM_CCOEFF_NORMED</code>ï¼šå½’ä¸€åŒ–ç›¸å…³ç³»æ•°åŒ¹é…æ³•ï¼Œè®¡ç®—å½’ä¸€åŒ–çš„ç›¸å…³ç³»æ•°ï¼Œå€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…åº¦è¶Šé«˜ã€‚</li>
</ul>
</li>
</ul>
<p><em><em>void minMaxLoc(InputArray src, double</em> minVal, double</em> maxVal = 0, Point* minLoc = 0, Point* maxLoc = 0, InputArray mask = noArray());**</p>
<blockquote>
<p>ç”¨äºåœ¨ç»™å®šçš„çŸ©é˜µä¸­æ‰¾åˆ°æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œå¹¶è¿”å›å®ƒä»¬çš„ä½ç½®ã€‚è¿™ä¸ªå‡½æ•°åœ¨å›¾åƒå¤„ç†ä¸­éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦æ‰¾åˆ°å›¾åƒä¸­çš„æœ€äº®æˆ–æœ€æš—ç‚¹ã€æˆ–è€…åœ¨æ¨¡æ¿åŒ¹é…ä¸­æ‰¾åˆ°æœ€ä½³åŒ¹é…ä½ç½®æ—¶</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>src</code>ï¼šè¾“å…¥çš„å•é€šé“æ•°ç»„ã€‚</p>
</li>
<li class="lvl-2">
<p><code>minVal</code>ï¼šè¿”å›æœ€å°å€¼çš„æŒ‡é’ˆï¼ˆå¦‚æœä¸éœ€è¦ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º <code>NULL</code>ï¼‰ã€‚</p>
</li>
<li class="lvl-2">
<p><code>maxVal</code>ï¼šè¿”å›æœ€å¤§å€¼çš„æŒ‡é’ˆï¼ˆå¦‚æœä¸éœ€è¦ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º <code>NULL</code>ï¼‰ã€‚</p>
</li>
<li class="lvl-2">
<p><code>minLoc</code>ï¼šè¿”å›æœ€å°å€¼ä½ç½®çš„æŒ‡é’ˆï¼ˆå¦‚æœä¸éœ€è¦ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º <code>NULL</code>ï¼‰ã€‚</p>
</li>
<li class="lvl-2">
<p><code>maxLoc</code>ï¼šè¿”å›æœ€å¤§å€¼ä½ç½®çš„æŒ‡é’ˆï¼ˆå¦‚æœä¸éœ€è¦ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º <code>NULL</code>ï¼‰ã€‚</p>
</li>
<li class="lvl-2">
<p><code>mask</code>ï¼šç”¨äºé€‰æ‹©æ•°ç»„å…ƒç´ çš„æ„Ÿå…´è¶£åŒºåŸŸï¼Œå¦‚æœä¸éœ€è¦ï¼Œåˆ™ä½¿ç”¨ <code>noArray()</code>ã€‚</p>
</li>
</ul>
<p><strong>void resize(InputArray src, OutputArray dst, Size dsize, double fx=0, double fy=0, int interpolation=INTER_LINEAR);</strong></p>
<blockquote>
<p>ç¼©æ”¾å›¾ç‰‡</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>src</code>ï¼šè¾“å…¥å›¾åƒï¼Œå¯ä»¥æ˜¯ä»»æ„é€šé“æ•°çš„ <code>Mat</code> å¯¹è±¡ã€‚</p>
</li>
<li class="lvl-2">
<p><code>dst</code>ï¼šè¾“å‡ºå›¾åƒï¼Œå¤§å°ä¸º <code>dsize</code>ï¼Œæˆ–è€…ä¸ <code>src</code> ç›¸åŒç±»å‹å’Œå¤§å°çš„ <code>Mat</code> å¯¹è±¡ã€‚</p>
</li>
<li class="lvl-2">
<p><code>dsize</code>ï¼šè¾“å‡ºå›¾åƒçš„å¤§å°ã€‚å¦‚æœè¿™ä¸ªå‚æ•°ä¸º 0ï¼Œåˆ™å®ƒç”± <code>fx</code> å’Œ <code>fy</code> å‚æ•°å†³å®šã€‚</p>
</li>
<li class="lvl-2">
<p><code>fx</code>ï¼šæ°´å¹³æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ã€‚å¦‚æœè¿™ä¸ªå‚æ•°ä¸º 0ï¼Œåˆ™å®ƒç”± <code>dsize</code> å‚æ•°å†³å®šã€‚</p>
</li>
<li class="lvl-2">
<p><code>fy</code>ï¼šå‚ç›´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ã€‚å¦‚æœè¿™ä¸ªå‚æ•°ä¸º 0ï¼Œåˆ™å®ƒç”± <code>dsize</code> å‚æ•°å†³å®šã€‚</p>
</li>
<li class="lvl-2">
<p><code>interpolation</code>æ’å€¼æ–¹æ³•ï¼Œç”¨äºåœ¨ç¼©æ”¾æ—¶è®¡ç®—æ–°åƒç´ å€¼ã€‚å¯é€‰çš„æ’å€¼æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul class="lvl-2">
<li class="lvl-4"><code>INTER_NEAREST</code>ï¼šæœ€è¿‘é‚»æ’å€¼ã€‚</li>
<li class="lvl-4"><code>INTER_LINEAR</code>ï¼šåŒçº¿æ€§æ’å€¼ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li>
<li class="lvl-4"><code>INTER_AREA</code>ï¼šä½¿ç”¨åƒç´ åŒºåŸŸå…³ç³»é‡é‡‡æ ·ã€‚å½“å›¾åƒç¼©å°æ—¶ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥é¿å…æ³¢çº¹å‡ºç°ï¼Œé€šå¸¸ç”¨äºå›¾åƒç¼©æ”¾ã€‚</li>
<li class="lvl-4"><code>INTER_CUBIC</code>ï¼šä¸‰æ¬¡æ ·æ¡æ’å€¼ã€‚</li>
<li class="lvl-4"><code>INTER_LANCZOS4</code>ï¼šLanczos æ’å€¼ï¼Œè¶…è¿‡ 8x8 åƒç´ é‚»åŸŸçš„é‡‡æ ·ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (ID_number.<span class="built_in">size</span>() != <span class="number">18</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">18</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">	Mat roi = ID_number[i].mat;</span><br><span class="line">	<span class="built_in">resize</span>(roi, roi, <span class="built_in">Size</span>(<span class="number">30</span>, <span class="number">40</span>), <span class="number">0</span>, <span class="number">0</span>, INTER_AREA);</span><br><span class="line">	Mat gray_image;</span><br><span class="line">	<span class="built_in">cvtColor</span>(roi, gray_image, cv::COLOR_BGR2GRAY);</span><br><span class="line">	Mat binary_image;</span><br><span class="line">	<span class="built_in">threshold</span> (gray_image, binary_image, <span class="number">0</span>, <span class="number">255</span>, THRESH_BINARY_INV | THRESH_OTSU);</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> maxIndex = <span class="number">0</span>;</span><br><span class="line">	<span class="type">double</span> Max = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">11</span>; j++)</span><br><span class="line">	&#123;</span><br><span class="line">		Mat template_num = templates_cards[j].mat;</span><br><span class="line">		<span class="built_in">resize</span>(template_num, template_num, <span class="built_in">Size</span>(<span class="number">30</span>, <span class="number">40</span>), <span class="number">0</span>, <span class="number">0</span>, INTER_AREA);</span><br><span class="line">		Mat gray_template_num;</span><br><span class="line">		<span class="built_in">cvtColor</span>(template_num, gray_template_num, cv::COLOR_BGR2GRAY);</span><br><span class="line">		Mat binary_template_num;</span><br><span class="line">		<span class="built_in">threshold</span>(gray_template_num, binary_template_num, <span class="number">0</span>, <span class="number">255</span>, THRESH_BINARY_INV | THRESH_OTSU);</span><br><span class="line"></span><br><span class="line">		Mat result;</span><br><span class="line">		<span class="built_in">matchTemplate</span>(binary_image, binary_template_num, result, TM_CCOEFF_NORMED);</span><br><span class="line">		<span class="type">double</span> minVal, maxVal;</span><br><span class="line">		Point minLoc, maxLoc;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">minMaxLoc</span>(result, &amp;minVal, &amp;maxVal, &amp;minLoc, &amp;maxLoc);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (maxVal &gt; Max)</span><br><span class="line">		&#123;</span><br><span class="line">			Max = maxVal;</span><br><span class="line">			maxIndex = j;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	result[i] = maxIndex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¢é¤ç¨‹åºä¸­qtçš„ä½¿ç”¨(qtåŸºç¡€ç”¨æ³•)</title>
    <url>/2024/05/18/%E8%AE%A2%E9%A4%90%E7%A8%8B%E5%BA%8F%E4%B8%ADqt%E7%9A%84%E4%BD%BF%E7%94%A8-qt%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<blockquote>
<p>è®°å½•äº†ä¸€ä¸‹é¡¹ç›®åˆ¶ä½œè¿‡ç¨‹ä¸­ QtåŸºæœ¬APIçš„ä½¿ç”¨,ä»¥åŠä¸€äº›åŸºæœ¬æ¦‚å¿µæºç å¯è‡³GitHubæŸ¥çœ‹</p>
</blockquote>
<span id="more"></span>
<h1>QtåŸºç¡€çŸ¥è¯†</h1>
<h3 id="1-Qtä¸­çš„çª—å£ç±»">1. Qtä¸­çš„çª—å£ç±»</h3>
<p><strong>1.1 åŸºç¡€çª—å£ç±»</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240503151301988.png" alt="image-20240503151301988"></p>
<p>å¸¸ç”¨çš„çª—å£ç±»æ˜¯å›¾ä¸­ä¸‹é¢ä¸‰ä¸ªï¼Œåœ¨åˆ›å»ºQtçª—å£æ—¶ï¼Œéœ€è¦è®©è‡ªå·±çš„çª—å£ç±»ç»§æ‰¿ä¸Šè¿°ä¸‰ä¸ªçª—å£ç±»ä¸­çš„ä¸€ä¸ª</p>
<p><strong>1.2 çª—å£çš„æ˜¾ç¤ºæ–¹å¼</strong></p>
<p><mark>æ¨¡æ€ï¼ˆmodalï¼‰çª—å£</mark>ï¼šçª—å£å¼¹å‡ºåï¼Œæ²¡å…³é—­ä¹‹å‰ï¼Œ<strong>ä¸å¯ä»¥</strong>å¯¹åŒä¸€åº”ç”¨ç¨‹åºçš„å…¶ä»–çª—å£è¿›è¡Œæ“ä½œï¼›<mark>éæ¨¡æ€ï¼ˆmodelessï¼‰çª—å£</mark>ï¼šçª—å£å¼¹å‡ºåï¼Œæ²¡å…³é—­ä¹‹å‰ï¼Œ<strong>å¯ä»¥</strong>å¯¹åŒä¸€åº”ç”¨ç¨‹åºçš„å…¶ä»–çª—å£è¿›è¡Œæ“ä½œ</p>
<p><strong>1.3 æ¨¡æ€çª—å£çš„å®ç°æ–¹æ³•</strong></p>
<blockquote>
<p>çª—å£çš„show()å‡½æ•°æ˜¾ç¤ºçš„ç±»å‹æ˜¯éæ¨¡æ€çš„ï¼Œæœ‰å‡ ç§æ–¹æ³•å¯ä»¥å°†çª—å£è®¾ä¸ºæ¨¡æ€ï¼Œå¦‚ä¸‹</p>
</blockquote>
<p><strong>1.3.1 QDialogå¯¹è¯æ¡†</strong></p>
<p>æ–¹æ³•ä¸€ï¼šexec()</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">QDialog <span class="title">dlg</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">dlg.<span class="built_in">exec</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//execæ˜¯executeï¼ˆæ‰§è¡Œï¼‰çš„ç¼©å†™ï¼Œå½“è°ƒç”¨exec()å‡½æ•°æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³è¿”å›ï¼Œåªç”¨å½“å¯¹è¯æ¡†å…³é—­æ‰ä¼šè¿”å›ï¼Œå› æ­¤ï¼Œåªæœ‰å…³é—­å¯¹è¯æ¡†æ‰ä¼šæ‰§è¡Œåç»­çš„ä»£ç </span></span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•äºŒï¼šsetModal()</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">QDialog <span class="title">dlg</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">dlg.<span class="built_in">setModal</span>(<span class="literal">true</span>);		<span class="comment">//ç›¸å½“äºdlg.setWindowModality(Qt::ApplicationModal);</span></span><br><span class="line">dlg.<span class="built_in">show</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•ä¸‰ï¼šsetWindowModality()</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">QDialog <span class="title">dlg</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">dlg.<span class="built_in">setWindowModality</span>(Qt::ApplicationModal);</span><br><span class="line">dlg.<span class="built_in">show</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>==setWindowModality()==çš„å‚æ•°è®¾ç½®è¦é˜»å¡çš„çª—å£ç±»å‹:</p>
<table>
<thead>
<tr>
<th>æšä¸¾å€¼</th>
<th>å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qt::NonModal</td>
<td>0</td>
<td>éæ¨¡æ€ï¼Œä¸é˜»å¡ä»»ä½•çª—å£</td>
</tr>
<tr>
<td>Qt::WindowModal</td>
<td>1</td>
<td>åŠæ¨¡æ€,çª—å£ææ¨¡æ€,é˜»å¡å®ƒçš„çˆ¶çª—å£ã€æ‰€æœ‰çš„ç¥–å…ˆçª—å£ä»¥åŠä»–ä»¬çš„å­çª—å£</td>
</tr>
<tr>
<td>Qt::ApplicationModal</td>
<td>2</td>
<td>æ¨¡æ€,åº”ç”¨ç¨‹åºçº§æ¨¡æ€,é˜»å¡åº”ç”¨ç¨‹åºæ‰€æœ‰çš„çª—å£</td>
</tr>
</tbody>
</table>
</blockquote>
<h3 id="2-å¸¸ç”¨ç±»">2. å¸¸ç”¨ç±»</h3>
<h4 id="2-1å­—ç¬¦ä¸²ç±»å‹">2.1å­—ç¬¦ä¸²ç±»å‹</h4>
<blockquote>
<p>C   ----&gt;   char*</p>
<p>C++  ------&gt;   std::string</p>
<p>Qt   -------&gt;   QByteArray,QString</p>
</blockquote>
<p>ç›¸å…³å‡½æ•°,æŸ¥é˜…qtä¸­çš„å¸®åŠ©æ–‡æ¡£,åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥<code>assistant</code></p>
<h4 id="2-2-QVariantç±»">2.2 QVariantç±»</h4>
<blockquote>
<p>ç±»ä¼¼äºC++ä¸­çš„æ¨¡æ¿</p>
<p>å¯ä»¥å¯¹ä¸åŒçš„æ•°æ®ç±»å‹è¿›è¡ŒåŒ…è£…,ä»è€Œä½¿ç”¨<strong>ç›¸åŒ</strong>çš„å‡½æ•°å¯¹<strong>ä¸åŒ</strong>ç±»å‹çš„æ•°æ®è¿›è¡Œå¤„ç†</p>
</blockquote>
<p><strong>2.2.1 å¯¹Qtä¸­çš„æ ‡å‡†ç±»å‹è¿›è¡Œå¤„ç†</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">HelloQt::<span class="built_in">HelloQt</span>(QWidget *parent): <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">    ui.<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="type">int</span> value = <span class="built_in">dataPlus</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">    QString str = <span class="built_in">dataPlus</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>).<span class="built_in">toString</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//dataPlus()å‡½æ•°åœ¨HelloQtç±»ä¸­å·²ç»è¢«å£°æ˜</span></span><br><span class="line"><span class="function">QVariant <span class="title">HelloQt::dataPlus</span><span class="params">(QVariant a,QVariant b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QVariant ret;</span><br><span class="line">    <span class="keyword">if</span>(a.<span class="built_in">type</span>() == QVariant::<span class="type">int</span> &amp;&amp; b.<span class="built_in">type</span>() == QVariant::<span class="type">int</span>)  <span class="comment">//æˆ–è€…ä½¿ç”¨QMetaType::Int</span></span><br><span class="line">        ret = <span class="built_in">QVariant</span>(a.<span class="built_in">toInt</span>() + b.<span class="built_in">toInt</span>());</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a.<span class="built_in">type</span>() == QVariant::String &amp;&amp; b.<span class="built_in">type</span>() == QVariant::String)</span><br><span class="line">        ret.<span class="built_in">setValue</span>(a.<span class="built_in">toString</span>() + b.<span class="built_in">toString</span>());</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2.2.2 è‡ªå®šä¹‰ç±»å‹</strong></p>
<blockquote>
<p>è‹¥è‡ªå®šä¹‰äº†ä¸€ä¸ªç±»å‹,åˆ™éœ€è¦ä½¿ç”¨Qtä¸­çš„å®è¿›è¡Œå£°æ˜</p>
<p><mark>Q_DECLARE_METATYPE(Type)</mark></p>
</blockquote>
<p>ç¬¬ä¸€æ­¥:å®šä¹‰ç±»å‹,å¹¶æ³¨å†Œ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Animal</span>()&#123;&#125;  <span class="comment">//å¿…é¡»è¦æœ‰é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">                <span class="comment">//æ‹·è´æ„é€ å‡½æ•°ä¹Ÿå¿…é¡»æœ‰ï¼Œä¸è¿‡æ²¡æœ‰æ·±ã€æµ…æ‹·è´æ—¶ï¼Œç”¨é»˜è®¤çš„å³å¯</span></span><br><span class="line">    <span class="built_in">Animal</span>(QString name):_name(name)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;Animal show name is :&quot;</span>&lt;&lt; _name &lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QString _name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰ç±»å‹æ³¨å†Œ</span></span><br><span class="line"><span class="built_in">Q_DECLARE_METATYPE</span>(Animal);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥: ä½¿ç”¨fromvalue()å­˜å‚¨å¯¹è±¡</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//QVariant vt(Animal(&quot;snake&quot;)); //ä¸å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°å­˜è‡ªå®šä¹‰ç±»å‹</span></span><br><span class="line">    QVariant vt;</span><br><span class="line">    <span class="comment">//æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•å¯ä»¥ï¼Œå­˜è‡ªå®šä¹‰ç±»å‹</span></span><br><span class="line">    vt = QVariant::<span class="built_in">fromValue</span>(<span class="built_in">Animal</span>(<span class="string">&quot;dog&quot;</span>));    <span class="comment">//â‘ </span></span><br><span class="line">    vt.<span class="built_in">setValue</span>(<span class="built_in">Animal</span>(<span class="string">&quot;cat&quot;</span>));                 <span class="comment">//â‘¡</span></span><br><span class="line">    <span class="comment">//å¦‚æœèƒ½è½¬æ¢åˆ°Animalç±»å‹ï¼Œå°±è½¬æ¢</span></span><br><span class="line">    <span class="keyword">if</span>(vt.<span class="built_in">canConvert</span>&lt;Animal&gt;())</span><br><span class="line">    &#123;</span><br><span class="line">        Animal animal = vt.<span class="built_in">value</span>&lt;Animal&gt;();</span><br><span class="line">        animal.<span class="built_in">show</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-QPoint">2.3 QPoint</h4>
<blockquote>
<p>QPointç±»å°è£…äº†æˆ‘ä»¬å¸¸ç”¨ç”¨åˆ°çš„åæ ‡ç‚¹ (x, y), å¸¸ç”¨çš„ APIå¦‚ä¸‹</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">QPoint::setX</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QPoint::setY</span><span class="params">(<span class="type">int</span> y)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QPoint::x</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">QPoint::rx</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QPoint::y</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">QPoint::ry</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœxå’Œyåæ ‡éƒ½ä¸º0åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isNull</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//è¿”å›x()å’Œy()çš„ç»å¯¹å€¼ä¹‹å’Œï¼Œä¼ ç»Ÿä¸Šç§°ä¸ºä»åŸç‚¹åˆ°è¯¥ç‚¹çš„å‘é‡çš„â€œæ›¼å“ˆé¡¿é•¿åº¦â€ã€‚</span></span></span><br><span class="line"><span class="function"><span class="comment">//(p1-p2).manhattanLength();   </span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">manhattanLength</span><span class="params">()</span> <span class="type">const</span>    </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//è¿”å›ä¸€ä¸ªäº¤æ¢äº†xå’Œyåæ ‡çš„ç‚¹:   QPoint&#123;1, 2&#125;.transposed() // &#123;2, 1&#125;  </span></span></span><br><span class="line"><span class="function">QPoint <span class="title">transposed</span><span class="params">()</span> <span class="type">const</span>    </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">// ç›´æ¥é€šè¿‡åæ ‡å¯¹è±¡è¿›è¡Œç®—æœ¯è¿ç®—: åŠ å‡ä¹˜é™¤</span></span></span><br><span class="line"><span class="function">QPoint &amp;QPoint::<span class="keyword">operator</span>*</span>=(<span class="type">float</span> factor);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>*=(<span class="type">double</span> factor);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>*=(<span class="type">int</span> factor);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>+=(<span class="type">const</span> QPoint &amp;point);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>-=(<span class="type">const</span> QPoint &amp;point);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>/=(qreal divisor);</span><br></pre></td></tr></table></figure>
<h4 id="2-4-QLine">2.4 QLine</h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®ç›´çº¿çš„èµ·ç‚¹åæ ‡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setP1</span><span class="params">(<span class="type">const</span> QPoint &amp;p1)</span></span>;</span><br><span class="line"><span class="comment">// è®¾ç½®ç›´çº¿çš„ç»ˆç‚¹åæ ‡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setP2</span><span class="params">(<span class="type">const</span> QPoint &amp;p2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setPoints</span><span class="params">(<span class="type">const</span> QPoint &amp;p1, <span class="type">const</span> QPoint &amp;p2)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setLine</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">QPoint <span class="title">QLine::p1</span><span class="params">()</span> <span class="type">const</span></span>;      <span class="comment">// è¿”å›ç›´çº¿çš„èµ·å§‹ç‚¹åæ ‡</span></span><br><span class="line"><span class="function">QPoint <span class="title">QLine::p2</span><span class="params">()</span> <span class="type">const</span></span>;      <span class="comment">// è¿”å›ç›´çº¿çš„ç»ˆç‚¹åæ ‡</span></span><br><span class="line"><span class="function">QPoint <span class="title">QLine::center</span><span class="params">()</span> <span class="type">const</span></span>;  <span class="comment">// è¿”å›å€¼ç›´çº¿çš„ä¸­å¿ƒç‚¹åæ ‡, (p1() + p2()) / 2   </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::x1</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// è¿”å›å€¼ç›´çº¿èµ·ç‚¹çš„ x åæ ‡</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::y1</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// è¿”å›å€¼ç›´çº¿èµ·ç‚¹çš„ y åæ ‡</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::x2</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// è¿”å›å€¼ç›´çº¿ç»ˆç‚¹çš„ x åæ ‡</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::y2</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// è¿”å›å€¼ç›´çº¿ç»ˆç‚¹çš„ y åæ ‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::dx</span><span class="params">()</span> <span class="type">const</span>          <span class="comment">//è¿”å›ç›´çº¿å‘é‡çš„æ°´å¹³åˆ†é‡  </span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::dy</span><span class="params">()</span> <span class="type">const</span>          <span class="comment">//è¿”å›ç›´çº¿å‘é‡çš„å‚ç›´åˆ†é‡  </span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// ç”¨ç»™å®šçš„åæ ‡ç‚¹å¹³ç§»è¿™æ¡ç›´çº¿</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::translate</span><span class="params">(<span class="type">const</span> QPoint &amp;offset)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::translate</span><span class="params">(<span class="type">int</span> dx, <span class="type">int</span> dy)</span></span>;</span><br><span class="line"><span class="comment">// ç”¨ç»™å®šçš„åæ ‡ç‚¹å¹³ç§»è¿™æ¡ç›´çº¿, è¿”å›å¹³ç§»ä¹‹åçš„åæ ‡ç‚¹(ä¸ä¼šæ”¹å˜è¿™æ¡çº¿çš„åæ ‡)</span></span><br><span class="line"><span class="function">QLine <span class="title">QLine::translated</span><span class="params">(<span class="type">const</span> QPoint &amp;offset)</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function">QLine <span class="title">QLine::translated</span><span class="params">(<span class="type">int</span> dx, <span class="type">int</span> dy)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´çº¿å¯¹è±¡è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> QLine &amp;line) <span class="type">const</span>;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> QLine &amp;line) <span class="type">const</span>;</span><br></pre></td></tr></table></figure>
<h4 id="2-5-QSize">2.5 QSize</h4>
<blockquote>
<p>åœ¨QTä¸­QSizeç±»ç”¨æ¥å½¢å®¹é•¿åº¦å’Œå®½åº¦, å¸¸ç”¨çš„APIå¦‚ä¸‹:</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWidth</span><span class="params">(<span class="type">int</span> width)</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setHeight</span><span class="params">(<span class="type">int</span> height)</span></span>;</span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">width</span><span class="params">()</span> <span class="type">const</span></span>;      <span class="comment">// å¾—åˆ°å®½åº¦</span></span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">rwidth</span><span class="params">()</span></span>;          <span class="comment">// å¾—åˆ°å®½åº¦çš„å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">height</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// å¾—åˆ°é«˜åº¦</span></span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">rheight</span><span class="params">()</span></span>;         <span class="comment">// å¾—åˆ°é«˜åº¦çš„å¼•ç”¨</span></span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">transpose</span><span class="params">()</span></span>;           <span class="comment">// äº¤æ¢é«˜åº¦å’Œå®½åº¦çš„å€¼</span></span><br><span class="line"><span class="function">QSize <span class="title">transposed</span><span class="params">()</span> <span class="type">const</span></span>;   <span class="comment">// äº¤æ¢é«˜åº¦å’Œå®½åº¦çš„å€¼, è¿”å›äº¤æ¢ä¹‹åçš„å°ºå¯¸ä¿¡æ¯</span></span><br><span class="line">â€‹</span><br><span class="line"><span class="comment">//è¿”å›ä¸€ä¸ªå¤§å°ï¼Œå®½ä¸ºå½“å‰å¤§å°ä¸otherçš„æœ€å°å€¼ï¼Œé«˜ä¸ºå½“å‰å¤§å°ä¸otherçš„æœ€å°å€¼</span></span><br><span class="line"><span class="function">QSize <span class="title">boundedTo</span><span class="params">(<span class="type">const</span> QSize&amp; oterSize)</span></span></span><br><span class="line"><span class="function"><span class="comment">//è¿”å›ä¸€ä¸ªå¤§å°ï¼Œå®½ä¸ºå½“å‰å¤§å°ä¸otherçš„æœ€å¤§å€¼ï¼Œé«˜ä¸ºå½“å‰å¤§å°ä¸otherçš„æœ€å¤§å€¼    </span></span></span><br><span class="line"><span class="function">QSize <span class="title">expandedTo</span><span class="params">(<span class="type">const</span> QSize &amp;otherSize)</span> <span class="type">const</span>    </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="function">æ ¹æ®æŒ‡å®šçš„æ¨¡å¼ï¼ŒæŒ‰ç»™å®šçš„å®½åº¦å’Œé«˜åº¦ç¼©æ”¾çŸ©å½¢:  </span></span></span><br><span class="line"><span class="comment"><span class="function">    å¦‚æœmodeä¸ºQt::IgnoreAspectRatioï¼Œåˆ™å¤§å°è®¾ç½®ä¸º(width, height)ã€‚  </span></span></span><br><span class="line"><span class="comment"><span class="function">    å¦‚æœmodeä¸ºQt::KeepAspectRatioï¼Œå½“å‰å¤§å°å°†åœ¨å†…éƒ¨ç¼©æ”¾åˆ°ä¸€ä¸ªå°½å¯èƒ½å¤§çš„çŸ©å½¢(å®½åº¦ï¼Œé«˜åº¦)ï¼Œä¿æŒé«˜å®½æ¯”ã€‚  </span></span></span><br><span class="line"><span class="comment"><span class="function">    å¦‚æœmodeæ˜¯Qt::KeepAspectRatioByExpandingï¼Œå½“å‰å¤§å°è¢«ç¼©æ”¾åˆ°ä¸€ä¸ªçŸ©å½¢ï¼Œå°½å¯èƒ½å°çš„å¤–éƒ¨(å®½åº¦ï¼Œé«˜åº¦)ï¼Œä¿æŒé•¿å®½æ¯”ã€‚  </span></span></span><br><span class="line"><span class="comment"><span class="function">*/</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">scale</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height, Qt::AspectRatioMode mode)</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">scale</span><span class="params">(<span class="type">const</span> QSize &amp;size, Qt::AspectRatioMode mode)</span></span></span><br><span class="line"><span class="function">QSize <span class="title">scaled</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height, Qt::AspectRatioMode mode)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">QSize <span class="title">scaled</span><span class="params">(<span class="type">const</span> QSize &amp;s, Qt::AspectRatioMode mode)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">â€‹</span></span><br><span class="line"><span class="function"><span class="comment">// è¿›è¡Œç®—æ³•è¿ç®—: åŠ å‡ä¹˜é™¤</span></span></span><br><span class="line"><span class="function">QSize &amp;<span class="keyword">operator</span>*</span>=(qreal factor);</span><br><span class="line">QSize &amp;<span class="keyword">operator</span>+=(<span class="type">const</span> QSize &amp;size);</span><br><span class="line">QSize &amp;<span class="keyword">operator</span>-=(<span class="type">const</span> QSize &amp;size);</span><br><span class="line">QSize &amp;<span class="keyword">operator</span>/=(qreal divisor);</span><br></pre></td></tr></table></figure>
<h3 id="3-ä¿¡å·å’Œæ§½">3. ä¿¡å·å’Œæ§½</h3>
<p><strong>3.1 ä¿¡å·(signal)</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>ä¿¡å·æœ¬è´¨æ˜¯äº‹ä»¶,å¦‚æŒ‰é’®ç‚¹å‡»,çª—å£åˆ·æ–°ç­‰</p>
</li>
<li class="lvl-2">
<p>ä¿¡å·ä»¥å‡½æ•°å½¢å¼å‘ˆç°</p>
</li>
</ul>
<p><mark>Qtä¸­ä¿¡å·çš„å‘å‡ºè€…å¯èƒ½æ˜¯æŸä¸ªå®ä¾‹åŒ–çš„ç±»å¯¹è±¡,å¯¹è±¡å†…éƒ¨å¯ä»¥è¿›è¡Œç›¸å…³äº‹ä»¶çš„æ£€æµ‹</mark></p>
<p><strong>3.2 æ§½(slot)</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ§½å‡½æ•°æ˜¯ä¸€ç±»ç‰¹æ®Šçš„åŠŸèƒ½å‡½æ•°,åœ¨ç¼–ç è¿‡ç¨‹ä¸­ä¹Ÿ<strong>å¯ä»¥ä½œä¸ºç±»çš„æ™®é€šæˆå‘˜å‡½æ•°æ¥ä½¿ç”¨</strong></p>
</li>
<li class="lvl-2">
<p>å¯¹å‘å‡ºæ¥çš„ä¿¡å·è¿›è¡Œå¤„ç†</p>
</li>
</ul>
<p><mark>æ§½å‡½æ•°çš„æ‰€æœ‰è€…ä¹Ÿæ˜¯æŸä¸ªç±»çš„å®ä¾‹å¯¹è±¡</mark></p>
<p><strong>3.3 connectå‡½æ•°</strong></p>
<blockquote>
<p>connectå‡½æ•°å±äºQObjectç±»</p>
</blockquote>
<p>éœ€è¦é€šè¿‡è¿™ä¸ªå‡½æ•°å»ºç«‹signalå’ŒslotäºŒè€…ä¹‹é—´çš„è”ç³»</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">QMetaObject::Connection <span class="title">QObject::connect</span><span class="params">(<span class="type">const</span> QObject *sender,<span class="type">const</span> <span class="type">char</span> *signal, </span></span></span><br><span class="line"><span class="params"><span class="function">                                        <span class="type">const</span> QObject *receiver, [<span class="type">static</span>] <span class="type">const</span> <span class="type">char</span> *method, Qt::ConnectionType type = Qt::AutoConnection)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">------------------------------------------------------------------------</span></span><br><span class="line"><span class="function">sender: å‘é€ä¿¡å·çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">signal: å‘é€çš„ä¿¡å·çš„åç§°,è¯´æ˜å‘å‡ºäº†ä»€ä¹ˆä¿¡å·,ä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºã€‚</span></span><br><span class="line"><span class="function">receiver: æ¥æ”¶ä¿¡å·çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">method: æ¥æ”¶å¯¹è±¡ä¸­ç”¨äºå“åº”ä¿¡å·çš„æ§½å‡½æ•°çš„åç§°ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºã€‚</span></span><br><span class="line"><span class="function">type: è¿æ¥ç±»å‹ï¼Œå†³å®šäº†ä¿¡å·å’Œæ§½çš„è¿æ¥æ–¹å¼ã€‚é»˜è®¤ä¸º Qt::AutoConnectionã€‚</span></span><br><span class="line"><span class="function">   </span></span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæŒ‰é’®ï¼ˆQPushButtonï¼‰ï¼Œå¹¶ä¸”æƒ³è¦åœ¨æŒ‰é’®è¢«ç‚¹å‡»æ—¶æ‰§è¡ŒæŸäº›æ“ä½œï¼Œä½ å¯ä»¥å°†æŒ‰é’®çš„ <code>clicked()</code> ä¿¡å·è¿æ¥åˆ°ä¸€ä¸ªæ§½å‡½æ•°ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line">QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Click me&quot;</span>);</span><br><span class="line">MyObject *myObject = <span class="keyword">new</span> MyObject;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥æŒ‰é’®çš„clickedä¿¡å·åˆ°myObjectçš„slotMethodæ§½å‡½æ•°</span></span><br><span class="line">QObject::<span class="built_in">connect</span>(button, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), myObject, <span class="built_in">SLOT</span>(<span class="built_in">slotMethod</span>()));</span><br><span class="line"><span class="comment">//å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼ŒMyObject çš„ slotMethod æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<p><strong>3.4 è‡ªå®šä¹‰ä¿¡å·å’Œæ§½</strong></p>
<blockquote>
<p>ä¸ºäº†ä½¿è‡ªå®šä¹‰ä¿¡å·å’Œæ§½æ­£å¸¸å·¥ä½œï¼Œç¡®ä¿ä½ çš„ç±»<mark>ç»§æ‰¿è‡ª QObject</mark> å¹¶ä¸”åœ¨ç±»çš„å®šä¹‰ä¸­æ·»åŠ <mark>Q_OBJECT å®</mark>ã€‚åŒæ—¶ï¼Œç¡®ä¿é¡¹ç›®çš„ .pro æ–‡ä»¶ä¸­æ·»åŠ äº† <code>QT += core</code>ï¼Œä»¥ç¡®ä¿ Qt æ ¸å¿ƒæ¨¡å—è¢«æ­£ç¡®é“¾æ¥</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>è‡ªå®šä¹‰ä¿¡å·ï¼Œé€šå¸¸ä¿¡å·åªæœ‰å£°æ˜æ²¡æœ‰å®ç°</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mySignal</span><span class="params">(<span class="type">int</span> value)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>è‡ªå®šä¹‰æ§½ï¼š</p>
</li>
</ul>
<blockquote>
<p>è‡ªå®šä¹‰æ§½æ˜¯æ™®é€šçš„æˆå‘˜å‡½æ•°ï¼Œå¯ä»¥åœ¨ä¿¡å·å‘å°„æ—¶è¢«è°ƒç”¨ã€‚</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span> slots:   <span class="comment">//æ–°ç‰ˆæœ¬ä¸­ä¸å¯ä»¥çœç•¥ä¸å†™</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mySlot</span><span class="params">(<span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Received value:&quot;</span> &lt;&lt; value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>è§¦å‘è‡ªå®šä¹‰ä¿¡å·</p>
</li>
</ul>
<blockquote>
<p>éœ€åœ¨ç±»ä¸­çš„æŸä¸ªå‡½æ•°ä¸­ä½¿ç”¨ <code>emit</code> å…³é”®å­—,å¯åŠ å¯ä¸åŠ ,åŠ äº†æ›´è§„èŒƒ</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyClass::someFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è§¦å‘ä¿¡å·</span></span><br><span class="line">    <span class="function">emit <span class="title">mySignal</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line">MyClass obj;</span><br><span class="line">obj.<span class="built_in">someFunction</span>(); <span class="comment">// è¿™å°†è§¦å‘ mySignalï¼Œå¯¼è‡´ mySlot è¢«è°ƒç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<p><strong>3.5 è¡¥å……</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>ä¿¡å·å¯ä»¥è¿æ¥å¤šä¸ªæ§½å‡½æ•°</p>
</li>
<li class="lvl-2">
<p>ä¿¡å·å¯ä»¥è¿æ¥ä¿¡å·</p>
</li>
<li class="lvl-2">
<p>ä¿¡å·å‡½æ•°å’Œæ§½å‡½æ•°çš„å‚æ•°æœ‰ä¸€äº›è¦æ±‚ï¼š</p>
<ol>
<li class="lvl-5"><strong>å‚æ•°ç±»å‹å¿…é¡»å…¼å®¹</strong>ï¼šä¿¡å·å‡½æ•°å’Œæ§½å‡½æ•°çš„å‚æ•°ç±»å‹å¿…é¡»å…¼å®¹ï¼Œæœ€å¥½æ˜¯ç›¸åŒçš„ç±»å‹æˆ–å¯ä»¥è‡ªåŠ¨è½¬æ¢çš„ç±»å‹ã€‚å¦‚æœå‚æ•°ç±»å‹ä¸å…¼å®¹ï¼Œè¿æ¥å°†æ— æ³•å»ºç«‹ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨å°†ä¼šæŠ¥é”™ã€‚</li>
<li class="lvl-5"><strong>å‚æ•°æ•°é‡å¿…é¡»åŒ¹é…</strong>ï¼šä¿¡å·å‡½æ•°å’Œæ§½å‡½æ•°çš„å‚æ•°æ•°é‡å¿…é¡»åŒ¹é…ã€‚å¦‚æœä¿¡å·å‡½æ•°æœ‰å‚æ•°è€Œæ§½å‡½æ•°æ²¡æœ‰ï¼Œæˆ–è€…æ§½å‡½æ•°æœ‰å‚æ•°è€Œä¿¡å·å‡½æ•°æ²¡æœ‰ï¼Œè¿æ¥ä»ç„¶æ˜¯æœ‰æ•ˆçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœå‚æ•°æ•°é‡ä¸åŒ¹é…ï¼Œè¿æ¥å°†æ— æ³•å»ºç«‹ã€‚</li>
<li class="lvl-5"><strong>å‚æ•°çš„é¡ºåºå’Œç±»å‹å¿…é¡»ä¸€è‡´</strong>ï¼šå‚æ•°çš„é¡ºåºå’Œç±»å‹åœ¨ä¿¡å·å‡½æ•°å’Œæ§½å‡½æ•°ä¹‹é—´å¿…é¡»ä¸€è‡´ã€‚å¦‚æœé¡ºåºæˆ–ç±»å‹ä¸åŒ¹é…ï¼Œè¿æ¥å°†æ— æ³•å»ºç«‹ã€‚</li>
</ol>
</li>
</ul>
<h3 id="4-QLineEdit">4. QLineEdit</h3>
<p><strong>4.1 è·å–å’Œè®¾ç½®æ–‡æœ¬å†…å®¹ï¼š</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>QString text() constï¼šè¿”å›å½“å‰æ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚</p>
</li>
<li class="lvl-2">
<p>setText(const QString &amp;text)ï¼šè®¾ç½®æ–‡æœ¬æ¡†çš„æ–‡æœ¬å†…å®¹ã€‚</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">QLineEdit *lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>();</span><br><span class="line">lineEdit-&gt;<span class="built_in">setText</span>(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å½“å‰æ–‡æœ¬å†…å®¹</span></span><br><span class="line">QString currentText = lineEdit-&gt;<span class="built_in">text</span>();</span><br></pre></td></tr></table></figure>
<p><strong>4.2 å¯†ç æ¨¡å¼</strong></p>
<p><strong>setEchoMode(QLineEdit::EchoMode mode)ï¼šè®¾ç½®æ–‡æœ¬æ¡†çš„æ˜¾ç¤ºæ¨¡å¼ã€‚å¸¸ç”¨çš„æ¨¡å¼æœ‰ï¼š</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>QLineEdit::Normalï¼šé»˜è®¤æ¨¡å¼ï¼Œæ˜¾ç¤ºè¾“å…¥çš„æ–‡æœ¬ã€‚</p>
</li>
<li class="lvl-2">
<p>QLineEdit::Passwordï¼šä»¥å¯†ç å½¢å¼æ˜¾ç¤ºæ–‡æœ¬ï¼Œç”¨åœ†ç‚¹æˆ–æ˜Ÿå·ä»£æ›¿å®é™…å­—ç¬¦ã€‚</p>
</li>
<li class="lvl-2">
<p>QLineEdit::PasswordEchoOnEditï¼šåœ¨ç¼–è¾‘æ—¶ä»¥å¯†ç å½¢å¼æ˜¾ç¤ºæ–‡æœ¬ï¼Œä½†åœ¨å¤±å»ç„¦ç‚¹åæ˜¾ç¤ºåœ†ç‚¹ã€‚</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QLineEdit *lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>();</span><br><span class="line">lineEdit-&gt;<span class="built_in">setEchoMode</span>(QLineEdit::Password);</span><br></pre></td></tr></table></figure>
<p><strong>4.3 è®¾ç½®æœ€å¤§é•¿åº¦</strong></p>
<p><strong>ä½¿ç”¨setMaxLentghæ–¹æ³•å¯ä»¥é™åˆ¶ç”¨æˆ·è¾“å…¥çš„æœ€å¤§å­—ç¬¦æ•°</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QLineEdit* lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="keyword">this</span>);</span><br><span class="line">lineEdit- &gt;<span class="built_in">setMaxLength</span>(<span class="number">10</span>);<span class="comment">//é™åˆ¶è¾“å…¥çš„æœ€å¤§é•¿åº¦ä¸º10ä¸ªå­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h3 id="5-QLable">5. QLable</h3>
<p><strong>5.1 è®¾ç½®å­—ä½“çš„é¢œè‰² å¤§å°ç­‰</strong></p>
<p>å¯ä»¥ä½¿ç”¨setStyleSheet()å‡½æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹æŸä¸ªç»„ä»¶å±€éƒ¨ä½¿ç”¨</span></span><br><span class="line">ui-&gt;display-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;color: red;&quot;</span> <span class="string">&quot;text-align: right;&quot;</span> <span class="string">&quot; font-size: 10px;&quot;</span>);</span><br><span class="line"><span class="comment">//å¯¹æŸä¸ªçª—å£ä¸‹çš„æŸç§ç»„ä»¶è®¾ç½®</span></span><br><span class="line">MainWindow-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;QLineEdit&#123; background-color: lime&#125;&quot;</span>);</span><br><span class="line"><span class="comment">//å…¨å±€ä½¿ç”¨</span></span><br><span class="line"><span class="comment">/*ä½¿ç”¨qAppçš„setStyleSheetå‡½æ•°å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºå…¨å±€è®¾ç½®æ ·å¼ã€‚ä¾‹å¦‚ä¸‹é¢ä¸ºåº”ç”¨ç¨‹åºçš„QLineEditç»„ä»¶è®¾ç½®æ ·å¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">qApp-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;QLineEdit&#123; background-color: gray &#125;&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="6-ä½¿ç”¨ç±»è®¾ç½®å­—ä½“å±æ€§-é¢œè‰²">6. ä½¿ç”¨ç±»è®¾ç½®å­—ä½“å±æ€§ é¢œè‰²</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>QFont<code>ç±»çš„æ„é€ å‡½æ•°</code>QFont(const QString &amp;family, int pointSize, int weight = -1, bool italic = false)</strong></p>
</li>
</ul>
<blockquote>
<p><code>family</code>ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå­—ä½“çš„å®¶æ—åç§°ï¼Œä¾‹å¦‚&quot;Arial&quot;ï¼Œ&quot;Times New Roman&quot;ç­‰ã€‚</p>
<p><code>pointSize</code>ï¼šæ•´æ•°ï¼Œä»£è¡¨å­—ä½“çš„å¤§å°ï¼Œä»¥ç£…ï¼ˆpointï¼‰ä¸ºå•ä½ã€‚</p>
<p><code>weight</code>ï¼šæ•´æ•°ï¼ŒæŒ‡å®šå­—ä½“çš„ç²—ç»†ï¼Œé€šå¸¸æ˜¯100åˆ°1000çš„èŒƒå›´å†…çš„æ•°å€¼ï¼›-1è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<p><code>italic</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå­—ä½“æ˜¯å¦æ˜¯æ–œä½“ï¼›falseè¡¨ç¤ºéæ–œä½“ï¼Œtrueè¡¨ç¤ºæ–œä½“ã€‚</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®å­—ä½“å±æ€§</span></span><br><span class="line"><span class="function">QFont <span class="title">font</span><span class="params">(<span class="string">&quot;Arial&quot;</span>, <span class="number">16</span>)</span></span>;</span><br><span class="line">font.<span class="built_in">setBold</span>(<span class="literal">true</span>);</span><br><span class="line">ui-&gt;lineEdit-&gt;<span class="built_in">setFont</span>(font);</span><br><span class="line"><span class="comment">//è®¾ç½®å¯¹é½ä½ç½®</span></span><br><span class="line">ui-&gt;lineEdit-&gt;<span class="built_in">setAlignment</span>(Qt::AlignRight);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong><code>QPalette</code> ç±»ç”¨äºç®¡ç†çª—å£éƒ¨ä»¶çš„å¤–è§‚ï¼ŒåŒ…æ‹¬èƒŒæ™¯è‰²ã€å‰æ™¯è‰²å’Œæ–‡æœ¬æ ¼å¼ç­‰</strong></p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®é¢œè‰²</span></span><br><span class="line"> QPalette palette;</span><br><span class="line"> palette.<span class="built_in">setColor</span>(QPalette::Text, Qt::red);</span><br><span class="line"> ui-&gt;lineEdit-&gt;<span class="built_in">setPalette</span>(palette);</span><br><span class="line"><span class="comment">//setColor() æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è®¾ç½®çš„é¢œè‰²å±æ€§ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦åº”ç”¨çš„é¢œè‰²å€¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨è®¾ç½®æ§ä»¶èƒŒæ™¯è‰²å¡«å……æ—¶ï¼Œä¸€å®šè¦å…ˆè°ƒç”¨setAutoFillBackground(true)å‡½æ•°ï¼Œæ¥è¿è¡Œè‡ªåŠ¨å¡«å……èƒŒæ™¯</span></span><br></pre></td></tr></table></figure>
<h3 id="7-QProgressBar">7. QProgressBar</h3>
<blockquote>
<p>å¯ä¸QSlider QScrollBar QDialé…åˆä½¿ç”¨</p>
</blockquote>
<p><strong>formatå±æ€§</strong></p>
<p>%p:å®Œæˆçš„ç™¾åˆ†æ¯”  %v:å½“å‰å€¼  %m:æ€»æ­¥éª¤æ•°</p>
<p>é»˜è®¤å€¼ä¸º%p%</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">connect</span>(ui-&gt;slider,&amp;QSlider::valueChanged,<span class="keyword">this</span>,&amp;Widget::do_valueChanged);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::do_valueChanged</span><span class="params">(<span class="type">int</span> value)</span></span>;</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;progressBar-&gt;<span class="built_in">setValue</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-æ—¥æœŸæ—¶é—´æ•°æ®">8. æ—¥æœŸæ—¶é—´æ•°æ®</h3>
<blockquote>
<p>QTime    QDate    QDateTime    QCalendarWidget</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widgey::on_btnGetTime_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QDateTime curDateTime = QDateTime::<span class="built_in">currentDateTime</span>();</span><br><span class="line">    ui-&gt;timeEdit-&gt;<span class="built_in">setTime</span>(curDateTime.<span class="built_in">time</span>());</span><br><span class="line">    ui-&gt;editTime-&gt;<span class="built_in">setText</span>(curDateTime.<span class="built_in">toString</span>(<span class="string">&quot;hh:mm:ss&quot;</span>))</span><br><span class="line">    </span><br><span class="line">    ui-&gt;timeEdit-&gt;<span class="built_in">setDate</span>(curDateTime.<span class="built_in">date</span>());</span><br><span class="line">    ui-&gt;editTime-&gt;<span class="built_in">setText</span>(curDateTime.<span class="built_in">toString</span>(<span class="string">&quot;yy-MM-dd&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    ui-&gt;timeEdit-&gt;<span class="built_in">setDateTime</span>(curDateTime);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::on_calendarWidget_selectionChanged</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è·å–æ—¥å†æ§ä»¶ä¸Šé€‰æ‹©çš„æ—¥æœŸ</span></span><br><span class="line">    QString str = ui-&gt;calendarWidget-&gt;<span class="built_in">selectedDate</span>().<span class="built_in">toString</span>(<span class="string">&quot;yyyyå¹´Mæœˆdæ—¥&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-è®¡æ—¶å™¨-QTimer">9. è®¡æ—¶å™¨ QTimer</h3>
<blockquote>
<p>timer è¶…æ—¶åä¼šå‘å‡ºtimeout()ä¿¡å·ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºå¥½å®šæ—¶å™¨å¯¹è±¡åç»™å…¶å»ºç«‹ä¿¡å·ä¸æ§½</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#inlcude <span class="string">&lt;QTimer&gt;</span></span></span><br><span class="line"></span><br><span class="line">QTimer *timer = <span class="keyword">new</span> QTimer;</span><br><span class="line">timer-&gt;<span class="built_in">setSingleShot</span>(<span class="literal">false</span>);<span class="comment">//è®¾ç½®æ˜¯å¦åªä½¿ç”¨ä¸€æ¬¡</span></span><br><span class="line">timer-&gt;<span class="built_in">setInterval</span>(<span class="number">2000</span>);<span class="comment">//è®¾ç½®æ—¶é—´é—´éš”,ä»¥æ¯«ç§’ä¸ºå•ä½</span></span><br><span class="line"></span><br><span class="line">timer-&gt;<span class="built_in">start</span>();<span class="comment">//å¯åŠ¨</span></span><br><span class="line">timer-&gt;<span class="built_in">stop</span>();<span class="comment">//åœæ­¢</span></span><br><span class="line"><span class="built_in">connect</span>(timer, <span class="built_in">SIGNAL</span>(<span class="built_in">timeout</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">onTimeout</span>()));</span><br></pre></td></tr></table></figure>
<h3 id="10-QTabWidget">10. QTabWidget</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª QTabWidget å®ä¾‹ï¼Œç”¨äºåŒ…å«å¤šä¸ªé€‰é¡¹å¡</span></span><br><span class="line">QTabWidget *tabWidget = <span class="keyword">new</span> QTabWidget;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®é€‰é¡¹å¡çš„å½¢çŠ¶ä¸ºä¸‰è§’å½¢</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">setTabShape</span>(QTabWidget::Triangular);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®é€‰é¡¹å¡å¯ç§»åŠ¨</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">setMovable</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®é€‰é¡¹å¡çš„ä½ç½®ä¸ºå·¦ä¾§</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">setTabPosition</span>(QTabWidget::West);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸‰ä¸ªå­çª—å£éƒ¨ä»¶(QWidget)ï¼Œç”¨ä½œæ¯ä¸ªé€‰é¡¹å¡çš„å†…å®¹</span></span><br><span class="line">QWidget *pageWidget_0 = <span class="keyword">new</span> QWidget;</span><br><span class="line">QWidget *pageWidget_1 = <span class="keyword">new</span> QWidget;</span><br><span class="line">QWidget *pageWidget_2 = <span class="keyword">new</span> QWidget;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ¯ä¸ªå­çª—å£éƒ¨ä»¶æ·»åŠ åˆ°é€‰é¡¹å¡ä¸­ï¼ŒåŒæ—¶è®¾ç½®ç›¸åº”çš„æ ‡ç­¾</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">addTab</span>(pageWidget_0, <span class="string">&quot;ç¬¬ä¸€é¡µ&quot;</span>);</span><br><span class="line">tabWidget-&gt;<span class="built_in">addTab</span>(pageWidget_1, <span class="string">&quot;ç¬¬äºŒé¡µ&quot;</span>);</span><br><span class="line">tabWidget-&gt;<span class="built_in">addTab</span>(pageWidget_2, <span class="string">&quot;ç¬¬ä¸‰é¡µ&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="11-QTableView-QStandardItemModel-QItemSelectionModel">11. QTableView QStandardItemModel QItemSelectionModel</h3>
<blockquote>
<p><strong>QStandardItemModel</strong>æ˜¯Qtæä¾›çš„ç”¨äºå­˜å‚¨å’Œæ“ä½œæ ‡å‡†é¡¹æ•°æ®æ¨¡å‹çš„ç±»ã€‚å®ƒç»§æ‰¿è‡ªQAbstractItemModelï¼Œå¹¶æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥ç»„ç»‡å’Œå±•ç¤ºæ•°æ®ã€‚é€šè¿‡æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æˆ–ç§»åŠ¨æ ‡å‡†é¡¹ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚</p>
<p><strong>QItemSelectionModel</strong>åˆ™æ˜¯ç”¨äºç®¡ç†é¡¹é€‰æ‹©çŠ¶æ€çš„ç±»ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸è§†å›¾äº¤äº’çš„æ¨¡å‹ï¼Œè´Ÿè´£è·Ÿè¸ªç”¨æˆ·é€‰æ‹©çš„é¡¹ä»¥åŠé€šçŸ¥ç›¸å…³è§†å›¾è¿›è¡Œç›¸åº”æ›´æ–°ã€‚QItemSelectionModelå¯ä»¥ç›‘å¬å¹¶å“åº”ç”¨æˆ·é€‰æ‹©é¡¹å˜åŒ–äº‹ä»¶ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼æ”¹å˜é€‰æ‹©çŠ¶æ€ã€‚</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFileDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QStandardItemModel&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QItemSelectionModel&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>:<span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QStandardItemModel* m_model; <span class="comment">// æ•°æ®æ¨¡å‹</span></span><br><span class="line">    QItemSelectionModel* m_selection; <span class="comment">// é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">    QLabel* labCurFile; <span class="comment">// å½“å‰æ–‡ä»¶æ ‡ç­¾</span></span><br><span class="line">    QLabel* labCellPos; <span class="comment">// å½“å‰å•å…ƒæ ¼ä½ç½®æ ‡ç­¾</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    .........</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">do_currentChanged</span><span class="params">(<span class="type">const</span> QModelIndex &amp;current,<span class="type">const</span> QModelIndex &amp;previous)</span></span>;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget* parent):<span class="built_in">QMainWindow</span>(parent),<span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    labCurFile = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="string">&quot;å½“å‰æ–‡ä»¶&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line">    labCurFile-&gt;<span class="built_in">setMinimumWidth</span>(<span class="number">200</span>);</span><br><span class="line">    ui-&gt;statusBar-&gt;<span class="built_in">addWidget</span>(labCurFile); <span class="comment">// å°†å½“å‰æ–‡ä»¶æ ‡ç­¾æ·»åŠ åˆ°çŠ¶æ€æ </span></span><br><span class="line">    </span><br><span class="line">    m_model = <span class="keyword">new</span> <span class="built_in">QStandardItemModel</span>(<span class="number">2</span>,<span class="number">6</span>,<span class="keyword">this</span>); <span class="comment">// åˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œ2è¡Œ6åˆ—</span></span><br><span class="line">    m_selection = <span class="keyword">new</span> <span class="built_in">QItemSelectionModel</span>(m_model,<span class="keyword">this</span>); <span class="comment">// åˆ›å»ºé€‰æ‹©æ¨¡å‹</span></span><br><span class="line">    </span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setModel</span>(m_model); <span class="comment">// è®¾ç½®è¡¨æ ¼è§†å›¾çš„æ¨¡å‹</span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setSelectionModel</span>(m_selection); <span class="comment">// è®¾ç½®è¡¨æ ¼è§†å›¾çš„é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setSelectionMode</span>(QAbstractItemView::ExtendedSelection); <span class="comment">// è®¾ç½®é€‰æ‹©æ¨¡å¼</span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setSelectionBehavior</span>(QAbstractItemView::SelectItems); <span class="comment">// è®¾ç½®é€‰æ‹©è¡Œä¸º</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">connect</span>(m_selection,&amp;QItemSelection::currentChanged,<span class="keyword">this</span>,&amp;MainWindow::do_currentChanged);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWinidow::do_currentChanged</span><span class="params">(<span class="type">const</span> QModelIndex &amp;current,<span class="type">const</span> QModelIndex &amp;previous)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(current.<span class="built_in">isValid</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        labCellPos-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;å½“å‰å•å…ƒæ ¼:%dè¡Œ,%dåˆ—&quot;</span>,current.<span class="built_in">row</span>(),current.<span class="built_in">column</span>()));</span><br><span class="line">        QStandardItem *aItem = m_model-&gt;<span class="built_in">itemFromIndex</span>(current); <span class="comment">// è·å–å½“å‰å•å…ƒæ ¼çš„é¡¹</span></span><br><span class="line">        ui-&gt;actFontBold-&gt;<span class="built_in">setChecked</span>(aItem-&gt;<span class="built_in">font</span>().<span class="built_in">bold</span>()); <span class="comment">// æ£€æŸ¥å½“å‰å•å…ƒæ ¼çš„æ–‡æœ¬æ˜¯å¦ä¸ºç²—ä½“,å¦‚æœå½“å‰å•å…ƒæ ¼çš„æ–‡æœ¬ä¸ºç²—ä½“ï¼ŒåŠ¨ä½œå°†è¢«é€‰ä¸­ï¼Œå¦åˆ™åŠ¨ä½œå°†å–æ¶ˆé€‰ä¸­</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_actOpen_triggered</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰åº”ç”¨ç¨‹åºçš„è·¯å¾„</span></span><br><span class="line">    QString curPath = QCoreApplication::<span class="built_in">applicationDirPath</span>();</span><br><span class="line">    <span class="comment">// æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†ä»¥è·å–è¦æ‰“å¼€çš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    QString aFilePath = QFileDialog::<span class="built_in">getOpenFileName</span>(<span class="keyword">this</span>, <span class="string">&quot;æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶&quot;</span>, curPath, <span class="string">&quot;æ•°æ®æ–‡ä»¶(*.txt);;æ‰€æœ‰æ–‡ä»¶(*.*)&quot;</span>);</span><br><span class="line">    <span class="comment">// å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œåˆ™é€€å‡ºå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (aFileName.<span class="built_in">isEmpty</span>()) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    <span class="function">QFile <span class="title">aFile</span><span class="params">(aFileName)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!aFile.<span class="built_in">open</span>(QIODevice::ReadOnly | QIODevice::Text)) <span class="keyword">return</span>; <span class="comment">// å¦‚æœæ–‡ä»¶æ— æ³•æ‰“å¼€ï¼Œåˆ™é€€å‡ºå‡½æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¯»å–æ–‡ä»¶å†…å®¹å¹¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Š</span></span><br><span class="line">    QStringList aFileContent;</span><br><span class="line">    <span class="function">QTextStream <span class="title">aStream</span><span class="params">(&amp;aFile)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (!aStream.<span class="built_in">atEnd</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        QString str = aStream.<span class="built_in">readLine</span>();</span><br><span class="line">        ui-&gt;plainTextEdit-&gt;<span class="built_in">appendPlainText</span>(str); <span class="comment">// åœ¨æ–‡æœ¬æ¡†ä¸­æ·»åŠ ä¸€è¡Œå†…å®¹</span></span><br><span class="line">        aFileContent.<span class="built_in">append</span>(str); <span class="comment">// å°†è¯»å–çš„æ¯ä¸€è¡Œå†…å®¹æ·»åŠ åˆ°QStringListä¸­</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    aFile.<span class="built_in">close</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ›´æ–°ç•Œé¢æ˜¾ç¤ºï¼Œæ˜¾ç¤ºå½“å‰æ‰“å¼€çš„æ–‡ä»¶å</span></span><br><span class="line">    labCurFile-&gt;<span class="built_in">setText</span>(<span class="string">&quot;å½“å‰æ–‡ä»¶:&quot;</span> + aFileName);</span><br><span class="line">    <span class="comment">// å¯ç”¨ä¸€ä¸ªåŠ¨ä½œï¼ˆå‡è®¾è¿™é‡Œæ˜¯ä¸€ä¸ªèœå•é¡¹æˆ–æŒ‰é’®ï¼‰ï¼Œå…è®¸ç”¨æˆ·è¿½åŠ å†…å®¹</span></span><br><span class="line">    ui-&gt;actAppend-&gt;<span class="built_in">setEnabled</span>(<span class="literal">true</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">iniModelData</span>(aFileContent); <span class="comment">// åˆå§‹åŒ–æ¨¡å‹æ•°æ®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::iniModelData</span><span class="params">(QStringList&amp; aFileContent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> rowCnt  = aFileContent.<span class="built_in">size</span>(); <span class="comment">// è·å–æ–‡ä»¶å†…å®¹çš„è¡Œæ•°</span></span><br><span class="line">    m_model-&gt;<span class="built_in">setRowCount</span>(rowCnt - <span class="number">1</span>); <span class="comment">// è®¾ç½®è¡¨æ ¼æ¨¡å‹çš„è¡Œæ•°ï¼ˆå‡å»æ ‡é¢˜è¡Œï¼‰</span></span><br><span class="line"></span><br><span class="line">    QString header = aFileContent.<span class="built_in">at</span>(<span class="number">0</span>); <span class="comment">// è·å–æ ‡é¢˜è¡Œ</span></span><br><span class="line">    QStringList headerList = header.<span class="built_in">split</span>(<span class="built_in">QRegularExpression</span>(<span class="string">R&quot;(\s+)&quot;</span>), Qt::SkipEmptyParts); <span class="comment">// æ ¹æ®ç©ºç™½å­—ç¬¦æ‹†åˆ†æ ‡é¢˜è¡Œ</span></span><br><span class="line">    m_model-&gt;<span class="built_in">setHorizontalHeaderLabels</span>(headerList); <span class="comment">// è®¾ç½®è¡¨å¤´æ ‡ç­¾</span></span><br><span class="line"></span><br><span class="line">    QStandardItem* aItem; <span class="comment">// ç”¨äºåˆ›å»ºæ¯ä¸ªå•å…ƒæ ¼çš„é¡¹</span></span><br><span class="line">    <span class="type">int</span> j;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; rowCnt; i++) <span class="comment">// ä»ç¬¬äºŒè¡Œå¼€å§‹éå†æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        QString aLineText = aFileContent.<span class="built_in">at</span>(i); <span class="comment">// è·å–å½“å‰è¡Œçš„æ–‡æœ¬</span></span><br><span class="line">        QStringList tmpList = aLineText.<span class="built_in">split</span>(<span class="built_in">QRegularExpression</span>(<span class="string">R&quot;(\s+)&quot;</span>), Qt::SkipEmptyParts); <span class="comment">// æ ¹æ®ç©ºç™½å­—ç¬¦æ‹†åˆ†å½“å‰è¡Œ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">6</span>; j++) <span class="comment">// éå†å½“å‰è¡Œçš„æ¯ä¸€åˆ—ï¼ˆå‡è®¾æ¯è¡Œæœ‰6åˆ—ï¼‰</span></span><br><span class="line">        &#123;</span><br><span class="line">            aItem = <span class="keyword">new</span> <span class="built_in">QStandardItem</span>(tmpList.<span class="built_in">at</span>(j)); <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ï¼Œå†…å®¹ä¸ºå½“å‰åˆ—çš„å€¼</span></span><br><span class="line">            m_model-&gt;<span class="built_in">setItem</span>(i - <span class="number">1</span>, j, aItem); <span class="comment">// åœ¨æŒ‡å®šä½ç½®è®¾ç½®é¡¹</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†æœ€åä¸€åˆ—</span></span><br><span class="line">        aItem = <span class="keyword">new</span> <span class="built_in">QStandardItem</span>(tmpList.<span class="built_in">at</span>(j)); <span class="comment">// åˆ›å»ºæœ€åä¸€åˆ—çš„é¡¹</span></span><br><span class="line">        aItem-&gt;<span class="built_in">setCheckable</span>(<span class="literal">true</span>); <span class="comment">// è®¾ç½®é¡¹ä¸ºå¯é€‰ä¸­çš„</span></span><br><span class="line">        aItem-&gt;<span class="built_in">setBackground</span>(<span class="built_in">QBrush</span>(Qt::yellow)); <span class="comment">// è®¾ç½®é¡¹çš„èƒŒæ™¯é¢œè‰²ä¸ºé»„è‰²</span></span><br><span class="line">        <span class="keyword">if</span>(tmpList.<span class="built_in">at</span>(j) == <span class="string">&quot;0&quot;</span>) <span class="comment">// å¦‚æœå€¼ä¸º0ï¼Œåˆ™è®¾ç½®ä¸ºæœªé€‰ä¸­çŠ¶æ€</span></span><br><span class="line">        &#123;</span><br><span class="line">            aItem-&gt;<span class="built_in">setCheckState</span>(Qt::Unchecked);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// å¦åˆ™è®¾ç½®ä¸ºé€‰ä¸­çŠ¶æ€</span></span><br><span class="line">        &#123;</span><br><span class="line">            aItem-&gt;<span class="built_in">setCheckState</span>(Qt::Checked);</span><br><span class="line">        &#125;</span><br><span class="line">        m_model-&gt;<span class="built_in">setItem</span>(i - <span class="number">1</span>, j, aItem); <span class="comment">// åœ¨æŒ‡å®šä½ç½®è®¾ç½®é¡¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="12-QTableWidget">12. QTableWidget</h3>
<blockquote>
<p>QTableWidgetç»§æ‰¿è‡ªQTableView,QTableWidgetæ˜¯QTableViewçš„å­ç±»ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯QTableViewå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ•°æ®æ¨¡å‹æ¥æ˜¾ç¤ºå†…å®¹(ä¹Ÿå°±æ˜¯å…ˆè¦é€šè¿‡setModelæ¥ç»‘å®šæ•°æ®æº)ï¼Œè€ŒQTableWidgetåˆ™<strong>åªèƒ½</strong>ä½¿ç”¨æ ‡å‡†çš„æ•°æ®æ¨¡å‹ï¼Œå¹¶ä¸”å…¶å•å…ƒæ ¼æ•°æ®æ˜¯<mark>QTableWidgetItem</mark>çš„å¯¹è±¡æ¥å®ç°çš„</p>
</blockquote>
<p><strong>12.1 åˆå§‹åŒ–è¡¨æ ¼æ•°æ®</strong><br>
ç•Œé¢ä¸Šçš„â€œåˆå§‹åŒ–è¡¨æ ¼æ•°æ®â€æŒ‰é’®æ ¹æ®è¡¨æ ¼çš„è¡Œæ•°ï¼Œç”Ÿæˆæ•°æ®å¡«å……è¡¨æ ¼ï¼Œå¹¶ä¸ºæ¯ä¸ªå•å…ƒæ ¼ç”Ÿæˆ QTableWidgetItem å¯¹è±¡ï¼Œè®¾ç½®ç›¸åº”å±æ€§ã€‚ä¸‹é¢æ˜¯ btnlniData çš„ clicked() ä¿¡å·çš„æ§½å‡½æ•°ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::readMenuInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;menuInfo.dat&quot;</span>)</span></span>;</span><br><span class="line">	file.<span class="built_in">open</span>(QIODevice::ReadOnly);</span><br><span class="line">	<span class="keyword">if</span> (!file.<span class="built_in">isOpen</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥1&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		QString name;</span><br><span class="line">		QString type;</span><br><span class="line">		<span class="type">double</span> price;</span><br><span class="line">		<span class="type">double</span> discount;</span><br><span class="line">		QString imagePath;</span><br><span class="line">		<span class="function">QDataStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">		<span class="keyword">while</span> (!in.<span class="built_in">atEnd</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			in &gt;&gt; name &gt;&gt; type &gt;&gt; price &gt;&gt; discount&gt;&gt; imagePath;</span><br><span class="line">			ui-&gt;menuTable-&gt;<span class="built_in">insertRow</span>(ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>());</span><br><span class="line">			<span class="built_in">creatTableRows</span>(ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>()<span class="number">-1</span>, name, type, price, discount,imagePath);<span class="comment">//æ³¨æ„è¦å°†è·å¾—çš„è¡Œæ•°å‡ä¸€</span></span><br><span class="line">			<span class="built_in">qDebug</span>() &lt;&lt; name &lt;&lt; type &lt;&lt; price &lt;&lt; discount &lt;&lt; imagePath;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	file.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">QTableWidget::<span class="built_in">clearContents</span>() å‡½æ•°æ¸…é™¤è¡¨æ ¼æ•°æ®åŒºçš„æ‰€æœ‰å†…å®¹ï¼Œä½†æ˜¯ä¸æ¸…é™¤è¡¨å¤´ã€‚</span><br><span class="line"></span><br><span class="line">QTableWidget::<span class="built_in">rowCount</span>() å‡½æ•°è¿”å›è¡¨æ ¼æ•°æ®åŒºçš„è¡Œæ•°ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨ <span class="keyword">for</span> å¾ªç¯é‡Œä¸ºæ¯ä¸€è¡Œç”Ÿæˆéœ€è¦æ˜¾ç¤ºçš„æ•°æ®ï¼Œç„¶åè°ƒç”¨è‡ªå®šä¹‰å‡½æ•° <span class="built_in">creatTableRows</span>()ï¼Œä¸ºè¡¨æ ¼ä¸€è¡Œçš„å„ä¸ªå•å…ƒæ ¼ç”Ÿæˆ QTableWidgetItem å¯¹è±¡ã€‚</span><br></pre></td></tr></table></figure>
<p>creatTableRows() æ˜¯åœ¨çª—ä½“ç±»é‡Œè‡ªå®šä¹‰çš„å‡½æ•°ï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::creatTableRows</span><span class="params">(<span class="type">int</span> rowNo,  QString menuName, QString type, <span class="type">double</span> price, <span class="type">double</span> discount,QString imagePath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	QTableWidgetItem* item;</span><br><span class="line">	</span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(menuName);</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">0</span>, item);</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(type);</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">1</span>, item);	</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(QString::<span class="built_in">number</span>(price, <span class="string">&#x27;f&#x27;</span>, <span class="number">2</span>));</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">2</span>, item);</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(QString::<span class="built_in">number</span>(discount, <span class="string">&#x27;f&#x27;</span>, <span class="number">2</span>));</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">3</span>, item);</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(imagePath);</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">4</span>, item);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°†ç¬¬å››åˆ—éšè—</span></span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setColumnHidden</span>(<span class="number">4</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>12.2 è·å¾—å½“å‰å•å…ƒæ ¼æ•°æ®</strong><br>
å½“é¼ æ ‡åœ¨è¡¨æ ¼ä¸Šå•å‡»å•å…ƒæ ¼æ—¶ï¼Œè¢«é€‰ä¸­çš„å•å…ƒæ ¼æ˜¯å½“å‰å•å…ƒæ ¼ã€‚é€šè¿‡<mark>QTableWidget çš„ currentColumn() å’Œ currentRow()</mark> å¯ä»¥è·å¾—å½“å‰å•å…ƒæ ¼çš„åˆ—ç¼–å·å’Œè¡Œç¼–å·ã€‚</p>
<p>å½“å‰å•å…ƒæ ¼å‘ç”Ÿåˆ‡æ¢æ—¶ï¼Œä¼šå‘å°„==currentCellChanged() ä¿¡å·å’Œ currentItemChanged()==ä¿¡å·ï¼Œä¸¤ä¸ªä¿¡å·éƒ½å¯ä»¥åˆ©ç”¨ï¼Œåªæ˜¯ä¼ é€’çš„å‚æ•°ä¸åŒã€‚</p>
<p>å¯¹ currentCellChanged() ä¿¡å·ç¼–å†™æ§½å‡½æ•°ï¼Œç”¨äºè·å–å½“å‰å•å…ƒæ ¼çš„æ•°æ®ï¼Œä»¥åŠå½“å‰è¡Œçš„å­¦ç”Ÿçš„å­¦å·ä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_tableInfo_currentCellChanged</span><span class="params">(<span class="type">int</span> currentRow, <span class="type">int</span> currentColumn, <span class="type">int</span> previousRow, <span class="type">int</span> previousColumn)</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//å½“å‰é€‰æ‹©å•å…ƒæ ¼å‘ç”Ÿå˜åŒ–æ—¶çš„å“åº”</span></span><br><span class="line">   <span class="built_in">Q_UNUSED</span>(previousRow);</span><br><span class="line">   <span class="built_in">Q_UNUSED</span>(previousColumn);</span><br><span class="line">    QTableWidgetItem* item=ui-&gt;tableInfo-&gt;<span class="built_in">item</span>(currentRow,currentColumn); <span class="comment">//è·å–å•å…ƒæ ¼çš„ Item</span></span><br><span class="line">    <span class="keyword">if</span>  (item==<span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    labCellIndex-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;å½“å‰å•å…ƒæ ¼åæ ‡ï¼š%d è¡Œï¼Œ%d åˆ—&quot;</span>,currentRow,currentColumn));</span><br><span class="line">    <span class="type">int</span> cellType=item-&gt;<span class="built_in">type</span>();<span class="comment">//è·å–å•å…ƒæ ¼çš„ç±»å‹</span></span><br><span class="line">    labCellType-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;å½“å‰å•å…ƒæ ¼ç±»å‹ï¼š%d&quot;</span>,cellType));</span><br><span class="line">    item=ui-&gt;tableInfo-&gt;<span class="built_in">item</span>(currentRow,MainWindow::colName); <span class="comment">//å–å½“å‰è¡Œç¬¬1åˆ—çš„å•å…ƒæ ¼çš„ item</span></span><br><span class="line">    <span class="type">int</span> ID=item-&gt;<span class="built_in">data</span>(Qt::UserRole).<span class="built_in">toInt</span>();<span class="comment">//ç”¨data()å‡½æ•°æå–è‡ªå®šä¹‰æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºå•å…ƒæ ¼æ—¶å­˜å‚¨çš„å­¦ç”Ÿ ID</span></span><br><span class="line">    labStudID-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;å­¦ç”ŸIDï¼š%d&quot;</span>,ID));<span class="comment">//å­¦ç”ŸID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.3 æ’å…¥ã€æ·»åŠ ã€åˆ é™¤è¡Œ</strong><br>
QTableWidget å¤„ç†è¡Œæ“ä½œçš„å‡½æ•°å¦‚ä¸‹ï¼š</p>
<p>insertRow(int row)ï¼šåœ¨è¡Œå·ä¸ºrowçš„è¡Œå‰é¢æ’å…¥ä¸€è¡Œï¼Œå¦‚æœrowç­‰äºæˆ–å¤§äºæ€»è¡Œæ•°ï¼Œåˆ™åœ¨è¡¨æ ¼æœ€åæ·»åŠ ä¸€è¡Œã€‚insertRow()å‡½æ•°åªæ˜¯æ’å…¥ä¸€ä¸ªç©ºè¡Œï¼Œä¸ä¼šä¸ºå•å…ƒæ ¼åˆ›å»ºQTableWidgetItemå¯¹è±¡ï¼Œéœ€è¦æ‰‹å·¥ä¸ºå•å…ƒæ ¼åˆ›å»ºã€‚<br>
removeRow(int row)ï¼šåˆ é™¤è¡Œå·ä¸º row çš„è¡Œã€‚</p>
<p>ä¸‹é¢æ˜¯ç•Œé¢ä¸Šâ€œæ’å…¥è¡Œâ€ â€œæ·»åŠ è¡Œâ€â€œåˆ é™¤å½“å‰è¡Œâ€æŒ‰é’®çš„å“åº”ä»£ç ã€‚åœ¨æ’å…¥è¡Œä¹‹åï¼Œä¼šè°ƒç”¨ createItemsARow() å‡½æ•°ï¼Œä¸ºæ–°åˆ›å»ºçš„ç©ºè¡Œçš„å„å•å…ƒæ ¼æ„é€  QTableWidgetItem å¯¹è±¡ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_btnInsertRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//æ’å…¥ä¸€è¡Œ</span></span><br><span class="line">    <span class="comment">//int curRow;</span></span><br><span class="line">    <span class="type">int</span> curRow=ui-&gt;tableInfo-&gt;<span class="built_in">currentRow</span>();<span class="comment">//å½“å‰è¡Œå·</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">insertRow</span>(curRow); <span class="comment">//æ’å…¥ä¸€è¡Œï¼Œä½†ä¸ä¼šè‡ªåŠ¨ä¸ºå•å…ƒæ ¼åˆ›å»ºitem</span></span><br><span class="line">    <span class="built_in">createItemsARow</span>(curRow, <span class="string">&quot;æ–°å­¦ç”Ÿ&quot;</span>, <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">          QDate::<span class="built_in">fromString</span>(<span class="string">&quot;1990-1-1&quot;</span>,<span class="string">&quot;yyyy-M-d&quot;</span>),<span class="string">&quot;è‹—æ—&quot;</span>,<span class="literal">true</span>,<span class="number">60</span> ); <span class="comment">//ä¸ºæŸä¸€è¡Œåˆ›å»ºitems</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_btnAppendRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//æ·»åŠ ä¸€è¡Œ</span></span><br><span class="line">    <span class="comment">//int curRow;</span></span><br><span class="line">    <span class="type">int</span> curRow=ui-&gt;tableInfo-&gt;<span class="built_in">rowCount</span>();<span class="comment">//æ€»è¡Œå·</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">insertRow</span>(curRow);<span class="comment">//åœ¨è¡¨æ ¼å°¾éƒ¨æ·»åŠ ä¸€è¡Œ</span></span><br><span class="line">    <span class="built_in">createItemsARow</span>(curRow, <span class="string">&quot;æ–°ç”Ÿ&quot;</span>, <span class="string">&quot;å¥³&quot;</span>,</span><br><span class="line">          QDate::<span class="built_in">fromString</span>(<span class="string">&quot;2000-1-1&quot;</span>,<span class="string">&quot;yyyy-M-d&quot;</span>),<span class="string">&quot;æ»¡æ—&quot;</span>,<span class="literal">false</span>,<span class="number">50</span> ); <span class="comment">//ä¸ºæŸä¸€è¡Œåˆ›å»ºitems</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_btnDelCurRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//åˆ é™¤å½“å‰è¡ŒåŠå…¶items</span></span><br><span class="line">    <span class="comment">//int curRow;</span></span><br><span class="line">    <span class="type">int</span> curRow=ui-&gt;tableInfo-&gt;<span class="built_in">currentRow</span>();<span class="comment">//å½“å‰è¡Œå·</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">removeRow</span>(curRow); <span class="comment">//åˆ é™¤å½“å‰è¡ŒåŠå…¶items</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.4 è‡ªåŠ¨è°ƒæ•´è¡Œé«˜å’Œåˆ—å®½</strong><br>
QTableWidget æœ‰å‡ ä¸ªå‡½æ•°è‡ªåŠ¨è°ƒæ•´è¡¨æ ¼çš„è¡Œé«˜å’Œåˆ—å®½ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">resizeColumnsToContents</span>()ï¼šè‡ªåŠ¨è°ƒæ•´æ‰€æœ‰åˆ—çš„å®½åº¦ï¼Œä»¥é€‚åº”å…¶å†…å®¹ã€‚</span><br><span class="line"><span class="built_in">resizeColumnToContents</span>(<span class="type">int</span> column)ï¼šè‡ªåŠ¨è°ƒæ•´åˆ—å·ä¸º co/www çš„åˆ—çš„å®½åº¦ã€‚</span><br><span class="line"><span class="built_in">resizeRowsToContents</span>()ï¼šè‡ªåŠ¨è°ƒæ•´æ‰€æœ‰è¡Œçš„é«˜åº¦ï¼Œä»¥é€‚åº”å…¶å†…å®¹ã€‚</span><br><span class="line"><span class="built_in">resizeRowToContents</span>(<span class="type">int</span> row)ï¼šè‡ªåŠ¨è°ƒæ•´è¡Œå·ä¸º raw çš„è¡Œçš„é«˜åº¦ã€‚</span><br><span class="line">    </span><br><span class="line">è¿™å‡ ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯ QTableWidget çš„çˆ¶ç±» QTableView çš„å‡½æ•°ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>12.4 å…¶ä»–å±æ€§æ§åˆ¶</strong><br>
è®¾ç½®è¡¨æ ¼å†…å®¹æ˜¯å¦å¯ç¼–è¾‘ï¼šQTableWidget çš„ EditTriggers å±æ€§è¡¨ç¤ºæ˜¯å¦å¯ç¼–è¾‘ï¼Œä»¥åŠè¿›å…¥ç¼–è¾‘çŠ¶æ€çš„æ–¹å¼ã€‚ç•Œé¢ä¸Šçš„&quot;è¡¨æ ¼å¯ç¼–è¾‘&quot;å¤é€‰æ¡†çš„æ§½å‡½æ•°ä»£ç ä¸ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxTabEditable_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//è®¾ç½®ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">if</span> (checked)</span><br><span class="line">        <span class="comment">//åŒå‡»æˆ–è·å–ç„¦ç‚¹åå•å‡»ï¼Œè¿›å…¥ç¼–è¾‘çŠ¶æ€</span></span><br><span class="line">        ui-&gt;tableInfo-&gt;<span class="built_in">setEditTriggers</span>(QAbstractItemView::DoubleClicked | QAbstractItemView::SelectedClicked);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ui-&gt;tableInfo-&gt;<span class="built_in">setEditTriggers</span>(QAbstractItemView::NoEditTriggers); <span class="comment">//ä¸å…è®¸ç¼–è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®è¡Œè¡¨å¤´ã€åˆ—è¡¨å¤´æ˜¯å¦æ˜¾ç¤ºï¼šhorizontalHeader()è·å–è¡Œè¡¨å¤´ï¼ŒverticalHeader()è·å–åˆ—è¡¨å¤´ï¼Œç„¶åå¯è®¾ç½®å…¶å¯è§æ€§ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxHeaderH_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//æ˜¯å¦æ˜¾ç¤ºæ°´å¹³è¡¨å¤´</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setVisible</span>(checked);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxHeaderV_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//æ˜¯å¦æ˜¾ç¤ºå‚ç›´è¡¨å¤´</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">verticalHeader</span>()-&gt;<span class="built_in">setVisible</span>(checked);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é—´éš”è¡Œåº•è‰²ï¼šsetAltematingRowColors() å‡½æ•°å¯ä»¥è®¾ç½®è¡¨æ ¼çš„è¡Œæ˜¯å¦ç”¨äº¤æ›¿åº•è‰²æ˜¾ç¤ºï¼Œè‹¥ä¸ºäº¤æ›¿åº•è‰²ï¼Œåˆ™é—´éš”çš„ä¸€è¡Œä¼šç”¨ç°è‰²ä½œä¸ºåº•è‰²ã€‚å…·ä½“åº•è‰²çš„è®¾ç½®éœ€è¦ç”¨ styleSheetã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxRowColor_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">setAlternatingRowColors</span>(checked);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€‰æ‹©æ¨¡å¼ï¼šsetSelectionBehavior() å‡½æ•°å¯ä»¥è®¾ç½®é€‰æ‹©æ–¹å¼ä¸ºå•å…ƒæ ¼é€‰æ‹©ï¼Œè¿˜æ˜¯è¡Œé€‰æ‹©ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_rBtnSelectItem_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//é€‰æ‹©è¡Œä¸ºï¼šå•å…ƒæ ¼é€‰æ‹©</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">setSelectionBehavior</span>(QAbstractItemView::Selectltems);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_rBtnSelectRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//é€‰æ‹©è¡Œä¸ºï¼šè¡Œé€‰æ‹©</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">setSelectionBehavior</span>(QAbstractItemView::SelectRows);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.6 éå†è¡¨æ ¼è¯»å–æ•°æ®</strong><br>
â€œè¯»å–è¡¨æ ¼å†…å®¹åˆ°æ–‡æœ¬â€æŒ‰é’®æ¼”ç¤ºäº†å°†è¡¨æ ¼æ•°æ®åŒºçš„å†…å®¹å…¨éƒ¨è¯»å‡ºçš„æ–¹æ³•ï¼Œå®ƒå°†æ¯ä¸ªå•å…ƒæ ¼çš„æ–‡å­—è¯»å‡ºï¼ŒåŒä¸€è¡Œçš„å•å…ƒæ ¼çš„æ–‡å­—ç”¨ç©ºæ ¼åˆ†éš”å¼€ï¼Œä½œä¸ºæ–‡æœ¬çš„ä¸€è¡Œï¼Œç„¶åå°†è¿™è¡Œæ–‡å­—ä½œä¸ºæ–‡æœ¬ç¼–è¾‘å™¨çš„ä¸€è¡Œå†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::saveMenuInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;menuInfo.dat&quot;</span>)</span></span>;</span><br><span class="line">	file.<span class="built_in">open</span>(QIODevice::WriteOnly);</span><br><span class="line">	<span class="keyword">if</span> (!file.<span class="built_in">isOpen</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥2&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		QDataStream <span class="built_in">out</span>(&amp;file);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>(); i++)</span><br><span class="line">		&#123;</span><br><span class="line">			QTableWidgetItem* item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">0</span>);</span><br><span class="line">			QString menuName = item-&gt;<span class="built_in">text</span>();</span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">1</span>);</span><br><span class="line">			QString type = item-&gt;<span class="built_in">text</span>();</span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">2</span>);</span><br><span class="line">			<span class="type">double</span> price = item-&gt;<span class="built_in">text</span>().<span class="built_in">toDouble</span>();</span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">3</span>);</span><br><span class="line">			<span class="type">double</span> discount = item-&gt;<span class="built_in">text</span>().<span class="built_in">toDouble</span>();</span><br><span class="line"></span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">4</span>);</span><br><span class="line">			QString imagePath = item-&gt;<span class="built_in">text</span>();</span><br><span class="line"></span><br><span class="line">			out &lt;&lt; menuName &lt;&lt; type &lt;&lt; price &lt;&lt; discount&lt;&lt;imagePath;</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line">		file.<span class="built_in">close</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.7 åœ¨ä¸€ä¸ªqtablewidgetitemä¸­è®¾ç½®å¤é€‰æ¡†</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">QTableWidgetItem* item;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">	item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i,<span class="number">0</span>);</span><br><span class="line">	item-&gt;<span class="built_in">setCheckState</span>(Qt::Unchecked);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å•ä¸€æ§åˆ¶ åˆ©ç”¨QTableWidget::cellchanged()å‡½æ•°åˆ¤æ–­å•å…ƒæ ¼å†…å®¹çš„å˜åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¹é‡åˆ é™¤è¢«é€‰æ‹©çš„è¡Œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::on_deleteBut_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>(); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i,<span class="number">0</span>)-&gt;<span class="built_in">checkState</span>() == Qt::Checked)</span><br><span class="line">			ui-&gt;menuTable-&gt;<span class="built_in">removeRow</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¢é¤ç¨‹åºæ¶‰åŠçŸ¥è¯†</title>
    <url>/2024/05/16/%E8%AE%A2%E9%A4%90%E7%A8%8B%E5%BA%8F%E6%B6%89%E5%8F%8A%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<blockquote>
<p>è®°å½•äº†ä¸€ä¸‹é¡¹ç›®åˆ¶ä½œè¿‡ç¨‹ä¸­ æ‰€æ¶‰åŠçš„ä¸ç†Ÿæ‚‰çš„éƒ¨åˆ†æºç å¯è‡³GitHubæŸ¥çœ‹</p>
</blockquote>
<span id="more"></span>
<h1>ç›¸å…³çŸ¥è¯†</h1>
<h3 id="1-ctime-å¤´æ–‡ä»¶"><strong>1. ctime å¤´æ–‡ä»¶</strong></h3>
<p><strong>1.1</strong>  <code>time_t time(time_t *timer)</code>: è¿”å›è‡ªçºªå…ƒä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">time_t</span> currentTime;</span><br><span class="line"><span class="built_in">time</span>(&amp; currentTime);</span><br></pre></td></tr></table></figure>
<p><strong>1.2 <code>struct tm *localtime(const time_t *timer)</code>: å°† <code>time_t</code> æ ¼å¼çš„æ—¶é—´è½¬æ¢ä¸ºæœ¬åœ°æ—¶é—´ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘ <code>tm</code> ç»“æ„ä½“çš„æŒ‡é’ˆ</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">time_t</span> currTime;</span><br><span class="line"><span class="built_in">time</span>(&amp;currTime);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">tm</span>* timeTmp = <span class="built_in">locatime</span>(&amp;currTime);</span><br></pre></td></tr></table></figure>
<p><strong>1.3 <code>char *asctime(const struct tm *timeptr)</code>: å°† <code>tm</code> ç»“æ„ä½“è¡¨ç¤ºçš„æ—¶é—´è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼çš„æ—¶é—´ï¼Œå¹¶è¿”å›æŒ‡å‘é™æ€å­—ç¬¦ä¸²çš„æŒ‡é’ˆ</strong></p>
 <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">time_t</span> currTime;</span><br><span class="line"><span class="built_in">time</span>(&amp;currTime);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">tm</span>* timeTmp = <span class="built_in">locatime</span>(&amp;currTime);</span><br><span class="line"><span class="type">char</span> *timeString = <span class="built_in">asctime</span>(&amp;timeTmp);</span><br></pre></td></tr></table></figure>
<p><strong>1.4 tmç»“æ„ä½“(åŒ…å«åœ¨ctimeå¤´æ–‡ä»¶ä¸­)</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">tm</span> &#123;</span><br><span class="line">    <span class="type">int</span> tm_sec;   <span class="comment">// ç§’ï¼ˆ0-59ï¼‰</span></span><br><span class="line">    <span class="type">int</span> tm_min;   <span class="comment">// åˆ†é’Ÿï¼ˆ0-59ï¼‰</span></span><br><span class="line">    <span class="type">int</span> tm_hour;  <span class="comment">// å°æ—¶ï¼ˆ0-23ï¼‰</span></span><br><span class="line">    <span class="type">int</span> tm_mday;  <span class="comment">// ä¸€ä¸ªæœˆä¸­çš„æ—¥æœŸï¼ˆ1-31ï¼‰</span></span><br><span class="line">    <span class="type">int</span> tm_mon;   <span class="comment">// æœˆä»½ï¼ˆ0-11ï¼‰</span></span><br><span class="line">    <span class="type">int</span> tm_year;  <span class="comment">// å¹´ä»½è‡ª1900å¹´èµ·</span></span><br><span class="line">    <span class="type">int</span> tm_wday;  <span class="comment">// ä¸€å‘¨ä¸­çš„å¤©æ•°ï¼ˆ0-6ï¼Œæ˜ŸæœŸæ—¥ä¸º0ï¼‰</span></span><br><span class="line">    <span class="type">int</span> tm_yday;  <span class="comment">// ä¸€å¹´ä¸­çš„å¤©æ•°ï¼ˆ0-365ï¼Œ1æœˆ1æ—¥ä¸º0ï¼‰</span></span><br><span class="line">    <span class="type">int</span> tm_isdst; <span class="comment">// å¤ä»¤æ—¶æ ‡å¿—ï¼ˆ&gt;0 è¡¨ç¤ºæ˜¯å¤ä»¤æ—¶ï¼Œ0 è¡¨ç¤ºä¸æ˜¯å¤ä»¤æ—¶ï¼Œ-1 è¡¨ç¤ºå¤ä»¤æ—¶ä¿¡æ¯ä¸å¯ç”¨ï¼‰</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>1.5 ä½¿ç”¨</strong></p>
<blockquote>
<p>å…ˆä½¿ç”¨time()å‡½æ•°è·å–è‡ª1970å¹´1æœˆ1æ—¥åˆå¤œï¼ˆæ ¼æ—å¨æ²»æ—¶é—´ï¼‰èµ·ç®—çš„ç§’æ•°ï¼Œç„¶åä½¿ç”¨localtime()å‡½æ•°å°†å…¶è½¬åŒ–ä¸ºæœ¬åœ°æ—¶é—´ (ä½¿ç”¨tmç»“æ„ä½“å­˜å‚¨)ï¼Œæœ€åæ ¹æ®éœ€è¦è¿›è¡Œæ‰“å°</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">time_t</span> now;</span><br><span class="line">    <span class="built_in">time</span>(&amp;now);</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">tm</span>* lt = <span class="built_in">localtime</span>(&amp;now);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Local time is: &quot;</span> &lt;&lt; lt-&gt;tm_year + <span class="number">1900</span> &lt;&lt; <span class="string">&quot;-&quot;</span> &lt;&lt; lt-&gt;tm_mon + <span class="number">1</span> &lt;&lt; <span class="string">&quot;-&quot;</span> &lt;&lt; lt-&gt;tm_mday &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; lt-&gt;tm_hour &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; lt-&gt;tm_min &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; lt-&gt;tm_sec &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span>* timeStr = <span class="built_in">asctime</span>(lt);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Formatted time is: &quot;</span> &lt;&lt; timeStr &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> buffer[<span class="number">255</span>];</span><br><span class="line">    <span class="built_in">strftime</span>(buffer, <span class="number">255</span>, <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, lt);</span><br><span class="line">    <span class="comment">//sprintf(buffer,&quot;%04d-%02d-%02d %02d:%02d:%02d&quot;, lt-&gt;tm_year + 1900, lt-&gt;tm_mon + 1, lt-&gt;tm_mday, lt-&gt;tm_hour,lt-&gt;tm_min,lt-&gt;tm_sec);</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Formatted time is: &quot;</span> &lt;&lt; buffer &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">----------è¾“å‡ºç»“æœ-----------------</span><br><span class="line">Local time is: <span class="number">2024</span><span class="number">-4</span><span class="number">-28</span> <span class="number">17</span>:<span class="number">15</span>:<span class="number">42</span></span><br><span class="line">Formatted time is: Sun Apr <span class="number">28</span> <span class="number">17</span>:<span class="number">15</span>:<span class="number">42</span> <span class="number">2024</span></span><br><span class="line">Formatted time is: <span class="number">2024</span><span class="number">-04</span><span class="number">-28</span> <span class="number">17</span>:<span class="number">15</span>:<span class="number">42</span></span><br></pre></td></tr></table></figure>
<h3 id="2-CMakeç®€å•ä½¿ç”¨"><strong>2. CMakeç®€å•ä½¿ç”¨</strong></h3>
<p><strong>2.1 åˆ›å»ºä¸€ä¸ªCMakeLists.txtæ–‡ä»¶</strong></p>
<p><strong>2.2 åˆ›å»ºä¸€ä¸ªåä¸ºbuildçš„æ–‡ä»¶å¤¹</strong></p>
<blockquote>
<p>é¿å…ç¼–è¯‘äº§ç‰©ä¸ä»£ç æ–‡ä»¶æ··åœ¨ä¸€èµ·</p>
</blockquote>
<p><strong>2.3 åœ¨CMakeLists.txtä¸­å†™å…¥å†…å®¹</strong></p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® CMake çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰é¡¹ç›®åç§°</span></span><br><span class="line"><span class="keyword">project</span>(dinnerSystem)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶æŒ‡å®šæºæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># äº¦å¯å†™æˆ  add_executable($&#123;PROJECT_NAME&#125;)</span></span><br><span class="line"><span class="keyword">add_executable</span>(dinnerSystem)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨fileå‡½æ•° globbing åŒ¹é…æ¥è·å–æ‰€æœ‰çš„ .cpp å’Œ .h æ–‡ä»¶,å¹¶å°†æ–‡ä»¶ä¿å­˜åœ¨sourceså˜é‡ä¸­</span></span><br><span class="line"><span class="keyword">file</span>(GLOB sources CONFIGURE_DEPENDS *.cpp *.h)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è·å–çš„æºæ–‡ä»¶ä¸ç›®æ ‡æ–‡ä»¶ç›¸å…³è”</span></span><br><span class="line"><span class="comment">#target_sources($&#123;PROJECT_NAME&#125; PBULIC $&#123;sources&#125;)</span></span><br><span class="line"><span class="keyword">target_sources</span>(dinnerSystem PUBLIC <span class="variable">$&#123;sources&#125;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>2.4 åœ¨buildæ–‡ä»¶å¤¹ä¸­æ‰“å¼€cmd</strong></p>
<p>è¾“å…¥<code>cmake ..</code></p>
<p><code>cmake --build .</code></p>
<h3 id="3-è§£å†³ä¸­æ–‡ä¹±ç ">3. è§£å†³ä¸­æ–‡ä¹±ç </h3>
<p>ä½¿ç”¨UTF-8 æ— BOM  å¯ä»¥åœ¨VS2022ä¸‹è½½æ’ä»¶Force UTF-8(No BOM)</p>
<h3 id="4-Qtçš„åŸºç¡€ä½¿ç”¨">4.Qtçš„åŸºç¡€ä½¿ç”¨</h3>
<p>è§å¦ä¸€ç¯‡ç¬”è®°</p>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>C++åŸºç¡€</title>
    <url>/2024/04/27/C-%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<blockquote>
<p>C++ ä¸€äº›åŸºç¡€çŸ¥è¯†</p>
</blockquote>
<span id="more"></span>
<h1>C++ åŸºç¡€</h1>
<h3 id="0-å‰ç½®çŸ¥è¯†">0. å‰ç½®çŸ¥è¯†</h3>
<h4 id="0-1-å·¦-å³å€¼">0.1 å·¦/å³å€¼</h4>
<blockquote>
<ul class="lvl-1">
<li class="lvl-2">
<p><mark>å·¦å€¼</mark>:åœ¨å†…å­˜ä¸­æœ‰æ˜ç¡®å­˜å‚¨ä½ç½®(å³åœ°å€)çš„è¡¨è¾¾å¼ï¼Œé€šå¸¸å‡ºç°åœ¨èµ‹å€¼è¡¨è¾¾å¼çš„å·¦ä¾§ã€‚ å·¦å€¼å¯ä»¥å–åœ°å€</p>
</li>
<li class="lvl-2">
<p><mark>å³å€¼</mark>ï¼šé€šå¸¸æŒ‡ä¸´æ—¶çš„æ•°æ®å€¼(å¦‚å­—é¢é‡)ï¼Œåœ¨å†…å­˜ä¸­æ²¡æœ‰å›ºå®šçš„åœ°å€ï¼Œå®ƒ<strong>ä¸èƒ½è¢«èµ‹å€¼</strong></p>
</li>
</ul>
</blockquote>
<h4 id="0-2-å•ä½">0.2 å•ä½</h4>
<blockquote>
<ul class="lvl-1">
<li class="lvl-2">
<p><mark>bit</mark>:<strong>æ¯”ç‰¹</strong>ï¼Œåˆç§°<strong>ä½</strong>ï¼Œè®¡ç®—æœºå†…éƒ¨å‚¨å­˜æ•°æ®çš„æœ€å°å•ä½</p>
</li>
<li class="lvl-2">
<p><mark>Byte</mark>:<strong>å­—èŠ‚</strong>ï¼Œç”±<strong>8ä¸ªæ¯”ç‰¹</strong>ç»„æˆï¼Œä¹ æƒ¯ä¸Šä»¥å¤§å†™<strong>B</strong>æ¥è¡¨ç¤ºï¼Œé€šå¸¸1ä¸ªå­—èŠ‚å¯ä»¥å­˜å…¥ä¸€ä¸ªASCIIç ï¼Œ2ä¸ªå­—èŠ‚å¯ä»¥å­˜æ”¾ä¸€ä¸ªæ±‰å­—å›½æ ‡ç ã€‚<strong>è¿™æ˜¯å†…å­˜å¯»å€çš„æœ€å°å•å…ƒ</strong></p>
</li>
<li class="lvl-2">
<p><mark>word</mark>:<strong>å­—</strong>ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ç»„æˆï¼Œè®¡ç®—æœºçš„å­—é•¿å†³å®šäº†å…¶CPUä¸€æ¬¡æ“ä½œå®é™…å¤„ç†çš„<strong>ä½æ•°</strong>æ˜¯å¤šå°‘ï¼Œä¾‹å¦‚64ä½è®¡ç®—æœºçš„CPUä¸€æ¬¡æœ€å¤šèƒ½å¤„ç†64ä½æ•°æ®</p>
</li>
</ul>
</blockquote>
<h4 id="0-3-å†…å­˜">0.3 å†…å­˜</h4>
<blockquote>
<p>å†…å­˜å°±æ˜¯è®¡ç®—æœºçš„å­˜å‚¨ç©ºé—´ï¼Œç”¨æ¥å­˜å‚¨ç¨‹åºçš„æŒ‡ä»¤ï¼Œæ•°æ®å’ŒçŠ¶æ€</p>
</blockquote>
<h5 id="0-3-1-å†…å­˜å››åŒº">0.3.1 å†…å­˜å››åŒº</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p><mark>ä»£ç åŒº(code/text)</mark>:å­˜æ”¾CPUæ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ã€‚é€šå¸¸ä»£ç åŒºæ˜¯å¯å…±äº«çš„ï¼Œå³å¦å¤–çš„ç¨‹åºå¯ä»¥è°ƒç”¨å®ƒã€‚ç¼–å†™çš„æ‰€æœ‰ä»£ç éƒ½ä¼šæ”¾è¿›ä»£ç åŒºï¼Œå…¶ç‰¹ç‚¹æ˜¯<strong>å…±äº«å’Œåªè¯»</strong></p>
</li>
<li class="lvl-2">
<p><mark>å…¨å±€åŒº/é™æ€åŒº(stactic)</mark>ï¼šç”¨æ¥å­˜æ”¾å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡ï¼Œå¸¸é‡</p>
<ul class="lvl-2">
<li class="lvl-4">dataåŒºï¼šå­˜æ”¾å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡å’Œå¸¸é‡</li>
<li class="lvl-4">bssåŒºï¼šå­˜æ”¾åˆå§‹åŒ–ä¸º0æˆ–è€…NULLæˆ–æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡å’Œå¸¸é‡ã€‚æœªåˆå§‹åŒ–çš„åœ¨ç¨‹åºæ‰§è¡Œå‰ä¼šè‡ªåŠ¨è¢«ç³»ç»Ÿåˆå§‹åŒ–ä¸º0æˆ–è€…NULL</li>
<li class="lvl-4">å¸¸é‡åŒºï¼šé¡¾åæ€ä¹‰ï¼Œå­˜æ”¾å¸¸é‡ï¼Œå¦‚constä¿®é¥°çš„<strong>å…¨å±€å˜é‡</strong>ï¼Œå­—ç¬¦ä¸²å¸¸é‡</li>
</ul>
</li>
<li class="lvl-2">
<p><mark>æ ˆ(stack)</mark>:æ˜¯ä¸€ç§å…ˆè¿›åå‡ºçš„å†…å­˜ç»“æ„ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…</p>
<ul class="lvl-2">
<li class="lvl-4">
<p>ç»“æ„ä½“å’Œç±»çš„å¯¹è±¡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯åˆ†é…åœ¨æ ˆåŒº</p>
</li>
<li class="lvl-4">
<p>å­˜æ”¾<strong>å‡½æ•°çš„å‚æ•°å€¼ï¼Œè¿”å›å€¼ï¼Œå±€éƒ¨å˜é‡</strong>ç­‰ï¼Œç”±constå®šä¹‰çš„å±€éƒ¨å˜é‡ä¹Ÿå­˜å‚¨åœ¨æ ˆé‡Œã€‚</p>
</li>
<li class="lvl-4">
<p>å†…å­˜åœ°å€<strong>ç”±é«˜åˆ°ä½</strong>æ–¹å‘ç”Ÿé•¿ï¼Œå…¶æœ€å¤§å¤§å°ç”±ç¼–è¯‘æ—¶ç¡®å®šï¼Œé€Ÿåº¦å¿«ä½†è‡ªç”±æ€§å·®ï¼Œæœ€å¤§ç©ºé—´æ¯”å †å°</p>
</li>
</ul>
</li>
<li class="lvl-2">
<p><mark>å †(heap)</mark>:ç”¨äºåŠ¨æ€å†…å­˜åˆ†é…</p>
<ul class="lvl-2">
<li class="lvl-4">å†…å­˜åœ°å€<strong>ç”±ä½åˆ°é«˜</strong>æ–¹å‘ç”Ÿé•¿ï¼Œå…¶å¤§å°ç”±ç³»ç»Ÿå†…å­˜/è™šæ‹Ÿå†…å­˜ä¸Šé™å†³å®šï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼Œä½†è‡ªç”±æ€§å¤§ï¼Œå¯ç”¨ç©ºé—´å¤§</li>
<li class="lvl-4">æ³¨æ„è¿›è¡Œå†…å­˜é‡Šæ”¾ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æ³„éœ²</li>
</ul>
</li>
</ul>
<img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/8b2d920e3dd09f80d85824f19bd5f2e.jpg" alt="8b2d920e3dd09f80d85824f19bd5f2e" style="zoom: %;" />
<h5 id="0-3-2-å†…å­˜ç¼–å€">0.3.2 å†…å­˜ç¼–å€</h5>
<p>å³ç»™è®¡ç®—æœºçš„å­˜å‚¨å•å…ƒè¿›è¡Œç¼–å·ï¼Œè€Œåœ¨CSä¸­å­˜å‚¨å•å…ƒé€šå¸¸æ˜¯æŒ‡æœ€å°çš„å¯å¯»å€å•å…ƒå³byteï¼Œä¹Ÿå°±æ˜¯ç»™æ¯ä¸ªbyteä¸€ä¸ªç¼–å·ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯å†…å­˜çš„<strong>åœ°å€</strong></p>
<img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240408194601136.png" alt="image-20240408194601136" style="zoom: 40%;" />
<h5 id="0-3-3-å†…å­˜åœ°å€ç©ºé—´">0.3.3 å†…å­˜åœ°å€ç©ºé—´</h5>
<blockquote>
<p>å°†æ‰€æœ‰byteçš„ç¼–å·è¿èµ·æ¥å°±å«ä½œå†…å­˜çš„åœ°å€ç©ºé—´ï¼Œè€Œåœ°å€ç©ºé—´(å¯å¯»å€å†…å­˜)çš„å¤§å°ä¸ç”µè„‘æ˜¯32ä½è¿˜æ˜¯34ä½æœ‰å…³</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>32 ä½æ„å‘³ç€å¯å¯»å€çš„å†…å­˜èŒƒå›´æ˜¯ <code>2^32 byte = 4GB</code></p>
</li>
<li class="lvl-2">
<p>64ä½å³ <code>2^64 byte</code></p>
</li>
</ul>
<h4 id="0-4-åŸç -åç -è¡¥ç ">0.4 åŸç  åç  è¡¥ç </h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>åç   åŸç æŒ‰ä½å–å  æ­£æ•°çš„åç æ˜¯å…¶æœ¬èº«</p>
</li>
<li class="lvl-2">
<p>è¡¥ç   åŸç æŒ‰ä½å–ååŠ ä¸€    æ­£æ•°çš„è¡¥ç æ˜¯å…¶æœ¬èº«</p>
</li>
<li class="lvl-2">
<p><mark>è®¡ç®—æœºä¸­ä½¿ç”¨è¡¥ç æ¥è¡¨ç¤ºå’Œæ“ä½œæ•´æ•°</mark></p>
</li>
<li class="lvl-2">
<p>ä¸ªäººè§‰å¾—åç å’Œè¡¥ç çš„å¼•å…¥ æ˜¯ä¸ºäº†ä¾¿äºç†è§£åœ¨è®¡ç®—æœºä¸­å¦‚ä½•ä½¿ç”¨ <strong>æ­£æ•°æ¥è¡¨ç¤ºè´Ÿæ•°</strong></p>
</li>
</ul>
<blockquote>
<p>å¦‚ int åœ¨å†…å­˜ä¸­å æ®4ä¸ªå­—èŠ‚ è¡¨ç¤ºæœ‰ç¬¦å·çš„æ•´æ•° ä»–çš„èŒƒå›´æ˜¯ [-2^31 , 2^31 - 1]</p>
<p>unsigned int åœ¨å†…å­˜ä¸­å æ®å››ä¸ªå­—èŠ‚ è¡¨ç¤ºæ— ç¬¦å·æ•´æ•° ä»–çš„èŒƒå›´æ˜¯[0,2^32-1]</p>
<p>è€Œ32ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºçš„èŒƒå›´æ˜¯[0,2^32-1]ï¼Œå³æŠŠå®ƒä»ä¸­é—´åˆ†ä¸€åŠï¼Œ<strong>å°† 0 å¼€å¤´çš„32ä½äºŒè¿›åˆ¶æ•°ç”¨æ¥è¡¨ç¤ºæ­£æ•°ï¼Œå°† 1 å¼€å¤´çš„ç”¨æ¥è¡¨ç¤ºè´Ÿæ•°</strong>ï¼Œæ‰€ä»¥intè¡¨ç¤ºçš„æ­£æ•°çš„èŒƒå›´æ˜¯unsigned int çš„ä¸€åŠ ä½†äºŒè€…è¡¨ç¤ºçš„æ€»æ•°æ˜¯ä¸€æ ·çš„</p>
</blockquote>
<h4 id="0-5-è¿›åˆ¶è½¬æ¢">0.5 è¿›åˆ¶è½¬æ¢</h4>
<blockquote>
<p><strong>åè¿›åˆ¶ï¼š éƒ½æ˜¯ä»¥0-9è¿™ä¹ä¸ªæ•°å­—ç»„æˆï¼Œä¸èƒ½ä»¥0å¼€å¤´ã€‚</strong></p>
<p><strong>äºŒè¿›åˆ¶ï¼š ç”±0å’Œ1ä¸¤ä¸ªæ•°å­—ç»„æˆã€‚</strong></p>
<p><strong>å…«è¿›åˆ¶ï¼š ç”±0-7æ•°å­—ç»„æˆï¼Œä¸ºäº†åŒºåˆ†ä¸å…¶ä»–è¿›åˆ¶çš„æ•°å­—åŒºåˆ«ï¼Œå¼€å¤´éƒ½æ˜¯ä»¥0å¼€å§‹ã€‚</strong></p>
<p><strong>åå…­è¿›åˆ¶ï¼šç”±0-9å’ŒA-Fç»„æˆã€‚ä¸ºäº†åŒºåˆ†äºå…¶ä»–æ•°å­—çš„åŒºåˆ«ï¼Œå¼€å¤´éƒ½æ˜¯ä»¥0xå¼€å§‹ã€‚</strong></p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ•´æ•°éƒ¨åˆ†</p>
<p>åè¿›åˆ¶è½¬nè¿›åˆ¶ï¼šåè¿›åˆ¶æ•°é™¤ä»¥2ï¼Œåå‘å–ä½™æ•°ï¼Œç›´åˆ°å•†ä¸º0ç»ˆæ­¢</p>
<img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240408204846887.png" alt="image-20240408204846887" style="zoom: 25%;" />
<p>nè¿›åˆ¶è½¬åè¿›åˆ¶ï¼šå°†æ¯ä¸€ä½ä¹˜ä»¥ç›¸åº”çš„æƒå€¼ï¼Œç„¶åå°†ä¹˜ç§¯ç›¸åŠ </p>
</li>
<li class="lvl-2">
<p>å°æ•°éƒ¨åˆ†</p>
</li>
</ul>
<p>â€‹	åè¿›åˆ¶è½¬nè¿›åˆ¶: ä¹˜nå–æ•´ï¼Œé¡ºåºè¾“å‡º</p>
<p>â€‹	nè¿›åˆ¶è½¬åè¿›åˆ¶ï¼šå¦‚ä¸Š</p>
<h3 id="1-å˜é‡">1.å˜é‡</h3>
<blockquote>
<p>å˜é‡åæ˜¯å˜é‡åœ°å€çš„ç¬¦å·åŒ–ä½“ç°</p>
</blockquote>
<h4 id="1-1-å˜é‡ç±»å‹">1.1 å˜é‡ç±»å‹</h4>
<h5 id="1-1-1-ä½œç”¨ï¼š">1.1.1 ä½œç”¨ï¼š</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>å†…å­˜åˆ†é…ï¼šå‘Šè¯‰ç¼–è¯‘å™¨è¯¥å˜é‡å æ®çš„å†…å­˜å¤§å°ï¼Œå äº†å¤šå°‘ä¸ªå­—èŠ‚</p>
</li>
<li class="lvl-2">
<p>æ“ä½œé™åˆ¶ï¼šè§„å®šäº†è¯¥å˜é‡å¯ä»¥æ‰§è¡Œçš„æ“ä½œ</p>
</li>
<li class="lvl-2">
<p><mark>æ•°æ®è§£é‡Š</mark>ï¼šå†³å®šäº†å¦‚ä½•è§£é‡Šå­˜å‚¨åœ¨å†…å­˜ä¸­çš„<mark>ä½æ¨¡å¼</mark>ï¼Œå†³å®šäº†ç¼–è¯‘å™¨å¦‚ä½•è§£è¯»å¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®</p>
</li>
</ul>
<blockquote>
<p><strong>ä½æ¨¡å¼</strong>æ˜¯æŒ‡ä¸€ç³»åˆ—çš„0å’Œ1ï¼Œæ˜¯è®¡ç®—æœºå†…å­˜ä¸­æ•°æ®æœ€åŸºæœ¬çš„å½¢å¼ï¼Œæ‰€æœ‰æ•°æ®æœ€ç»ˆéƒ½ä¼šè¢«è¡¨ç¤ºä¸º ä½æ¨¡å¼</p>
</blockquote>
<h5 id="1-1-2-ç§ç±»">1.1.2 ç§ç±»</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>åŸºç¡€ç±»å‹ ï¼šæ•´æ•° å­—ç¬¦ å¸ƒå°” æµ®ç‚¹</p>
</li>
<li class="lvl-2">
<p>ä¿®é¥°ç¬¦ï¼šlong short signed unsigned</p>
</li>
<li class="lvl-2">
<p>ç±»ç±»å‹ï¼šclass</p>
</li>
<li class="lvl-2">
<p>ç»“æ„ä½“ç±»å‹ï¼šstruct</p>
</li>
<li class="lvl-2">
<p>æ•°ç»„ç±»å‹</p>
</li>
<li class="lvl-2">
<p>æŒ‡é’ˆç±»å‹</p>
</li>
<li class="lvl-2">
<p>å¼•ç”¨ç±»å‹</p>
</li>
<li class="lvl-2">
<p>å¤æ•°ç±»å‹(complex  C++11åŠä»¥ä¸Š)</p>
</li>
<li class="lvl-2">
<p>è”åˆä½“ unio</p>
</li>
<li class="lvl-2">
<p>æšä¸¾ä½“ enum</p>
</li>
</ul>
<h3 id="2-å†…å­˜å¯¹é½">2. å†…å­˜å¯¹é½</h3>
<blockquote>
<p>ä¸ºäº†æé«˜æ•°æ®è®¿é—®çš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œå°†æ•°æ®å­˜å‚¨åœ¨é€‚å½“çš„å†…å­˜åœ°å€ä¸Šï¼Œä»¥å‡å°‘é¢å¤–å¼€é”€   <strong>ä»¥ç©ºé—´æ¢æ—¶é—´</strong></p>
<p>å¯¹é½çš„é•¿åº¦ä¸€èˆ¬ä¸º2çš„næ¬¡å¹‚(1ï¼Œ2 ï¼Œ4ï¼Œ8)</p>
</blockquote>
<h5 id="2-1-äº§ç”ŸåŸå› ">2.1 äº§ç”ŸåŸå› </h5>
<p>ä¸ºäº†é€‚åº”CPUè¯»å–æ•°æ®çš„è¡Œä¸ºï¼ŒCPUä¸€æ¬¡è¯»å–4ä¸ªå­—èŠ‚æˆ–8ä¸ªå­—èŠ‚ï¼Œç”±ç¼–è¯‘å™¨å’Œæ“ä½œç³»ç»Ÿ(32ä½æˆ–64ä½)å†³å®š</p>
<h5 id="2-2-æ›´æ”¹å¯¹é½è§„åˆ™">2.2 æ›´æ”¹å¯¹é½è§„åˆ™</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>ä½¿ç”¨ç¼–è¯‘å™¨æŒ‡ä»¤<code>ï¼ˆå¦‚ #pragma packï¼‰</code>æ›´æ”¹é»˜è®¤çš„å¯¹é½è§„åˆ™ã€‚è¿™ä¸ªå‘½ä»¤æ˜¯å…¨å±€ç”Ÿæ•ˆçš„ã€‚è¿™å¯ä»¥ç”¨äºå‡å°æ•°æ®ç»“æ„çš„å¤§å°ï¼Œä½†å¯èƒ½ä¼šé™ä½è®¿é—®æ€§èƒ½ã€‚</p>
</li>
<li class="lvl-2">
<p>åœ¨ C++11 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ alignas å…³é”®å­—ä¸ºæ•°æ®ç»“æ„æˆ–å˜é‡æŒ‡å®šå¯¹é½è¦æ±‚ã€‚è¿™ä¸ªå‘½ä»¤æ˜¯å¯¹æŸä¸ªç±»å‹æˆ–è€…å¯¹è±¡ç”Ÿæ•ˆçš„ã€‚ä¾‹å¦‚ï¼Œ<code>alignas(16) int x</code>; å°†ç¡®ä¿ x çš„åœ°å€æ˜¯ 16 çš„å€æ•°ã€‚</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> pack(push, 16) <span class="comment">//å°†å½“å‰å¯¹é½å€¼æ¨é€åˆ°å †æ ˆä¸Šï¼Œå¹¶å°†å¯¹é½å€¼è®¾ç½®ä¸º16å­—èŠ‚</span></span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MyStruct</span> &#123;</span><br><span class="line">    <span class="type">char</span> a;</span><br><span class="line">    <span class="type">int</span> b;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> pack(pop)  <span class="comment">//ä»å †æ ˆä¸­å¼¹å‡ºå¯¹é½å€¼ï¼Œæ¢å¤ä¹‹å‰çš„å¯¹é½å€¼</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="2-3-ç»“æ„ä½“å¯¹é½">2.3 ç»“æ„ä½“å¯¹é½</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>æœ€å¤§æˆå‘˜å¯¹é½ï¼šç¼–è¯‘å™¨ä¼šå°†æ•°æ®æˆå‘˜è¡¥é½ä¸ºæœ€å¤§æˆå‘˜å¤§å°çš„æ•´æ•°å€</p>
<p>å¦‚æœç»“æ„ä½“ä¸­å«æœ‰æ•°ç»„æˆå‘˜ï¼Œå¦‚ char a[5]ï¼Œå®ƒçš„å¯¹é½æ–¹å¼<strong>å’Œè¿ç»­å†™ 5 ä¸ª char ç±»å‹å˜é‡æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒè¿˜æ˜¯æŒ‰ä¸€ä¸ªå­—èŠ‚å¯¹é½</strong></p>
</li>
<li class="lvl-2">
<p>å¡«å……å­—èŠ‚(struct padding)ï¼šå¦‚æœæŸæˆå‘˜å¤§å°æ»¡è¶³å¯¹é½è¦æ±‚ï¼Œç¼–è¯‘å™¨ä¼šæ’å…¥ä¸€äº›å­—èŠ‚è¿›è¡Œå¡«å……</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">stu1</span> &#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">18</span>];  <span class="comment">//å°±æœ¬èº«è€Œè¨€å æ®18ä¸ªå­—èŠ‚   å®é™…å æ®24ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="type">double</span> b;    <span class="comment">//å æ®8ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="type">char</span> c;      <span class="comment">//å®é™…å æ®4ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="type">int</span> d;       <span class="comment">//å®é™…å æ®4ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="type">short</span> e;     <span class="comment">//å®é™…å æ®8ä¸ªå­—èŠ‚</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    stu1 s1;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">sizeof</span>(s1)&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">---------------</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line"><span class="built_in">sizeof</span>(s1)=<span class="number">48</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240416205302797.png" alt="image-20240416205302797"></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">stu2</span> &#123;</span><br><span class="line">    <span class="type">char</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">    <span class="type">double</span> z;</span><br><span class="line">    <span class="type">char</span> v[<span class="number">6</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">stu1</span> &#123;</span><br><span class="line">    <span class="type">char</span> a;         <span class="comment">//å®é™…å æ®8ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">stu2</span> b; <span class="comment">// è¯¥ç»“æ„ä½“ä¸­æœ€å¤§çš„æˆå‘˜å æ®8ä¸ªå­—èŠ‚ï¼Œå®é™…å æ®24ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="type">int</span> c;         <span class="comment">//å®é™…å æ®8ä¸ªå­—èŠ‚</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    stu1 s1;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">sizeof</span>(s1)&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line"><span class="built_in">sizeof</span>(s1)=<span class="number">40</span></span><br></pre></td></tr></table></figure>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240416210502232.png" alt="image-20240416210502232"></p>
<h5 id="2-4-ç±»çš„å†…å­˜å¯¹é½">2.4 ç±»çš„å†…å­˜å¯¹é½</h5>
<h6 id="2-4-1-ç©ºç±»çš„å¤§å°">2.4.1 ç©ºç±»çš„å¤§å°</h6>
<blockquote>
<p>ç©ºç±»å’Œç©ºç»“æ„ä½“çš„<strong>å®ä¾‹åŒ–å¯¹è±¡çš„</strong>å¤§å°éƒ½ä¸º1</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    demo a;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(a)&lt;&lt;endl;  <span class="comment">// è¾“å‡ºç»“æœä¸º1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="2-4-2-æ·»åŠ æˆå‘˜å‡½æ•°ï¼Œé™æ€æ•°æ®æˆå‘˜ï¼Œé™æ€æˆå‘˜å‡½æ•°">2.4.2 æ·»åŠ æˆå‘˜å‡½æ•°ï¼Œé™æ€æ•°æ®æˆå‘˜ï¼Œé™æ€æˆå‘˜å‡½æ•°</h6>
<blockquote>
<p>ç»“æœä¾æ—§ä¸º1</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">demo</span>() &#123;&#125;</span><br><span class="line">    ~<span class="built_in">demo</span>() &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;hello world!&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">sharedFunc</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;hello this is a shared xxx&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> a;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> demo::a = <span class="number">1024</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    demo x;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(x) &lt;&lt; endl;  <span class="comment">// è¾“å‡ºç»“æœä¸º1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæˆå‘˜å‡½æ•°ï¼Œé™æ€æˆå‘˜å‡½æ•°å­˜å‚¨åœ¨<strong>ä»£ç æ®µ</strong>ï¼ˆ.textï¼‰ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡å­˜å‚¨åœ¨<strong>å…¨å±€/é™æ€åŒº</strong>(static)ï¼Œä»–ä»¬ä¸å ç”¨ç±»çš„å†…å­˜ï¼Œä¸æ˜¯æ¯ä¸ªå¯¹è±¡åˆ†åˆ«å­˜å‚¨</p>
<h6 id="2-4-3-ç±»å¯¹è±¡å¤§å°çš„å½±å“å› ç´ ">2.4.3 ç±»å¯¹è±¡å¤§å°çš„å½±å“å› ç´ </h6>
<blockquote>
<p><mark>éé™æ€æˆå‘˜å˜é‡</mark>å’Œ<mark>è™šå‡½æ•°</mark></p>
<p>è€ƒè™‘æ˜¯å¦å­˜åœ¨vptrï¼Œè‹¥å­˜åœ¨åˆ™è®¡å…¥è€ƒè™‘èŒƒå›´ï¼Œæ•´ä½“ä¸Šä¸ç»“æ„ä½“ç›¸åŒ</p>
</blockquote>
<h3 id="3-ç±»çš„å¤šæ€">3.ç±»çš„å¤šæ€</h3>
<blockquote>
<p>å…è®¸ä½¿ç”¨ä¸€ä¸ªæ¥å£æ¥è¡¨ç¤ºä¸åŒçš„ç±»ï¼Œè€Œè¿™äº›ç±»çš„å¯¹è±¡åœ¨è¿è¡Œæ—¶å¯ä»¥è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸º</p>
<p>çˆ¶ç±»æŒ‡é’ˆå¯ä»¥æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè¿›è€Œè°ƒç”¨å­ç±»å‡½æ•°</p>
</blockquote>
<h5 id="3-1-è™šè¡¨-vtable"><strong>3.1 è™šè¡¨(vtable)</strong></h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ¯ä¸ªå­˜åœ¨è™šå‡½æ•°çš„ç±»ï¼Œéƒ½æœ‰ä¸€ä¸ªè™šå‡½æ•°è¡¨</p>
</li>
<li class="lvl-2">
<p>è™šå‡½æ•°è¡¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå…¶å…ƒç´ æ˜¯æŒ‡å‘è™šå‡½æ•°çš„<strong>å‡½æ•°æŒ‡é’ˆ</strong>(å‡½æ•°çš„åœ°å€)</p>
</li>
<li class="lvl-2">
<p>æˆå‘˜å‡½æ•°(åŒ…æ‹¬è™šå‡½æ•°)æ˜¯ç±»çš„ä¸€éƒ¨åˆ†ï¼Œ<strong>ä¸å ç”¨å¯¹è±¡å®ä¾‹çš„å†…å­˜ç©ºé—´</strong>ï¼Œä»–ä»¬ä¸ºåŒä¸€ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œå­˜å‚¨åœ¨ç¨‹åºçš„<strong>ä»£ç æ®µ</strong>ä¸­</p>
</li>
</ul>
<h5 id="3-2è™šè¡¨æŒ‡é’ˆ-vptr"><strong>3.2è™šè¡¨æŒ‡é’ˆ(vptr)</strong></h5>
<blockquote>
<p>å®ç°å¤šæ€ç±»çš„æ ¸å¿ƒæœºåˆ¶ä¹‹ä¸€</p>
<p>æ¯ä¸€ä¸ªåŒ…å«è™šå‡½æ•°çš„ç±» çš„å®ä¾‹åŒ–å¯¹è±¡æ‰€åŒ…å«çš„<strong>éšå«æŒ‡é’ˆ</strong></p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>è¯¥æŒ‡é’ˆæŒ‡å‘ç±»çš„è™šè¡¨</p>
</li>
<li class="lvl-2">
<p>å¤§å¤šæ•°å®ç°ä¸Šï¼Œè™šå‡½æ•°è¡¨æŒ‡é’ˆ<strong>ä¸€èˆ¬</strong>éƒ½æ”¾åœ¨å¯¹è±¡ç¬¬ä¸€ä¸ªä½ç½®</p>
</li>
<li class="lvl-2">
<p>è¯¥æŒ‡é’ˆæ˜¯éšå«çš„ï¼Œ<strong>ä¸æ˜¯</strong>ç±»çš„æˆå‘˜å˜é‡ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®æˆ–ä¿®æ”¹å®ƒ</p>
</li>
<li class="lvl-2">
<p>æŒ‡é’ˆå¤§å°å–å†³äºæ“ä½œç³»ç»Ÿæˆ–ç¼–è¯‘å™¨ï¼Œ32ä½å 4ä¸ªå­—èŠ‚ï¼Œ64ä½å 8ä¸ªå­—èŠ‚</p>
</li>
</ul>
<h5 id="3-3-å¤šæ€çš„å®ç°"><strong>3.3 å¤šæ€çš„å®ç°</strong></h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>å½“æ´¾ç”Ÿç±»é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°æ—¶ï¼Œæ´¾ç”Ÿç±»çš„è™šè¡¨ä¸­å¯¹åº”çš„å‡½æ•°æŒ‡é’ˆå°†è¢«æ›´æ–°ï¼ŒæŒ‡å‘æ´¾ç”Ÿç±»ä¸­çš„æ–°å®ç°ï¼Œå³æŒ‡å‘æ´¾ç”Ÿç±»ä¸­é‡å†™å‡½æ•°çš„åœ°å€</p>
</li>
</ul>
<img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240427112831155.png" alt="image-20240427112831155" style="zoom: 45%;" />
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠC++ primerã€‹æ–‡æœ¬æŸ¥è¯¢ç¨‹åºä¸€</title>
    <url>/2024/04/13/%E3%80%8AC-primer%E3%80%8B%E6%96%87%E6%9C%AC%E6%9F%A5%E8%AF%A2%E7%A8%8B%E5%BA%8F%E4%B8%80/</url>
    <content><![CDATA[<blockquote>
<p>è¿™æ˜¯ã€ŠC++ primerã€‹ä¸­çš„ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œçœ‹äº†å‡ éä»è§‰æœ‰äº›ç»†èŠ‚æ²¡æœ‰æ˜ç™½ï¼Œæ•…æ‰‹æ•²äº†ä¸€é</p>
<p>éœ€äº†è§£STLå®¹å™¨éƒ¨åˆ†çŸ¥è¯†ç‚¹ï¼Œæ™ºèƒ½æŒ‡é’ˆï¼Œæ–‡ä»¶æµï¼Œstringæµ</p>
</blockquote>
<span id="more"></span>
<h1>ã€ŠC++ primerã€‹æ–‡æœ¬æŸ¥è¯¢ç¨‹åºä¸€</h1>
<p>ä¹¦ä¸Šç»™çš„ä¾‹å­å°šæœ‰ç‘•ç–µï¼Œå¦‚æœå•è¯åœ¨åŒä¸€è¡Œå‡ºç°å¤šæ¬¡ï¼Œåˆ™åªä¼šè®°å½•ä¸ºä¸€æ¬¡ï¼Œæœ¬äººèƒ½åŠ›æœ‰é™ï¼Œå°šæœªè§£å†³æ­¤é—®é¢˜</p>
<h3 id="ä»¥ä¸‹æ˜¯å†™å®Œç¨‹åºåç»˜åˆ¶çš„æ€ç»´å¯¼å›¾">ä»¥ä¸‹æ˜¯å†™å®Œç¨‹åºåç»˜åˆ¶çš„æ€ç»´å¯¼å›¾</h3>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240413155500846.png" alt="image-20240413155500846"></p>
<h3 id="ä»£ç éƒ¨åˆ†">ä»£ç éƒ¨åˆ†</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>main.cpp</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;TextQuery.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;ResultQuery.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">runQueries</span><span class="params">(ifstream&amp; fin)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string filename;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ä½ è¦æŸ¥è¯¢çš„æ–‡ä»¶å(åŒ…å«åç¼€)&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin &gt;&gt; filename;</span><br><span class="line">	<span class="function">ifstream <span class="title">readFile</span><span class="params">(filename, ios::in)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (readFile.<span class="built_in">is_open</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">runQueries</span>(readFile);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;the file open failed!!!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">runQueries</span><span class="params">(ifstream&amp; fin)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">TextQuery <span class="title">tq</span><span class="params">(fin)</span></span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;please enter word to look for, or q to quit.&quot;</span> &lt;&lt; endl;</span><br><span class="line">		string needle;</span><br><span class="line">		<span class="keyword">if</span> (cin &gt;&gt; needle &amp;&amp; needle != <span class="string">&quot;q&quot;</span> &amp;&amp; needle != <span class="string">&quot;Q&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">MyPrint</span>(cout, tq.<span class="built_in">query</span>(needle)) &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>TextQuery.h</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;ResultQuery.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TextQuery</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	shared_ptr&lt;vector&lt;string&gt;&gt; file;   <span class="comment">//æ™ºèƒ½æŒ‡é’ˆ å¤šä¸ªå¯¹è±¡å…±äº«æ•°æ® å­˜å‚¨åœ°å€</span></span><br><span class="line">	map&lt;string, shared_ptr&lt;set&lt;<span class="type">int</span>&gt;&gt;&gt; wm; <span class="comment">//é—´æ¥å®ç°å•è¯ä¸è¡Œå·ä¹‹é—´çš„æ˜ å°„</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">TextQuery</span>(ifstream&amp; fin);   <span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">	<span class="function">ResultQuery <span class="title">query</span><span class="params">(string needle)</span></span>; <span class="comment">//ç”¨æ¥æ•´ç†å‡ºç›®æ ‡å•è¯çš„ç›¸å…³ä¿¡æ¯ï¼Œç„¶åä¼ é€’ç»™ResultQuery</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>TextQuery.cpp</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;TextQuery.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">TextQuery::<span class="built_in">TextQuery</span>(ifstream&amp; fin):<span class="built_in">file</span>(<span class="keyword">new</span> vector&lt;string&gt;)</span><br><span class="line">&#123;</span><br><span class="line">	string lineContent;</span><br><span class="line">	<span class="type">size_t</span> lineNo;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">getline</span>(fin,lineContent))    <span class="comment">// å°†æ–‡ä»¶å†…å®¹æ‹†åˆ†ä¸ºä¸€è¡Œä¸€è¡Œ</span></span><br><span class="line">	&#123;</span><br><span class="line">		file-&gt;<span class="built_in">push_back</span>(lineContent);</span><br><span class="line">		lineNo = file-&gt;<span class="built_in">size</span>() - <span class="number">1</span>;    <span class="comment">//ä»é›¶å¼€å§‹è®¡æ•°ï¼Œæ–¹ä¾¿ä¹‹ååˆ©ç”¨è¿­ä»£å™¨è¿›è¡Œè¾“å‡ºæŸ¥è¯¢ç»“æœ</span></span><br><span class="line">		<span class="function">istringstream <span class="title">line</span><span class="params">(lineContent)</span></span>; <span class="comment">//åˆ©ç”¨stringæµ å°†ä¸€è¡Œå†…å®¹å†æ‹†åˆ†ä¸ºæ¯ä¸ªå•è¯</span></span><br><span class="line">		string word;</span><br><span class="line">		<span class="keyword">while</span> (line &gt;&gt; word)     <span class="comment">//å®ç°æ¯ä¸ªå•è¯ä¸å¯¹åº”è¡Œå·ä¹‹é—´çš„æ˜ å°„</span></span><br><span class="line">		&#123;</span><br><span class="line">			shared_ptr&lt;set&lt;<span class="type">int</span>&gt;&gt;&amp; NO = wm[word];  <span class="comment">// åœ¨mapä¸­å¦‚æœä½¿ç”¨ä¸‹æ ‡æœªæ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé»˜è®¤å€¼</span></span><br><span class="line">			<span class="keyword">if</span> (!NO)</span><br><span class="line">			&#123;</span><br><span class="line">				NO.<span class="built_in">reset</span>(<span class="keyword">new</span> set&lt;<span class="type">int</span>&gt;);    <span class="comment">//æ¸…ç©ºé»˜è®¤å€¼ï¼Œä½¿å…¶æ˜¯ä¸€ä¸ªæŒ‡å‘set&lt;int&gt;å‹çš„æŒ‡é’ˆ</span></span><br><span class="line">				NO-&gt;<span class="built_in">insert</span>(lineNo);        <span class="comment">//å°†è¿™ä¸ªå•è¯æ‰€åœ¨çš„è¡Œå·æ‹·è´ç»™ æŒ‡é’ˆæŒ‡å‘çš„é‚£ä¸ªç©ºé—´</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				NO-&gt;<span class="built_in">insert</span>(lineNo);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ResultQuery <span class="title">TextQuery::query</span><span class="params">(string needle)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	shared_ptr&lt;set&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">nothing</span> (<span class="keyword">new</span> set&lt;<span class="type">int</span>&gt;);</span><br><span class="line">	<span class="keyword">auto</span> result = wm.<span class="built_in">find</span>(needle);</span><br><span class="line">	<span class="keyword">if</span> (result == wm.<span class="built_in">end</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">ResultQuery</span>(needle,file, nothing);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">ResultQuery</span>(needle,file, result-&gt;second);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>ResultQuery.h</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ResultQuery</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string needle;</span><br><span class="line">	shared_ptr&lt;vector&lt;string&gt;&gt; file;</span><br><span class="line">	shared_ptr&lt;set&lt;<span class="type">int</span>&gt;&gt; lines;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">ResultQuery</span>(string n, shared_ptr&lt;vector&lt;string&gt;&gt; f, shared_ptr&lt;set&lt;<span class="type">int</span>&gt;&gt; l) :\</span><br><span class="line">		<span class="built_in">needle</span>(n), <span class="built_in">file</span>(f), <span class="built_in">lines</span>(l) &#123;&#125;    <span class="comment">//æ„é€ å‡½æ•° è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">	<span class="function"><span class="keyword">friend</span> ostream&amp; <span class="title">MyPrint</span><span class="params">(ostream&amp;, <span class="type">const</span> ResultQuery&amp;)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>ResultQuery.cpp</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ResultQuery.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function">ostream&amp; <span class="title">MyPrint</span><span class="params">(ostream&amp; os, <span class="type">const</span> ResultQuery&amp; rq)</span> </span>&#123;</span><br><span class="line">	os&lt;&lt; rq.needle &lt;&lt; <span class="string">&quot; occurs &quot;</span> &lt;&lt; rq.lines-&gt;<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;times in the file &quot;</span>  &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> line : *(rq.lines))</span><br><span class="line">	&#123;</span><br><span class="line">		os &lt;&lt; <span class="string">&quot;\tline:&quot;</span>&lt;&lt;line+<span class="number">1</span>&lt;&lt; <span class="string">&quot; &quot;</span>&lt;&lt;rq.file-&gt;<span class="built_in">begin</span>()[line]&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Webå‰ç«¯åŸºç¡€</title>
    <url>/2024/04/05/Web%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<blockquote>
<p>Web å‰ç«¯çš„ä¸€äº›åŸºç¡€çŸ¥è¯†å’Œç›¸å…³å·¥å…·çš„ä½¿ç”¨</p>
</blockquote>
<span id="more"></span>
<h1><u><strong>Java Web</strong></u></h1>
<p>æ–‡æ¡£æŸ¥è¯¢ç½‘ç«™:<a href="https://www.w3school.com.cn/index.html">https://www.w3school.com.cn/index.html</a></p>
<h1>Webå‰ç«¯</h1>
<h3 id="ç½‘é¡µ">ç½‘é¡µ</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>æœ¬è´¨æ˜¯<strong>å‰ç«¯ä»£ç </strong>ç»è¿‡æµè§ˆå™¨çš„<strong>è§£æå’Œæ¸²æŸ“</strong>è€Œæˆçš„</p>
</li>
<li class="lvl-2">
<p><strong>æµè§ˆå™¨å†…æ ¸</strong>è¿›è¡Œä»£ç çš„è§£æå’Œæ¸²æŸ“</p>
</li>
</ul>
<h3 id="webæ ‡å‡†">webæ ‡å‡†</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>HTMLï¼šè´Ÿè´£ç½‘é¡µçš„ç»“æ„ï¼ˆé¡µé¢å…ƒç´ å’Œå†…å®¹ï¼‰</p>
</li>
<li class="lvl-2">
<p>CSSï¼šè´Ÿè´£ç½‘é¡µçš„è¡¨ç°ï¼ˆé¡µé¢å…ƒç´ çš„å¤–è§‚ï¼Œä½ç½®ï¼Œé¢œè‰²ï¼Œå¤§å°ç­‰ï¼‰</p>
</li>
<li class="lvl-2">
<p>JavaScriptï¼šè´Ÿè´£ç½‘é¡µçš„è¡Œä¸ºï¼ˆäº¤äº’æ•ˆæœï¼‰</p>
</li>
<li class="lvl-2">
<p>é«˜çº§æŠ€æœ¯</p>
<ul class="lvl-2">
<li class="lvl-6">Vue.js</li>
<li class="lvl-6">ElementUI</li>
<li class="lvl-6">Ajax</li>
<li class="lvl-6">Axios</li>
<li class="lvl-6">â€¦</li>
</ul>
</li>
</ul>
<h3 id="HTMLï¼ˆHyperText-Markup-Languageï¼‰">HTMLï¼ˆHyperText Markup Languageï¼‰</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼ˆè¶…è¶Šæ™®é€šæ–‡æœ¬è¯­è¨€ï¼Œç”±æ ‡ç­¾æ„æˆçš„è¯­è¨€ï¼‰</p>
</li>
<li class="lvl-2">
<p>æ ‡ç­¾æ˜¯é¢„å®šå¥½çš„ï¼Œ</p>
</li>
<li class="lvl-2">
<p>HTMLä»£ç ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼ŒHTMLæ ‡ç­¾ç”±æµè§ˆå™¨è§£æ</p>
</li>
</ul>
<h4 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>ä¸åŒºåˆ†å¤§å°å†™</p>
</li>
<li class="lvl-2">
<p>å±æ€§å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·</p>
</li>
<li class="lvl-2">
<p>è¯­æ³•æ¾æ•£</p>
</li>
</ul>
<h4 id="å¸¸ç”¨æ ‡ç­¾">å¸¸ç”¨æ ‡ç­¾</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>&lt;img&gt;</p>
<ul class="lvl-2">
<li class="lvl-6"><strong>src</strong>:æŒ‡å®šå›¾åƒçš„urlï¼ˆç›¸å¯¹æˆ–ç»å¯¹ï¼‰</li>
<li class="lvl-6"><strong>width</strong></li>
<li class="lvl-6"><strong>height</strong></li>
</ul>
</li>
<li class="lvl-2">
<p>æ ‡é¢˜æ ‡ç­¾:&lt;h1&gt; - &lt;h6&gt;</p>
</li>
<li class="lvl-2">
<p>æ°´å¹³çº¿æ ‡ç­¾:&lt;hr&gt;</p>
</li>
<li class="lvl-2">
<p>è¶…é“¾æ¥&lt;a&gt;</p>
<ul class="lvl-2">
<li class="lvl-6">hrefæŒ‡å®šè®¿é—®èµ„æºçš„url</li>
<li class="lvl-6">targetæŒ‡å®šåœ¨ä½•å¤„æ‰“å¼€èµ„æº(_self,_blank)</li>
</ul>
</li>
<li class="lvl-2">
<p>&lt;video&gt;è§†é¢‘</p>
<ul class="lvl-2">
<li class="lvl-6">controlsæ˜¾ç¤ºæ’­æ”¾æ§ä»¶</li>
<li class="lvl-6">src</li>
<li class="lvl-6">width</li>
</ul>
</li>
<li class="lvl-2">
<p>&lt;audio&gt;éŸ³é¢‘</p>
<ul class="lvl-2">
<li class="lvl-6">controls</li>
<li class="lvl-6">src</li>
<li class="lvl-6">width</li>
</ul>
</li>
<li class="lvl-2">
<p>&lt;b&gt;/&lt;strong&gt;åŠ ç²—</p>
</li>
<li class="lvl-2">
<p>&lt;p&gt;åˆ†æ®µè½</p>
</li>
<li class="lvl-2">
<p><mark>è¡¨æ ¼æ ‡ç­¾</mark></p>
<ul class="lvl-2">
<li class="lvl-6">
<p>&lt;table&gt;å®šä¹‰è¡¨æ ¼æ•´ä½“</p>
<ul class="lvl-4">
<li class="lvl-10">border:è§„å®šè¾¹æ¡†å®½åº¦</li>
<li class="lvl-10">width:è§„å®šè¡¨æ ¼çš„å®½åº¦</li>
<li class="lvl-10">cellspacing:è§„å®šå•å…ƒæ ¼ä¹‹é—´çš„ç©ºéš™å¤§å°</li>
</ul>
</li>
<li class="lvl-6">
<p>&lt;tr&gt;:è¡¨æ ¼çš„è¡Œ</p>
</li>
<li class="lvl-6">
<p>&lt;td&gt;:è¡¨æ ¼å•å…ƒæ ¼ï¼Œï¼ˆè¡¨å¤´ä½¿ç”¨&lt;th&gt;ï¼‰</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600px&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>è§’è‰²åç§°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">th</span>&gt;</span>å›¾ç‰‡<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>å…ƒç´ <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>å›½åº¦<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>é‚£ç»´è±ç‰¹<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://picx.zhimg.com/70/v2-5623d0ee6d0a7f7a63ffce7830fdbc7a_1440w.avis?source=172ae18b&amp;biz_tag=Post&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ°´<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ«ä¸¹<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>æçº³é‡Œ<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://patchwiki.biligame.com/images/ys/2/2b/hcwuh3cbgc5dyfcx4qlqp95qlzbp619.png&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>è‰<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>é¡»å¼¥<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><mark>è¡¨å•æ ‡ç­¾</mark></p>
<ul class="lvl-2">
<li class="lvl-6">è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œå¦‚ç™»å½•ï¼Œæ³¨å†Œç­‰ä¿¡æ¯</li>
<li class="lvl-6">&lt;form&gt;
<ul class="lvl-4">
<li class="lvl-10">
<p>&lt;input&gt;:å®šä¹‰è¡¨å•é¡¹ï¼Œé€šè¿‡typeå±æ€§æ§åˆ¶è¾“å…¥å½¢å¼</p>
<ul class="lvl-6">
<li class="lvl-14"><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/4ea973bcae494ddcb335a2210f851a33.jpg" alt=""></li>
</ul>
</li>
<li class="lvl-10">
<p>&lt;select&gt;:å®šä¹‰ä¸‹æ‹‰åˆ—è¡¨</p>
<ul class="lvl-6">
<li class="lvl-14">&lt;option&gt;å®šä¹‰åˆ—è¡¨é¡¹</li>
</ul>
</li>
<li class="lvl-10">
<p>&lt;textarea&gt;:å®šä¹‰æ–‡æœ¬åŸŸ</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    å§“å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    æ€§åˆ«:<span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    çˆ±å¥½:<span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span>&gt;</span>java<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;genshin&quot;</span>&gt;</span>genshin<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sleep&quot;</span>&gt;</span>sleep<span class="tag">&lt;/<span class="name">label</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å›¾åƒ:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    ç”Ÿæ—¥:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    æ—¶é—´:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;time&quot;</span> <span class="attr">name</span>=<span class="string">&quot;time&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    æ—¥æœŸæ—¶é—´:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;datetime-local&quot;</span> <span class="attr">name</span>=<span class="string">&quot;datetime&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    é‚®ç®±:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¹´é¾„:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å­¦å†:<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;degree&quot;</span>&gt;</span></span><br><span class="line">    		 <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>-----------è¯·é€‰æ‹©---------<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">   			 <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>å¤§ä¸“<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">   			 <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>æœ¬ç§‘<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">   			 <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>ç¡•å£«<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">   			 <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span>&gt;</span>åšå£«<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">select</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    æè¿°:<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- è¡¨å•å¸¸è§æŒ‰é’® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æŒ‰é’®&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;é‡ç½®&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>å±æ€§</p>
<ul class="lvl-2">
<li class="lvl-6">action:è§„å®šæäº¤è¡¨å•æ—¶å‘<mark>ä½•å¤„</mark>å‘é€è¡¨å•æ•°æ®ï¼Œ<mark>URL(å¦‚æœä¸æŒ‡å®šé»˜è®¤æäº¤åˆ°å½“å‰é¡µé¢)</mark></li>
<li class="lvl-6">method:è§„å®šç”¨äºå‘é€è¡¨å•æ•°æ®çš„æ–¹å¼ã€‚GETï¼ŒPOST
<ul class="lvl-4">
<li class="lvl-10">getåœ¨urlåé¢æ‹¼æ¥è¡¨å•æ•°æ®</li>
<li class="lvl-10">poståœ¨æ¶ˆæ¯ä½“ï¼ˆè¯·æ±‚ä½“ï¼‰ä¸­ä¼ é€’ï¼Œå‚æ•°é•¿åº¦æ— é™åˆ¶</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-2">
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/e447b517ec4b4c0188f40c169819dee5.jpg" alt=""><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/6849f34158104e18a40762f0f110e73c.jpg" alt=""></p>
</li>
</ul>
<h3 id="CSSï¼ˆCascading-Style-Sheetï¼‰">CSSï¼ˆCascading Style Sheetï¼‰</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>å±‚å æ ·å¼è¡¨ï¼Œæ§åˆ¶ç½‘é¡µçš„è¡¨ç°</p>
</li>
</ul>
<h4 id="CSSé€‰æ‹©å™¨">CSSé€‰æ‹©å™¨</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>å…ƒç´ é€‰æ‹©å™¨<code>h1&#123;&#125;</code></p>
</li>
<li class="lvl-2">
<p>idé€‰æ‹©å™¨<code>#hid&#123;&#125;</code>(åœ¨styleä¸­)     <code>&lt;h1 id=&quot;hid&quot;&gt;</code>ä¸èƒ½é‡å¤</p>
</li>
<li class="lvl-2">
<p>ç±»é€‰æ‹©å™¨<code>.cls&#123;&#125;</code>(åœ¨styleä¸­)      <code>&lt;h1 class=&quot;cls&quot;&gt;</code></p>
</li>
</ul>
<h4 id="å¸¸ç”¨æ ‡ç­¾-2">å¸¸ç”¨æ ‡ç­¾</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>&lt;span&gt;æ— è¯­ä¹‰çš„å¸ƒå±€æ ‡ç­¾ï¼Œä¸€è¡Œå¯æ˜¾ç¤ºå¤šä¸ª</p>
</li>
<li class="lvl-2">
<p>&lt;div&gt;</p>
</li>
</ul>
<h4 id="å±æ€§">å±æ€§</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>color</p>
</li>
<li class="lvl-2">
<p>font-sizeï¼šå­—ä½“å¤§å°ï¼ˆåŠ pxï¼‰</p>
</li>
<li class="lvl-2">
<p>text-decoration:è§„å®šæ–‡æœ¬çš„ä¿®é¥°ï¼Œnoneè¡¨ç¤ºå®šä¹‰æ ‡å‡†çš„æ–‡æœ¬</p>
</li>
<li class="lvl-2">
<p>text-alignï¼šæ§åˆ¶å¯¹é½æ–¹å¼</p>
</li>
<li class="lvl-2">
<p>text-indent:é¦–è¡Œç¼©è¿›</p>
</li>
<li class="lvl-2">
<p>line-heightï¼šè¡Œé«˜</p>
</li>
<li class="lvl-2">
<p>ç©ºæ ¼å ä½ç¬¦ï¼š&amp;nbsp</p>
</li>
</ul>
<h4 id="ç›’å­æ¨¡å‹">ç›’å­æ¨¡å‹</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>&lt;div&gt;æ— è¯­ä¹‰çš„å¸ƒå±€æ ‡ç­¾ï¼Œä¸€è¡Œåªå ä¸€ä¸ª</p>
</li>
<li class="lvl-2">
<p>ç»„æˆï¼šå†…å®¹åŒºåŸŸ(content)ï¼Œå†…è¾¹è·åŒºåŸŸ(padding)ï¼Œè¾¹æ¡†åŒºåŸŸ(border)ï¼Œå¤–è¾¹è·åŒºåŸŸ(margin)</p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/f16d206f52b2485fa07da58b55eb814d.jpg" alt=""></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">h1</span>&#123;</span></span><br><span class="line"><span class="language-css">       <span class="attribute">color</span>:<span class="built_in">rgb</span>(<span class="number">102</span>, <span class="number">97</span>, <span class="number">97</span>);</span></span><br><span class="line"><span class="language-css">     &#125;</span></span><br><span class="line"><span class="language-css">   //ç±»é€‰æ‹©å™¨</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.time</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>:<span class="built_in">rgb</span>(<span class="number">241</span>, <span class="number">3</span>, <span class="number">3</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    //æ ‡ç­¾é€‰æ‹©å™¨</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>:black;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    //idé€‰æ‹©å™¨</span></span><br><span class="line"><span class="language-css">   <span class="selector-id">#wangmc</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: right;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>:chocolate;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="comment">/*&lt;div id=&quot;center&quot;&gt;*/</span></span></span><br><span class="line"><span class="language-css">   <span class="selector-id">#center</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;<span class="comment">/*æŒ‡å®šwidthä¸ºç›’å­å®½åº¦*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">219</span>, <span class="number">235</span>, <span class="number">235</span>);</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">20px</span>; <span class="comment">/*å†…è¾¹è· ä¸Šå³ä¸‹å·¦*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;<span class="comment">/*è¾¹æ¡†å®½åº¦ çº¿æ¡ç±»å‹ é¢œè‰²*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>:auto;<span class="comment">/*å¤–è¾¹è· */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="JavaScriptï¼ˆç®€ç§°ï¼šjsï¼‰">JavaScriptï¼ˆç®€ç§°ï¼šjsï¼‰</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>è·¨å¹³å°ï¼Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ï¼Œä½¿ç½‘é¡µå¯ä»¥äº¤äº’</p>
</li>
</ul>
<h4 id="jså¼•å…¥æ–¹å¼">jså¼•å…¥æ–¹å¼</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>å†…éƒ¨è„šæœ¬ï¼ˆå®šä¹‰åœ¨HTMLé¡µé¢ï¼‰</p>
<ul class="lvl-2">
<li class="lvl-6">jsä»£ç <strong>å¿…é¡»</strong>ä½äº&lt;script&gt;&lt;/script&gt;ä¹‹é—´</li>
<li class="lvl-6">å¯ä»¥æ”¾åœ¨ä»»æ„åœ°æ–¹ï¼Œæ”¾ç½®ä»»æ„æ•°é‡</li>
<li class="lvl-6">ä¸€èˆ¬ä½äº&lt;body&gt;å…ƒç´ çš„åº•éƒ¨ï¼Œæ”¹å–„æ˜¾ç¤ºé€Ÿåº¦</li>
</ul>
</li>
<li class="lvl-2">
<p>å¤–éƒ¨è„šæœ¬ï¼ˆjsä»£ç å®šä¹‰åœ¨å¤–éƒ¨è§’è‰²æ–‡ä»¶ä¸­ï¼Œç„¶åå¼•å…¥åˆ°HTMLä¸­ï¼‰</p>
<ul class="lvl-2">
<li class="lvl-6">å¤–éƒ¨jsæ–‡ä»¶ä¸­åªåŒ…å«jsä»£ç ï¼Œä¸å«æœ‰&lt;script&gt;æ ‡ç­¾</li>
<li class="lvl-6">&lt;script&gt;æ ‡ç­¾<strong>ä¸èƒ½è‡ªé—­åˆ</strong></li>
</ul>
</li>
</ul>
<h4 id="åŸºç¡€è¯­æ³•">åŸºç¡€è¯­æ³•</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>ä¹¦å†™è¯­æ³•</p>
<ul class="lvl-2">
<li class="lvl-6">åŒºåˆ†å¤§å°å†™</li>
<li class="lvl-6">æ¯æ¡è¯­å¥ç»“æŸå¯ä»¥ä¸å†™åˆ†å·</li>
</ul>
</li>
<li class="lvl-2">
<p>è¾“å‡ºè¯­å¥</p>
<ul class="lvl-2">
<li class="lvl-6">window.alert()  å†™å…¥è­¦å‘Šæ¡†</li>
<li class="lvl-6">document.write()  å†™å…¥HTMLè¾“å‡º</li>
<li class="lvl-6">console.log()  å†™å…¥æµè§ˆå™¨æ§åˆ¶å°</li>
</ul>
</li>
</ul>
<h4 id="å˜é‡">å˜é‡</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>åˆ©ç”¨<strong>varï¼Œletï¼Œconstå…³é”®å­—</strong>æ¥å£°æ˜å˜é‡</p>
</li>
<li class="lvl-2">
<p>å› ä¸ºjsæ˜¯å¼±ç±»å‹çš„è¯­è¨€ï¼Œæ‰€ä»¥å˜é‡<strong>å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹</strong>çš„å€¼</p>
</li>
<li class="lvl-2">
<p>åˆ©ç”¨varå®šä¹‰å‡ºæ¥çš„æ˜¯å…¨å±€å˜é‡ï¼Œå¯ä»¥é‡å¤å®šä¹‰</p>
</li>
<li class="lvl-2">
<p>åˆ©ç”¨letå®šä¹‰å‡ºæ¥çš„æ˜¯<strong>å±€éƒ¨å˜é‡</strong>ï¼Œåªåœ¨ä»£ç å—ä¸­æœ‰æ•ˆï¼Œä¸å¯é‡å¤å®šä¹‰</p>
</li>
</ul>
<h4 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>åŸå§‹ç±»å‹</p>
<ul class="lvl-2">
<li class="lvl-6">numberï¼Œstringï¼Œbooleanï¼Œnullï¼Œundefined</li>
</ul>
</li>
<li class="lvl-2">
<p>å¼•ç”¨ç±»å‹</p>
<ul class="lvl-2">
<li class="lvl-6">jsä¸­çš„å¯¹è±¡</li>
</ul>
</li>
<li class="lvl-2">
<p>åˆ©ç”¨<strong>typeof</strong>æ¥è·å–æ•°æ®ç±»å‹</p>
</li>
</ul>
<h4 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>==ï¼šä¼šè¿›è¡Œç±»å‹è½¬æ¢</p>
</li>
<li class="lvl-2">
<p>===ï¼š<strong>ä¸ä¼š</strong>è¿›è¡Œç±»å‹è½¬æ¢</p>
</li>
</ul>
<h4 id="jså‡½æ•°">jså‡½æ•°</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>é€šè¿‡functionå…³é”®å­—è¿›è¡Œå®šä¹‰</p>
</li>
<li class="lvl-2">
<p>ä¸éœ€è¦å®šä¹‰å½¢å‚å’Œè¿”å›å€¼çš„ç±»å‹</p>
</li>
</ul>
<h4 id="jså¯¹è±¡">jså¯¹è±¡</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><mark>Array</mark></p>
<ul class="lvl-2">
<li class="lvl-6">var å˜é‡å =  [å…ƒç´ åˆ—è¡¨]</li>
<li class="lvl-6">var å˜é‡å = new Arrayï¼ˆå…ƒç´ åˆ—è¡¨ï¼‰</li>
<li class="lvl-6">å±æ€§ï¼šlengthï¼Œè¿”å›æ•°ç»„ä¸­çš„å…ƒç´ æ•°é‡</li>
<li class="lvl-6">æ–¹æ³•
<ul class="lvl-4">
<li class="lvl-10">forEach()ï¼šéå†æ•°ç»„ä¸­æ¯ä¸€ä¸ªæœ‰å€¼çš„å…ƒç´ ï¼Œå¹¶è°ƒç”¨ä¸€æ¬¡ä¼ å…¥çš„å‡½æ•°
<ul class="lvl-6">
<li class="lvl-14">ç®­å¤´å‡½æ•°:<mark>arry.forEach(item=&gt;{console.log(item);})</mark></li>
</ul>
</li>
<li class="lvl-10">push()ï¼šå°†æ–°å…ƒç´ æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦</li>
<li class="lvl-10">splice(start,number)ï¼šä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ </li>
</ul>
</li>
</ul>
</li>
<li class="lvl-2">
<p><mark>String</mark></p>
<ul class="lvl-2">
<li class="lvl-6">å±æ€§ï¼šlength</li>
<li class="lvl-6">æ–¹æ³•
<ul class="lvl-4">
<li class="lvl-10">charAt()ï¼šè¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦</li>
<li class="lvl-10">indexOf()ï¼šæ£€ç´¢å­—ç¬¦ä¸²æ‰€åœ¨çš„ä½ç½®</li>
<li class="lvl-10">trim()ï¼šå»é™¤å­—ç¬¦ä¸²ä¸¤è¾¹çš„ç©ºæ ¼</li>
<li class="lvl-10">substring(start,end):æå–å­—ç¬¦ä¸²ä¸­ä¸¤ä¸ªæŒ‡å®šçš„ç´¢å¼•å·ä¹‹é—´çš„å­—ç¬¦(å·¦é—­å³å¼€)</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-2">
<p><mark>JSON(JavaScript Object Notation)</mark></p>
<ul class="lvl-2">
<li class="lvl-6">é€šè¿‡JavaScriptå¯¹è±¡æ ‡è®°æ³•å†™çš„<strong>æ–‡æœ¬</strong></li>
<li class="lvl-6">å¤šä½œä¸º<strong>æ•°æ®è½½ä½“</strong>ï¼Œè¿›è¡Œæ•°æ®ä¼ è¾“</li>
<li class="lvl-6">è‡ªå®šä¹‰å¯¹è±¡
<ul class="lvl-4">
<li class="lvl-10"><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/fef698ce3a1442548684b60d271ab794.jpg" alt=""></li>
</ul>
</li>
<li class="lvl-6">æ ¼å¼ä¸è‡ªå®šä¹‰å¯¹è±¡ç±»ä¼¼ï¼Œä½†å˜é‡åè¦åŠ åŒå¼•å·</li>
<li class="lvl-6">å®šä¹‰
<ul class="lvl-4">
<li class="lvl-10"><code>var å˜é‡å = '&#123;&quot;key1&quot;: value1,&quot;key2&quot;:value2&#125;'</code></li>
<li class="lvl-10"><code>var userStr = '&#123;&quot;name&quot;:&quot;Jerry&quot;,&quot;age&quot;:18,&quot;addr&quot;:[&quot;åŸç¥&quot;,&quot;æ˜Ÿé“&quot;,&quot;ç»åŒºé›¶&quot;]&#125;'</code></li>
<li class="lvl-10">è¯¥å¯¹è±¡æ˜¯æ–‡æœ¬ï¼Œæ•´ä½“è¦åŠ å•å¼•å·</li>
</ul>
</li>
<li class="lvl-6">æ–¹æ³•
<ul class="lvl-4">
<li class="lvl-10">JSON.parse()    å°† JSON å­—ç¬¦ä¸²è§£æä¸º JavaScript å¯¹è±¡</li>
<li class="lvl-10">JSON.stringify()</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-2">
<p><mark>BOM(Browser Object Model)</mark></p>
<ul class="lvl-2">
<li class="lvl-6">æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œå…è®¸jsä¸æµè§ˆå™¨å¯¹è¯ï¼Œjså°†<strong>æµè§ˆå™¨å„ä¸ªç»„æˆéƒ¨åˆ†</strong>å°è£…ä¸ºå¯¹è±¡</li>
<li class="lvl-6">ç»„æˆ
<ul class="lvl-4">
<li class="lvl-10">Window:æµè§ˆå™¨çª—å£å¯¹è±¡
<ul class="lvl-6">
<li class="lvl-14">æ–¹æ³•
<ul class="lvl-8">
<li class="lvl-18">alert()æ˜¾ç¤ºå¸¦æœ‰ä¸€æ®µæ¶ˆæ¯å’Œä¸€ä¸ªç¡®è®¤æŒ‰é’®çš„è­¦å‘Šæ¡†</li>
<li class="lvl-18">confirm()æ˜¾ç¤ºå¸¦æœ‰ä¸€æ®µæ¶ˆæ¯ä»¥åŠä¸€ä¸ªç¡®è®¤å’Œå–æ¶ˆæŒ‰é’®çš„å¯¹è¯æ¡†</li>
<li class="lvl-18">setInterval()æŒ‰ç…§æŒ‡å®šçš„å‘¨æœŸæ¥è°ƒç”¨å‡½æ•°</li>
<li class="lvl-18">setTimeout()åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°åè°ƒç”¨å‡½æ•°</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-10">Navigator:æµè§ˆå™¨å¯¹è±¡</li>
<li class="lvl-10">Screen</li>
<li class="lvl-10">History</li>
<li class="lvl-10">Location:åœ°å€æ å¯¹è±¡
<ul class="lvl-6">
<li class="lvl-14">å±æ€§ï¼šhref</li>
<li class="lvl-14"><code>location.href = &quot;</code><a href="https://www.xxxx.cn%22%60">https://www.xxxx.cn&quot;`</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-2">
<p><mark>DOM(Document Object Model)</mark></p>
<ul class="lvl-2">
<li class="lvl-6">å°†<strong>æ ‡è®°è¯­è¨€</strong>çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°è£…ä¸ºå¯¹åº”çš„å¯¹è±¡
<ul class="lvl-4">
<li class="lvl-10">Document:æ•´ä¸ªæ–‡æ¡£å¯¹è±¡</li>
<li class="lvl-10">Element:å…ƒç´ å¯¹è±¡</li>
<li class="lvl-10">Attribute:å±æ€§å¯¹è±¡</li>
<li class="lvl-10">Text:æ–‡æœ¬å¯¹è±¡</li>
<li class="lvl-10">Comment:æ³¨é‡Šå¯¹è±¡</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="jsäº‹ä»¶ç›‘å¬">jsäº‹ä»¶ç›‘å¬</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>æŒ‡å‘ç”Ÿåœ¨HTMLå…ƒç´ ä¸Šçš„äº‹æƒ…ï¼Œå¦‚æŒ‰é’®è¢«ç‚¹å‡»ï¼ŒæŒ‰ä¸‹é¼ æ ‡å¿«æ·é”®,æ‰§è¡Œç›¸åº”ä»£ç </p>
</li>
<li class="lvl-2">
<p>äº‹ä»¶ç»‘å®š</p>
<ul class="lvl-2">
<li class="lvl-6"><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/13eb553b0c2641fa98fba14050304d0f.jpg" alt=""></li>
</ul>
</li>
<li class="lvl-2">
<p>å¸¸è§äº‹ä»¶</p>
<ul class="lvl-2">
<li class="lvl-6"><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/0d7b9d055cc4489fa75047028cb7b01f.jpg" alt=""></li>
</ul>
</li>
</ul>
<h3 id="Vue">Vue</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>å‰ç«¯æ¡†æ¶ï¼Œå…é™¤jsä¸­çš„DOMæ“ä½œï¼ŒåŸºäºMVVMæ€æƒ³ï¼Œå®ç°æ•°æ®åŒå‘ç»‘å®š</p>
</li>
</ul>
<h4 id="æ’å€¼è¡¨è¾¾å¼-swigï¿¼11">æ’å€¼è¡¨è¾¾å¼:</h4>
<h4 id="å¸¸ç”¨å±æ€§">å¸¸ç”¨å±æ€§</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>elæŒ‡ç¤ºvueç¼–è¯‘å™¨ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹è§£æ vueçš„è¯­æ³•</p>
</li>
<li class="lvl-2">
<p>dataå­˜å‚¨å˜é‡</p>
</li>
<li class="lvl-2">
<p>methodså­˜æ”¾å‡½æ•°</p>
</li>
<li class="lvl-2">
<p>templateè®¾ç½®æ¨¡æ¿</p>
</li>
<li class="lvl-2">
<p>watch</p>
</li>
<li class="lvl-2">
<p>computed</p>
</li>
<li class="lvl-2">
<p>renderåˆ›å»ºçœŸæ­£çš„Virtual Dom</p>
</li>
</ul>
<h4 id="å¸¸ç”¨æŒ‡ä»¤">å¸¸ç”¨æŒ‡ä»¤</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>v-modelåœ¨<a href="####%E5%B8%B8%E7%94%A8%E6%A0%87%E7%AD%BE">è¡¨å•å…ƒç´ </a>ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®š</p>
</li>
<li class="lvl-2">
<p>v-bindä¸ºHTMLæ ‡ç­¾ç»‘å®šå±æ€§å€¼ï¼Œå¦‚hrefï¼Œcssæ ·å¼</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;yuanshen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>åŸç¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;url&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>:<span class="string">&quot;hello vue&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#yuanshen&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&quot;https://www.yuanshen.com/#/&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>v-onä¸ºHTMLæ ‡ç­¾ç»‘å®šäº‹ä»¶</p>
<ul class="lvl-2">
<li class="lvl-6"><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/1728dacdc3684d4da2335099fb847944.jpg" alt=""></li>
</ul>
</li>
<li class="lvl-2">
<p>v-if, v-else-if, v-elseæ¡ä»¶æ€§çš„æ¸²æŸ“æŸå…ƒç´ </p>
</li>
<li class="lvl-2">
<p>v-showæ ¹æ®æ¡ä»¶å±•ç¤ºæŸå…ƒç´ ï¼ŒåŒºåˆ«åœ¨äºåˆ‡æ¢çš„æ˜¯displayå±æ€§çš„å€¼</p>
</li>
<li class="lvl-2">
<p>v-foråˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨ä¸­çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§</p>
<ul class="lvl-2">
<li class="lvl-6"><code>&lt;div v-for=&quot;å˜é‡å in éå†å¯¹è±¡&quot;&gt;&#123;&#123;å˜é‡å&#125;&#125;&lt;/div&gt;</code></li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;addr in addrs&quot;</span>&#123;&#123;<span class="attr">addr</span>&#125;&#125;&lt;/<span class="attr">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(addr,index) in addrs&quot;</span>&#123;&#123;<span class="attr">index</span>+<span class="attr">1</span>&#125;&#125;<span class="attr">:</span>&#123;&#123;<span class="attr">addr</span>&#125;&#125;&lt;/<span class="attr">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">data:&#123;</span><br><span class="line">	...</span><br><span class="line">	addrs:[&#x27;beijing&#x27;,&#x27;shanghai&#x27;,&#x27;hongkong&#x27;,&#x27;nanjing&#x27;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ¡ˆä¾‹</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç¼–å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>æˆç»©<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>ç­‰çº§<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(arr,index) in users&quot;</span>&gt;</span> //éå†usersæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶èµ‹å€¼ç»™arr</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;index+1&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;arr.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;arr.age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;arr.gender==1&quot;</span>&gt;</span>boy<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else-if</span>=<span class="string">&quot;arr.gender==0&quot;</span>&gt;</span>girl<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;arr.score&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;arr.score&gt;=90&quot;</span>&gt;</span>ä¼˜ç§€<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else-if</span>=<span class="string">&quot;arr.score&gt;=60&quot;</span>&gt;</span>åŠæ ¼<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>=<span class="string">&quot;arr.score 60&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:red &quot;</span>&gt;</span>ä¸åŠæ ¼<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">users</span>:[&#123;<span class="attr">name</span>:<span class="string">&quot;çº³è¥¿å¦²&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;500&quot;</span>,<span class="attr">gender</span>:<span class="number">0</span>,<span class="attr">score</span>:<span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">name</span>:<span class="string">&quot;èŠ™å®å¨œ&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;530&quot;</span>,<span class="attr">gender</span>:<span class="number">0</span>,<span class="attr">score</span>:<span class="number">80</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">name</span>:<span class="string">&quot;è’æ³·ä¸€æ–—&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;101&quot;</span>,<span class="attr">gender</span>:<span class="number">1</span>,<span class="attr">score</span>:<span class="number">55</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">name</span>:<span class="string">&quot;æ—…è¡Œè€…&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;666&quot;</span>,<span class="attr">gender</span>:<span class="number">1</span>,<span class="attr">score</span>:<span class="number">90</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">name</span>:<span class="string">&quot;æ´¾è’™&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;320&quot;</span>,<span class="attr">gender</span>:<span class="number">0</span>,<span class="attr">score</span>:<span class="number">66</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">name</span>:<span class="string">&quot;ä¸ƒä¸ƒ&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;432&quot;</span>,<span class="attr">gender</span>:<span class="number">0</span>,<span class="attr">score</span>:<span class="number">77</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">name</span>:<span class="string">&quot;å¤©ç†&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;999&quot;</span>,<span class="attr">gender</span>:<span class="number">0</span>,<span class="attr">score</span>:<span class="number">150</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ¯è§¦å‘ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆé’©å­ï¼‰</p>
</li>
<li class="lvl-2">
<p>å…«ä¸ªé˜¶æ®µ</p>
<ul class="lvl-2">
<li class="lvl-6">beforeCreate</li>
<li class="lvl-6">created</li>
<li class="lvl-6">beforeMount</li>
<li class="lvl-6">mountedæŒ‚è½½å®Œæˆ</li>
<li class="lvl-6">beforeUpdate</li>
<li class="lvl-6">updated</li>
<li class="lvl-6">beforeDestroy</li>
<li class="lvl-6">destroyed</li>
</ul>
</li>
</ul>
<h4 id="Vueè·¯ç”±-Vue-Router">Vueè·¯ç”±(Vue Router)</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>Vue router è·¯ç”±å™¨ç±»ï¼Œæ ¹æ®è·¯ç”±è¯·æ±‚åœ¨è·¯ç”±è§†å›¾ä¸­åŠ¨æ€æ¸²æŸ“é€‰ä¸­çš„ç»„ä»¶</p>
</li>
<li class="lvl-2">
<p><code>&lt;router-link&gt;</code>è¯·æ±‚é“¾æ¥ç»„ä»¶ï¼Œä¼šè¢«æµè§ˆå™¨è§£æä¸º<code>&lt;a&gt;</code></p>
</li>
<li class="lvl-2">
<p><code>&lt;router-view&gt;</code>åŠ¨æ€è§†å›¾ç»„ä»¶ï¼Œç”¨æ¥æ¸²æŸ“å±•ç¤ºä¸è·¯ç”±è·¯å¾„å¯¹åº”çš„ç»„ä»¶</p>
</li>
</ul>
<h3 id="Ajax-Asynchronous-Javascript-Anderson-XML">Ajax(Asynchronous Javascript Anderson XML)</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>å¼‚æ­¥</strong>çš„Javascriptå’ŒXML</p>
</li>
</ul>
<h4 id="ä½œç”¨">ä½œç”¨</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>æ•°æ®äº¤æ¢ï¼šé€šè¿‡å®ƒå¯ä»¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¹¶è·å–æœåŠ¡å™¨å“åº”çš„æ•°æ®</p>
</li>
<li class="lvl-2">
<p>å¼‚æ­¥äº¤äº’ï¼šä¸åˆ·æ–°æ•´ä¸ªé¡µé¢çš„åŒæ—¶ï¼Œè¿›è¡Œå±€éƒ¨åˆ·æ–°</p>
</li>
</ul>
<h4 id="Axios">Axios</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>å¯¹åŸç”Ÿçš„Ajaxè¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–ä¹¦å†™ï¼Œå¿«é€Ÿå¼€å‘</p>
</li>
<li class="lvl-2">
<p>å…¥é—¨ç¨‹åº</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è·å–æ•°æ®GET&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;get()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åˆ é™¤æ•°æ®POST&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;post()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>:<span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>:<span class="string">&quot;http://yuanshen.com&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">result</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">-------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">get</span>(<span class="string">&quot;http://yuanshen.com&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">result</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>)&#125;) <span class="comment">//ç®€åŒ–æ¨¡å¼</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/5da623d6d2e9467ca984a9b4ca3dec8d.jpg" alt=""></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>ç»“åˆVueä¸­çš„mountedç”Ÿå‘½å‘¨æœŸäº‹ä»¶</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    	<span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    	<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">emps</span>:[]</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    	<span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">get</span>(<span class="string">&quot;http://www.xxxx.xxx.com&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">result</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">emps</span> = result.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);   </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="YApi">YApi</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>é«˜æ•ˆï¼Œæ˜“ç”¨ï¼ŒåŠŸèƒ½å¼ºå¤§çš„apiç®¡ç†å¹³å°</p>
</li>
<li class="lvl-2">
<p>ç”¨äºæ¨¡æ‹Ÿå‰ç«¯æ‰€éœ€è¦çš„æ•°æ®</p>
</li>
</ul>
<h3 id="å‰ç«¯å·¥ç¨‹åŒ–">å‰ç«¯å·¥ç¨‹åŒ–</h3>
<h4 id="å®šä¹‰">å®šä¹‰</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>æŒ‡æŠŠå‰ç«¯å¼€å‘æ‰€éœ€çš„å·¥å…·ï¼ŒæŠ€æœ¯ï¼Œæµç¨‹ï¼Œç»éªŒç­‰è¿›è¡Œè§„èŒƒåŒ–ï¼Œæ ‡å‡†åŒ–</p>
</li>
</ul>
<h4 id="vueè„šæ‰‹æ¶çš„ç¯å¢ƒå‡†å¤‡">vueè„šæ‰‹æ¶çš„ç¯å¢ƒå‡†å¤‡</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>å®‰è£…node.js</p>
</li>
<li class="lvl-2">
<p>é…ç½®npmçš„å…¨å±€å®‰è£…è·¯å¾„   <code>npm config set prefix &quot;node.jsçš„å®‰è£…è·¯å¾„&quot;</code></p>
</li>
<li class="lvl-2">
<p>åˆ‡æ¢npmçš„é•œåƒ  <code>npm config set registry é•œåƒåœ°å€</code></p>
<ul class="lvl-2">
<li class="lvl-5">è…¾è®¯ é•œåƒ: <a href="https://mirrors.cloud.tencent.com/npm/">https://mirrors.cloud.tencent.com/npm/</a></li>
<li class="lvl-4">åä¸º é•œåƒ: <a href="https://mirrors.huaweicloud.com/repository/npm/">https://mirrors.huaweicloud.com/repository/npm/</a></li>
<li class="lvl-4">é˜¿é‡Œ é•œåƒï¼š<a href="https://npm.aliyun.com">https://npm.aliyun.com</a></li>
</ul>
</li>
<li class="lvl-2">
<p>å®‰è£…vue-cli <code>npm install -g @vue/cli</code></p>
</li>
<li class="lvl-2">
<p>ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸ <code>vue --version</code></p>
</li>
</ul>
<h4 id="Vueé¡¹ç›®">Vueé¡¹ç›®</h4>
<h5 id="åˆ›å»º">åˆ›å»º</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>å‘½ä»¤è¡Œ <code>vue create vue-project01</code></p>
</li>
<li class="lvl-2">
<p>å›¾å½¢åŒ–ç•Œé¢<code>vue ui</code></p>
</li>
</ul>
<h5 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>node_modules æ•´ä¸ªé¡¹ç›®çš„ä¾èµ–åŒ…</p>
</li>
<li class="lvl-2">
<p>public å­˜æ”¾é¡¹ç›®çš„é™æ€æ–‡ä»¶</p>
</li>
<li class="lvl-2">
<p><mark>src</mark>       å­˜æ”¾é¡¹ç›®çš„æºä»£ç </p>
<ul class="lvl-2">
<li class="lvl-4"><mark>assets</mark>é™æ€èµ„æº</li>
<li class="lvl-4"><mark>components</mark>å¯é‡ç”¨çš„ç»„ä»¶</li>
<li class="lvl-4"><mark>router</mark>è·¯ç”±é…ç½®</li>
<li class="lvl-4"><mark>views</mark>è§†å›¾ç»„ä»¶ï¼ˆé¡µé¢ï¼‰</li>
<li class="lvl-4"><mark>App.vue</mark>å…¥å£é¡µé¢ï¼ˆæ ¹ç»„ä»¶ï¼‰</li>
<li class="lvl-4"><mark>main.js</mark>å…¥å£jsæ–‡ä»¶</li>
</ul>
</li>
<li class="lvl-2">
<p>package.json   æ¨¡æ¿åŸºæœ¬ä¿¡æ¯ï¼Œé¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—ï¼Œç‰ˆæœ¬ä¿¡æ¯</p>
</li>
<li class="lvl-2">
<p>vue.config.js     ä¿å­˜vueé…ç½®çš„æ–‡ä»¶ï¼Œå¦‚ï¼šä»£ç†ï¼Œç«¯å£çš„é…ç½®</p>
</li>
</ul>
<h5 id="æ›´æ”¹ç«¯å£å·">æ›´æ”¹ç«¯å£å·</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>è¿›å…¥vue.config.jsæ–‡ä»¶</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line"> <span class="comment">//æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œå°†ç«¯å£å·æ”¹ä¸º7000</span></span><br><span class="line">  <span class="attr">devServer</span>:&#123;</span><br><span class="line">    <span class="attr">port</span>:<span class="number">7000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Vueçš„ç»„ä»¶æ–‡ä»¶ä»¥.vueç»“å°¾ï¼Œæ¯ä¸ªç»„ä»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆ<code>&lt;template&gt;ï¼Œ&lt;script&gt;ï¼Œ&lt;style&gt;</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span>  //æ¨¡æ¿éƒ¨åˆ†ï¼Œç”ŸæˆHTMLä»£ç </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">message</span>:<span class="string">&quot;hello vue&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  //æ§åˆ¶æ¨¡æ¿çš„æ•°æ®æ¥æºå’Œè¡Œä¸º</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span>  //cssæ ·å¼éƒ¨åˆ†</span><br></pre></td></tr></table></figure>
<h3 id="Element-Vueç»„ä»¶åº“">Element(Vueç»„ä»¶åº“)</h3>
<p><strong>ç»„ä»¶</strong>ï¼šç»„æˆç½‘é¡µçš„éƒ¨ä»¶ï¼Œå¦‚è¶…é“¾æ¥ï¼ŒæŒ‰é’®ï¼Œå›¾ç‰‡ï¼Œè¡¨æ ¼ï¼Œè¡¨å•ï¼Œåˆ†é¡µæ¡ç­‰</p>
<p>urlï¼š<a href="https://element-plus.org/zh-CN/#/zh-CN">ä¸€ä¸ª Vue 3 UI æ¡†æ¶ | Element Plus (element-plus.org)</a></p>
<h4 id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>åœ¨åˆ›å»ºå¥½çš„Vueé¡¹ç›®ä¸­å®‰è£…ElementUIç»„ä»¶åº“ <code> npm install element-plus --save</code></p>
</li>
<li class="lvl-2">
<p>å¼•å…¥ElementUIç»„ä»¶åº“</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>è®¿é—®å®˜ç½‘ï¼Œå¤åˆ¶ç»„ä»¶ä»£ç ï¼Œè°ƒæ•´</p>
</li>
</ul>
<h4 id="æ‰“åŒ…éƒ¨ç½²">æ‰“åŒ…éƒ¨ç½²</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>å…ˆæ‰“åŒ…<code>npm run build</code> å†éƒ¨ç½²</p>
</li>
<li class="lvl-2">
<p>å°†æ‰“åŒ…å¥½çš„distç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°<mark>nginx</mark>å®‰è£…ç›®å½•ä¸‹çš„<mark>htmlç›®å½•</mark></p>
</li>
<li class="lvl-2">
<p><strong>å¯åŠ¨</strong>ï¼šåŒå‡»nginx.exeæ–‡ä»¶ï¼ŒnginxæœåŠ¡å™¨é»˜è®¤å ç”¨<u>æœ¬æœº80ç«¯å£å·</u></p>
<ul class="lvl-2">
<li class="lvl-4">å¦‚æœ80ç«¯å£å·è¢«å ç”¨ï¼Œå¯ä»¥åœ¨<strong>nginx.conf</strong>ä¸­ä¿®æ”¹ç«¯å£å·</li>
<li class="lvl-4">æŸ¥çœ‹ç«¯å£è¢«è°å ç”¨<code>netstat -ano | findStr 80</code></li>
</ul>
</li>
<li class="lvl-2">
<p>è®¿é—®ï¼šæµè§ˆå™¨è¾“å…¥ <code>localhost:ç«¯å£å·</code></p>
</li>
</ul>
<h4 id="Nginx">Nginx</h4>
<p>ä¸€æ¬¾è½»é‡çº§çš„webæœåŠ¡å™¨ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”µå­é‚®ä»¶ä»£ç†æœåŠ¡å™¨</p>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
  </entry>
</search>
