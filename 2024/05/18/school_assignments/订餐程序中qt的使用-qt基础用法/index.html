<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wangmc1024.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"db.json"};
  </script>

  <meta name="description" content="记录了一下项目制作过程中 Qt基本API的使用,以及一些基本概念源码可至GitHub查看">
<meta property="og:type" content="article">
<meta property="og:title" content="订餐程序中qt的使用(qt基础用法)">
<meta property="og:url" content="https://wangmc1024.github.io/2024/05/18/school_assignments/%E8%AE%A2%E9%A4%90%E7%A8%8B%E5%BA%8F%E4%B8%ADqt%E7%9A%84%E4%BD%BF%E7%94%A8-qt%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/index.html">
<meta property="og:site_name" content="Computer Science">
<meta property="og:description" content="记录了一下项目制作过程中 Qt基本API的使用,以及一些基本概念源码可至GitHub查看">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240503151301988.png">
<meta property="article:published_time" content="2024-05-18T07:42:26.000Z">
<meta property="article:modified_time" content="2025-05-04T06:55:08.000Z">
<meta property="article:author" content="三子曰">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240503151301988.png">

<link rel="canonical" href="https://wangmc1024.github.io/2024/05/18/school_assignments/%E8%AE%A2%E9%A4%90%E7%A8%8B%E5%BA%8F%E4%B8%ADqt%E7%9A%84%E4%BD%BF%E7%94%A8-qt%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>订餐程序中qt的使用(qt基础用法) | Computer Science</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Computer Science</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">WangMC Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>时间轴</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangmc1024.github.io/2024/05/18/school_assignments/%E8%AE%A2%E9%A4%90%E7%A8%8B%E5%BA%8F%E4%B8%ADqt%E7%9A%84%E4%BD%BF%E7%94%A8-qt%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/avatar.png">
      <meta itemprop="name" content="三子曰">
      <meta itemprop="description" content="欢迎来到我的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Computer Science">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          订餐程序中qt的使用(qt基础用法)
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-18 15:42:26" itemprop="dateCreated datePublished" datetime="2024-05-18T15:42:26+08:00">2024-05-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-05-04 14:55:08" itemprop="dateModified" datetime="2025-05-04T14:55:08+08:00">2025-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>22k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>20 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>记录了一下项目制作过程中 Qt基本API的使用,以及一些基本概念源码可至GitHub查看</p>
</blockquote>
<span id="more"></span>
<h1>Qt基础知识</h1>
<h3 id="Qt中的窗口类">Qt中的窗口类</h3>
<p><strong>1.1 基础窗口类</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/image-20240503151301988.png" alt="image-20240503151301988"></p>
<p>常用的窗口类是图中下面三个，在创建Qt窗口时，需要让自己的窗口类继承上述三个窗口类中的一个</p>
<p><strong>1.2 窗口的显示方式</strong></p>
<p><mark>模态（modal）窗口</mark>：窗口弹出后，没关闭之前，<strong>不可以</strong>对同一应用程序的其他窗口进行操作；<mark>非模态（modeless）窗口</mark>：窗口弹出后，没关闭之前，<strong>可以</strong>对同一应用程序的其他窗口进行操作</p>
<p><strong>1.3 模态窗口的实现方法</strong></p>
<blockquote>
<p>窗口的show()函数显示的类型是非模态的，有几种方法可以将窗口设为模态，如下</p>
</blockquote>
<p><strong>1.3.1 QDialog对话框</strong></p>
<p>方法一：exec()</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QDialog <span class="title">dlg</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">dlg.<span class="built_in">exec</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//exec是execute（执行）的缩写，当调用exec()函数时，并不会立即返回，只用当对话框关闭才会返回，因此，只有关闭对话框才会执行后续的代码</span></span><br></pre></td></tr></table></figure>
<p>方法二：setModal()</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QDialog <span class="title">dlg</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">dlg.<span class="built_in">setModal</span>(<span class="literal">true</span>);		<span class="comment">//相当于dlg.setWindowModality(Qt::ApplicationModal);</span></span><br><span class="line">dlg.<span class="built_in">show</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>方法三：setWindowModality()</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QDialog <span class="title">dlg</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">dlg.<span class="built_in">setWindowModality</span>(Qt::ApplicationModal);</span><br><span class="line">dlg.<span class="built_in">show</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>==setWindowModality()==的参数设置要阻塞的窗口类型:</p>
<table>
<thead>
<tr>
<th>枚举值</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qt::NonModal</td>
<td>0</td>
<td>非模态，不阻塞任何窗口</td>
</tr>
<tr>
<td>Qt::WindowModal</td>
<td>1</td>
<td>半模态,窗口极模态,阻塞它的父窗口、所有的祖先窗口以及他们的子窗口</td>
</tr>
<tr>
<td>Qt::ApplicationModal</td>
<td>2</td>
<td>模态,应用程序级模态,阻塞应用程序所有的窗口</td>
</tr>
</tbody>
</table>
</blockquote>
<h3 id="常用类">常用类</h3>
<h4 id="字符串类型">字符串类型</h4>
<blockquote>
<p>C   ----&gt;   char*</p>
<p>C++  ------&gt;   std::string</p>
<p>Qt   -------&gt;   QByteArray,QString</p>
</blockquote>
<p>相关函数,查阅qt中的帮助文档,在命令行中输入<code>assistant</code></p>
<h4 id="QVariant类">QVariant类</h4>
<blockquote>
<p>类似于C++中的模板</p>
<p>可以对不同的数据类型进行包装,从而使用<strong>相同</strong>的函数对<strong>不同</strong>类型的数据进行处理</p>
</blockquote>
<p><strong>2.2.1 对Qt中的标准类型进行处理</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">HelloQt::<span class="built_in">HelloQt</span>(QWidget *parent): <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">    ui.<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="type">int</span> value = <span class="built_in">dataPlus</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">    QString str = <span class="built_in">dataPlus</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>).<span class="built_in">toString</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//dataPlus()函数在HelloQt类中已经被声明</span></span><br><span class="line"><span class="function">QVariant <span class="title">HelloQt::dataPlus</span><span class="params">(QVariant a,QVariant b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QVariant ret;</span><br><span class="line">    <span class="keyword">if</span>(a.<span class="built_in">type</span>() == QVariant::<span class="type">int</span> &amp;&amp; b.<span class="built_in">type</span>() == QVariant::<span class="type">int</span>)  <span class="comment">//或者使用QMetaType::Int</span></span><br><span class="line">        ret = <span class="built_in">QVariant</span>(a.<span class="built_in">toInt</span>() + b.<span class="built_in">toInt</span>());</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a.<span class="built_in">type</span>() == QVariant::String &amp;&amp; b.<span class="built_in">type</span>() == QVariant::String)</span><br><span class="line">        ret.<span class="built_in">setValue</span>(a.<span class="built_in">toString</span>() + b.<span class="built_in">toString</span>());</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2.2.2 自定义类型</strong></p>
<blockquote>
<p>若自定义了一个类型,则需要使用Qt中的宏进行声明</p>
<p><mark>Q_DECLARE_METATYPE(Type)</mark></p>
</blockquote>
<p>第一步:定义类型,并注册</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Animal</span>()&#123;&#125;  <span class="comment">//必须要有默认构造函数</span></span><br><span class="line">                <span class="comment">//拷贝构造函数也必须有，不过没有深、浅拷贝时，用默认的即可</span></span><br><span class="line">    <span class="built_in">Animal</span>(QString name):_name(name)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;Animal show name is :&quot;</span>&lt;&lt; _name &lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QString _name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//自定义类型注册</span></span><br><span class="line"><span class="built_in">Q_DECLARE_METATYPE</span>(Animal);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>第二步: 使用fromvalue()存储对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//QVariant vt(Animal(&quot;snake&quot;)); //不可以通过构造函数存自定义类型</span></span><br><span class="line">    QVariant vt;</span><br><span class="line">    <span class="comment">//有以下两种方法可以，存自定义类型</span></span><br><span class="line">    vt = QVariant::<span class="built_in">fromValue</span>(<span class="built_in">Animal</span>(<span class="string">&quot;dog&quot;</span>));    <span class="comment">//①</span></span><br><span class="line">    vt.<span class="built_in">setValue</span>(<span class="built_in">Animal</span>(<span class="string">&quot;cat&quot;</span>));                 <span class="comment">//②</span></span><br><span class="line">    <span class="comment">//如果能转换到Animal类型，就转换</span></span><br><span class="line">    <span class="keyword">if</span>(vt.<span class="built_in">canConvert</span>&lt;Animal&gt;())</span><br><span class="line">    &#123;</span><br><span class="line">        Animal animal = vt.<span class="built_in">value</span>&lt;Animal&gt;();</span><br><span class="line">        animal.<span class="built_in">show</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="QPoint">QPoint</h4>
<blockquote>
<p>QPoint类封装了我们常用用到的坐标点 (x, y), 常用的 API如下</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">QPoint::setX</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QPoint::setY</span><span class="params">(<span class="type">int</span> y)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QPoint::x</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">QPoint::rx</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QPoint::y</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">QPoint::ry</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果x和y坐标都为0则返回true，否则返回false</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isNull</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//返回x()和y()的绝对值之和，传统上称为从原点到该点的向量的“曼哈顿长度”。</span></span></span><br><span class="line"><span class="function"><span class="comment">//(p1-p2).manhattanLength();   </span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">manhattanLength</span><span class="params">()</span> <span class="type">const</span>    </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//返回一个交换了x和y坐标的点:   QPoint&#123;1, 2&#125;.transposed() // &#123;2, 1&#125;  </span></span></span><br><span class="line"><span class="function">QPoint <span class="title">transposed</span><span class="params">()</span> <span class="type">const</span>    </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">// 直接通过坐标对象进行算术运算: 加减乘除</span></span></span><br><span class="line"><span class="function">QPoint &amp;QPoint::<span class="keyword">operator</span>*</span>=(<span class="type">float</span> factor);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>*=(<span class="type">double</span> factor);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>*=(<span class="type">int</span> factor);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>+=(<span class="type">const</span> QPoint &amp;point);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>-=(<span class="type">const</span> QPoint &amp;point);</span><br><span class="line">QPoint &amp;QPoint::<span class="keyword">operator</span>/=(qreal divisor);</span><br></pre></td></tr></table></figure>
<h4 id="QLine">QLine</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置直线的起点坐标</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setP1</span><span class="params">(<span class="type">const</span> QPoint &amp;p1)</span></span>;</span><br><span class="line"><span class="comment">// 设置直线的终点坐标</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setP2</span><span class="params">(<span class="type">const</span> QPoint &amp;p2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setPoints</span><span class="params">(<span class="type">const</span> QPoint &amp;p1, <span class="type">const</span> QPoint &amp;p2)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::setLine</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">QPoint <span class="title">QLine::p1</span><span class="params">()</span> <span class="type">const</span></span>;      <span class="comment">// 返回直线的起始点坐标</span></span><br><span class="line"><span class="function">QPoint <span class="title">QLine::p2</span><span class="params">()</span> <span class="type">const</span></span>;      <span class="comment">// 返回直线的终点坐标</span></span><br><span class="line"><span class="function">QPoint <span class="title">QLine::center</span><span class="params">()</span> <span class="type">const</span></span>;  <span class="comment">// 返回值直线的中心点坐标, (p1() + p2()) / 2   </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::x1</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// 返回值直线起点的 x 坐标</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::y1</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// 返回值直线起点的 y 坐标</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::x2</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// 返回值直线终点的 x 坐标</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::y2</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// 返回值直线终点的 y 坐标</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::dx</span><span class="params">()</span> <span class="type">const</span>          <span class="comment">//返回直线向量的水平分量  </span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QLine::dy</span><span class="params">()</span> <span class="type">const</span>          <span class="comment">//返回直线向量的垂直分量  </span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 用给定的坐标点平移这条直线</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::translate</span><span class="params">(<span class="type">const</span> QPoint &amp;offset)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QLine::translate</span><span class="params">(<span class="type">int</span> dx, <span class="type">int</span> dy)</span></span>;</span><br><span class="line"><span class="comment">// 用给定的坐标点平移这条直线, 返回平移之后的坐标点(不会改变这条线的坐标)</span></span><br><span class="line"><span class="function">QLine <span class="title">QLine::translated</span><span class="params">(<span class="type">const</span> QPoint &amp;offset)</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function">QLine <span class="title">QLine::translated</span><span class="params">(<span class="type">int</span> dx, <span class="type">int</span> dy)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直线对象进行比较</span></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> QLine &amp;line) <span class="type">const</span>;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> QLine &amp;line) <span class="type">const</span>;</span><br></pre></td></tr></table></figure>
<h4 id="2-5-QSize">2.5 QSize</h4>
<blockquote>
<p>在QT中QSize类用来形容长度和宽度, 常用的API如下:</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWidth</span><span class="params">(<span class="type">int</span> width)</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setHeight</span><span class="params">(<span class="type">int</span> height)</span></span>;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">width</span><span class="params">()</span> <span class="type">const</span></span>;      <span class="comment">// 得到宽度</span></span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">rwidth</span><span class="params">()</span></span>;          <span class="comment">// 得到宽度的引用</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">height</span><span class="params">()</span> <span class="type">const</span></span>;     <span class="comment">// 得到高度</span></span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">rheight</span><span class="params">()</span></span>;         <span class="comment">// 得到高度的引用</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">transpose</span><span class="params">()</span></span>;           <span class="comment">// 交换高度和宽度的值</span></span><br><span class="line"><span class="function">QSize <span class="title">transposed</span><span class="params">()</span> <span class="type">const</span></span>;   <span class="comment">// 交换高度和宽度的值, 返回交换之后的尺寸信息</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">//返回一个大小，宽为当前大小与other的最小值，高为当前大小与other的最小值</span></span><br><span class="line"><span class="function">QSize <span class="title">boundedTo</span><span class="params">(<span class="type">const</span> QSize&amp; oterSize)</span></span></span><br><span class="line"><span class="function"><span class="comment">//返回一个大小，宽为当前大小与other的最大值，高为当前大小与other的最大值    </span></span></span><br><span class="line"><span class="function">QSize <span class="title">expandedTo</span><span class="params">(<span class="type">const</span> QSize &amp;otherSize)</span> <span class="type">const</span>    </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="function">根据指定的模式，按给定的宽度和高度缩放矩形:  </span></span></span><br><span class="line"><span class="comment"><span class="function">    如果mode为Qt::IgnoreAspectRatio，则大小设置为(width, height)。  </span></span></span><br><span class="line"><span class="comment"><span class="function">    如果mode为Qt::KeepAspectRatio，当前大小将在内部缩放到一个尽可能大的矩形(宽度，高度)，保持高宽比。  </span></span></span><br><span class="line"><span class="comment"><span class="function">    如果mode是Qt::KeepAspectRatioByExpanding，当前大小被缩放到一个矩形，尽可能小的外部(宽度，高度)，保持长宽比。  </span></span></span><br><span class="line"><span class="comment"><span class="function">*/</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">scale</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height, Qt::AspectRatioMode mode)</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">scale</span><span class="params">(<span class="type">const</span> QSize &amp;size, Qt::AspectRatioMode mode)</span></span></span><br><span class="line"><span class="function">QSize <span class="title">scaled</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height, Qt::AspectRatioMode mode)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">QSize <span class="title">scaled</span><span class="params">(<span class="type">const</span> QSize &amp;s, Qt::AspectRatioMode mode)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">​</span></span><br><span class="line"><span class="function"><span class="comment">// 进行算法运算: 加减乘除</span></span></span><br><span class="line"><span class="function">QSize &amp;<span class="keyword">operator</span>*</span>=(qreal factor);</span><br><span class="line">QSize &amp;<span class="keyword">operator</span>+=(<span class="type">const</span> QSize &amp;size);</span><br><span class="line">QSize &amp;<span class="keyword">operator</span>-=(<span class="type">const</span> QSize &amp;size);</span><br><span class="line">QSize &amp;<span class="keyword">operator</span>/=(qreal divisor);</span><br></pre></td></tr></table></figure>
<h3 id="信号和槽">信号和槽</h3>
<p><strong>3.1 信号(signal)</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>信号本质是事件,如按钮点击,窗口刷新等</p>
</li>
<li class="lvl-2">
<p>信号以函数形式呈现</p>
</li>
</ul>
<p><mark>Qt中信号的发出者可能是某个实例化的类对象,对象内部可以进行相关事件的检测</mark></p>
<p><strong>3.2 槽(slot)</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>槽函数是一类特殊的功能函数,在编码过程中也<strong>可以作为类的普通成员函数来使用</strong></p>
</li>
<li class="lvl-2">
<p>对发出来的信号进行处理</p>
</li>
</ul>
<p><mark>槽函数的所有者也是某个类的实例对象</mark></p>
<p><strong>3.3 connect函数</strong></p>
<blockquote>
<p>connect函数属于QObject类</p>
</blockquote>
<p>需要通过这个函数建立signal和slot二者之间的联系</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QMetaObject::Connection <span class="title">QObject::connect</span><span class="params">(<span class="type">const</span> QObject *sender,<span class="type">const</span> <span class="type">char</span> *signal, </span></span></span><br><span class="line"><span class="params"><span class="function">                                        <span class="type">const</span> QObject *receiver, [<span class="type">static</span>] <span class="type">const</span> <span class="type">char</span> *method, Qt::ConnectionType type = Qt::AutoConnection)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">------------------------------------------------------------------------</span></span><br><span class="line"><span class="function">sender: 发送信号的对象。</span></span><br><span class="line"><span class="function">signal: 发送的信号的名称,说明发出了什么信号,以字符串形式表示。</span></span><br><span class="line"><span class="function">receiver: 接收信号的对象。</span></span><br><span class="line"><span class="function">method: 接收对象中用于响应信号的槽函数的名称，以字符串形式表示。</span></span><br><span class="line"><span class="function">type: 连接类型，决定了信号和槽的连接方式。默认为 Qt::AutoConnection。</span></span><br><span class="line"><span class="function">   </span></span><br></pre></td></tr></table></figure>
<p>例如，如果你有一个按钮（QPushButton），并且想要在按钮被点击时执行某些操作，你可以将按钮的 <code>clicked()</code> 信号连接到一个槽函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line">QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Click me&quot;</span>);</span><br><span class="line">MyObject *myObject = <span class="keyword">new</span> MyObject;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接按钮的clicked信号到myObject的slotMethod槽函数</span></span><br><span class="line">QObject::<span class="built_in">connect</span>(button, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), myObject, <span class="built_in">SLOT</span>(<span class="built_in">slotMethod</span>()));</span><br><span class="line"><span class="comment">//当按钮被点击时，MyObject 的 slotMethod 方法将被调用。</span></span><br></pre></td></tr></table></figure>
<p><strong>3.4 自定义信号和槽</strong></p>
<blockquote>
<p>为了使自定义信号和槽正常工作，确保你的类<mark>继承自 QObject</mark> 并且在类的定义中添加<mark>Q_OBJECT 宏</mark>。同时，确保项目的 .pro 文件中添加了 <code>QT += core</code>，以确保 Qt 核心模块被正确链接</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>自定义信号，通常信号只有声明没有实现</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mySignal</span><span class="params">(<span class="type">int</span> value)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>自定义槽：</p>
</li>
</ul>
<blockquote>
<p>自定义槽是普通的成员函数，可以在信号发射时被调用。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span> slots:   <span class="comment">//新版本中不可以省略不写</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mySlot</span><span class="params">(<span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Received value:&quot;</span> &lt;&lt; value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>触发自定义信号</p>
</li>
</ul>
<blockquote>
<p>需在类中的某个函数中使用 <code>emit</code> 关键字,可加可不加,加了更规范</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyClass::someFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 触发信号</span></span><br><span class="line">    <span class="function">emit <span class="title">mySignal</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line">MyClass obj;</span><br><span class="line">obj.<span class="built_in">someFunction</span>(); <span class="comment">// 这将触发 mySignal，导致 mySlot 被调用。</span></span><br></pre></td></tr></table></figure>
<p><strong>3.5 补充</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>信号可以连接多个槽函数</p>
</li>
<li class="lvl-2">
<p>信号可以连接信号</p>
</li>
<li class="lvl-2">
<p>信号函数和槽函数的参数有一些要求：</p>
<ol>
<li class="lvl-5"><strong>参数类型必须兼容</strong>：信号函数和槽函数的参数类型必须兼容，最好是相同的类型或可以自动转换的类型。如果参数类型不兼容，连接将无法建立，并且编译器将会报错。</li>
<li class="lvl-5"><strong>参数数量必须匹配</strong>：信号函数和槽函数的参数数量必须匹配。如果信号函数有参数而槽函数没有，或者槽函数有参数而信号函数没有，连接仍然是有效的。但是，如果参数数量不匹配，连接将无法建立。</li>
<li class="lvl-5"><strong>参数的顺序和类型必须一致</strong>：参数的顺序和类型在信号函数和槽函数之间必须一致。如果顺序或类型不匹配，连接将无法建立。</li>
</ol>
</li>
</ul>
<h3 id="4-QLineEdit">4. QLineEdit</h3>
<p><strong>4.1 获取和设置文本内容：</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>QString text() const：返回当前文本框中的文本内容。</p>
</li>
<li class="lvl-2">
<p>setText(const QString &amp;text)：设置文本框的文本内容。</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QLineEdit *lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>();</span><br><span class="line">lineEdit-&gt;<span class="built_in">setText</span>(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前文本内容</span></span><br><span class="line">QString currentText = lineEdit-&gt;<span class="built_in">text</span>();</span><br></pre></td></tr></table></figure>
<p><strong>4.2 密码模式</strong></p>
<p><strong>setEchoMode(QLineEdit::EchoMode mode)：设置文本框的显示模式。常用的模式有：</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>QLineEdit::Normal：默认模式，显示输入的文本。</p>
</li>
<li class="lvl-2">
<p>QLineEdit::Password：以密码形式显示文本，用圆点或星号代替实际字符。</p>
</li>
<li class="lvl-2">
<p>QLineEdit::PasswordEchoOnEdit：在编辑时以密码形式显示文本，但在失去焦点后显示圆点。</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QLineEdit *lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>();</span><br><span class="line">lineEdit-&gt;<span class="built_in">setEchoMode</span>(QLineEdit::Password);</span><br></pre></td></tr></table></figure>
<p><strong>4.3 设置最大长度</strong></p>
<p><strong>使用setMaxLentgh方法可以限制用户输入的最大字符数</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QLineEdit* lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="keyword">this</span>);</span><br><span class="line">lineEdit- &gt;<span class="built_in">setMaxLength</span>(<span class="number">10</span>);<span class="comment">//限制输入的最大长度为10个字符</span></span><br></pre></td></tr></table></figure>
<h3 id="QLable">QLable</h3>
<p><strong>5.1 设置字体的颜色 大小等</strong></p>
<p>可以使用setStyleSheet()函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对某个组件局部使用</span></span><br><span class="line">ui-&gt;display-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;color: red;&quot;</span> <span class="string">&quot;text-align: right;&quot;</span> <span class="string">&quot; font-size: 10px;&quot;</span>);</span><br><span class="line"><span class="comment">//对某个窗口下的某种组件设置</span></span><br><span class="line">MainWindow-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;QLineEdit&#123; background-color: lime&#125;&quot;</span>);</span><br><span class="line"><span class="comment">//全局使用</span></span><br><span class="line"><span class="comment">/*使用qApp的setStyleSheet函数可以为应用程序全局设置样式。例如下面为应用程序的QLineEdit组件设置样式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">qApp-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;QLineEdit&#123; background-color: gray &#125;&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="6-使用类设置字体属性-颜色">6. 使用类设置字体属性 颜色</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>QFont<code>类的构造函数</code>QFont(const QString &amp;family, int pointSize, int weight = -1, bool italic = false)</strong></p>
</li>
</ul>
<blockquote>
<p><code>family</code>：字符串，表示字体的家族名称，例如&quot;Arial&quot;，&quot;Times New Roman&quot;等。</p>
<p><code>pointSize</code>：整数，代表字体的大小，以磅（point）为单位。</p>
<p><code>weight</code>：整数，指定字体的粗细，通常是100到1000的范围内的数值；-1表示使用默认值。</p>
<p><code>italic</code>：布尔值，表示字体是否是斜体；false表示非斜体，true表示斜体。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置字体属性</span></span><br><span class="line"><span class="function">QFont <span class="title">font</span><span class="params">(<span class="string">&quot;Arial&quot;</span>, <span class="number">16</span>)</span></span>;</span><br><span class="line">font.<span class="built_in">setBold</span>(<span class="literal">true</span>);</span><br><span class="line">ui-&gt;lineEdit-&gt;<span class="built_in">setFont</span>(font);</span><br><span class="line"><span class="comment">//设置对齐位置</span></span><br><span class="line">ui-&gt;lineEdit-&gt;<span class="built_in">setAlignment</span>(Qt::AlignRight);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong><code>QPalette</code> 类用于管理窗口部件的外观，包括背景色、前景色和文本格式等</strong></p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置颜色</span></span><br><span class="line"> QPalette palette;</span><br><span class="line"> palette.<span class="built_in">setColor</span>(QPalette::Text, Qt::red);</span><br><span class="line"> ui-&gt;lineEdit-&gt;<span class="built_in">setPalette</span>(palette);</span><br><span class="line"><span class="comment">//setColor() 方法第一个参数是要设置的颜色属性，第二个参数是要应用的颜色值。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在设置控件背景色填充时，一定要先调用setAutoFillBackground(true)函数，来运行自动填充背景</span></span><br></pre></td></tr></table></figure>
<h3 id="7-QProgressBar">7. QProgressBar</h3>
<blockquote>
<p>可与QSlider QScrollBar QDial配合使用</p>
</blockquote>
<p><strong>format属性</strong></p>
<p>%p:完成的百分比  %v:当前值  %m:总步骤数</p>
<p>默认值为%p%</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(ui-&gt;slider,&amp;QSlider::valueChanged,<span class="keyword">this</span>,&amp;Widget::do_valueChanged);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::do_valueChanged</span><span class="params">(<span class="type">int</span> value)</span></span>;</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;progressBar-&gt;<span class="built_in">setValue</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-日期时间数据">8. 日期时间数据</h3>
<blockquote>
<p>QTime    QDate    QDateTime    QCalendarWidget</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widgey::on_btnGetTime_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QDateTime curDateTime = QDateTime::<span class="built_in">currentDateTime</span>();</span><br><span class="line">    ui-&gt;timeEdit-&gt;<span class="built_in">setTime</span>(curDateTime.<span class="built_in">time</span>());</span><br><span class="line">    ui-&gt;editTime-&gt;<span class="built_in">setText</span>(curDateTime.<span class="built_in">toString</span>(<span class="string">&quot;hh:mm:ss&quot;</span>))</span><br><span class="line">    </span><br><span class="line">    ui-&gt;timeEdit-&gt;<span class="built_in">setDate</span>(curDateTime.<span class="built_in">date</span>());</span><br><span class="line">    ui-&gt;editTime-&gt;<span class="built_in">setText</span>(curDateTime.<span class="built_in">toString</span>(<span class="string">&quot;yy-MM-dd&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    ui-&gt;timeEdit-&gt;<span class="built_in">setDateTime</span>(curDateTime);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::on_calendarWidget_selectionChanged</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//获取日历控件上选择的日期</span></span><br><span class="line">    QString str = ui-&gt;calendarWidget-&gt;<span class="built_in">selectedDate</span>().<span class="built_in">toString</span>(<span class="string">&quot;yyyy年M月d日&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-计时器-QTimer">9. 计时器 QTimer</h3>
<blockquote>
<p>timer 超时后会发出timeout()信号，所以在创建好定时器对象后给其建立信号与槽</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#inlcude <span class="string">&lt;QTimer&gt;</span></span></span><br><span class="line"></span><br><span class="line">QTimer *timer = <span class="keyword">new</span> QTimer;</span><br><span class="line">timer-&gt;<span class="built_in">setSingleShot</span>(<span class="literal">false</span>);<span class="comment">//设置是否只使用一次</span></span><br><span class="line">timer-&gt;<span class="built_in">setInterval</span>(<span class="number">2000</span>);<span class="comment">//设置时间间隔,以毫秒为单位</span></span><br><span class="line"></span><br><span class="line">timer-&gt;<span class="built_in">start</span>();<span class="comment">//启动</span></span><br><span class="line">timer-&gt;<span class="built_in">stop</span>();<span class="comment">//停止</span></span><br><span class="line"><span class="built_in">connect</span>(timer, <span class="built_in">SIGNAL</span>(<span class="built_in">timeout</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">onTimeout</span>()));</span><br></pre></td></tr></table></figure>
<h3 id="10-QTabWidget">10. QTabWidget</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 QTabWidget 实例，用于包含多个选项卡</span></span><br><span class="line">QTabWidget *tabWidget = <span class="keyword">new</span> QTabWidget;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置选项卡的形状为三角形</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">setTabShape</span>(QTabWidget::Triangular);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置选项卡可移动</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">setMovable</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置选项卡的位置为左侧</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">setTabPosition</span>(QTabWidget::West);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建三个子窗口部件(QWidget)，用作每个选项卡的内容</span></span><br><span class="line">QWidget *pageWidget_0 = <span class="keyword">new</span> QWidget;</span><br><span class="line">QWidget *pageWidget_1 = <span class="keyword">new</span> QWidget;</span><br><span class="line">QWidget *pageWidget_2 = <span class="keyword">new</span> QWidget;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将每个子窗口部件添加到选项卡中，同时设置相应的标签</span></span><br><span class="line">tabWidget-&gt;<span class="built_in">addTab</span>(pageWidget_0, <span class="string">&quot;第一页&quot;</span>);</span><br><span class="line">tabWidget-&gt;<span class="built_in">addTab</span>(pageWidget_1, <span class="string">&quot;第二页&quot;</span>);</span><br><span class="line">tabWidget-&gt;<span class="built_in">addTab</span>(pageWidget_2, <span class="string">&quot;第三页&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="11-QTableView-QStandardItemModel-QItemSelectionModel">11. QTableView QStandardItemModel QItemSelectionModel</h3>
<blockquote>
<p><strong>QStandardItemModel</strong>是Qt提供的用于存储和操作标准项数据模型的类。它继承自QAbstractItemModel，并提供了一种方便的方式来组织和展示数据。通过添加、删除、修改或移动标准项，可以对数据进行操作。</p>
<p><strong>QItemSelectionModel</strong>则是用于管理项选择状态的类。它是一个与视图交互的模型，负责跟踪用户选择的项以及通知相关视图进行相应更新。QItemSelectionModel可以监听并响应用户选择项变化事件，同时也可以通过编程方式改变选择状态。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFileDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QStandardItemModel&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QItemSelectionModel&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>:<span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QStandardItemModel* m_model; <span class="comment">// 数据模型</span></span><br><span class="line">    QItemSelectionModel* m_selection; <span class="comment">// 选择模型</span></span><br><span class="line">    QLabel* labCurFile; <span class="comment">// 当前文件标签</span></span><br><span class="line">    QLabel* labCellPos; <span class="comment">// 当前单元格位置标签</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    .........</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">do_currentChanged</span><span class="params">(<span class="type">const</span> QModelIndex &amp;current,<span class="type">const</span> QModelIndex &amp;previous)</span></span>;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget* parent):<span class="built_in">QMainWindow</span>(parent),<span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    labCurFile = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="string">&quot;当前文件&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line">    labCurFile-&gt;<span class="built_in">setMinimumWidth</span>(<span class="number">200</span>);</span><br><span class="line">    ui-&gt;statusBar-&gt;<span class="built_in">addWidget</span>(labCurFile); <span class="comment">// 将当前文件标签添加到状态栏</span></span><br><span class="line">    </span><br><span class="line">    m_model = <span class="keyword">new</span> <span class="built_in">QStandardItemModel</span>(<span class="number">2</span>,<span class="number">6</span>,<span class="keyword">this</span>); <span class="comment">// 创建数据模型，2行6列</span></span><br><span class="line">    m_selection = <span class="keyword">new</span> <span class="built_in">QItemSelectionModel</span>(m_model,<span class="keyword">this</span>); <span class="comment">// 创建选择模型</span></span><br><span class="line">    </span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setModel</span>(m_model); <span class="comment">// 设置表格视图的模型</span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setSelectionModel</span>(m_selection); <span class="comment">// 设置表格视图的选择模型</span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setSelectionMode</span>(QAbstractItemView::ExtendedSelection); <span class="comment">// 设置选择模式</span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">setSelectionBehavior</span>(QAbstractItemView::SelectItems); <span class="comment">// 设置选择行为</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">connect</span>(m_selection,&amp;QItemSelection::currentChanged,<span class="keyword">this</span>,&amp;MainWindow::do_currentChanged);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWinidow::do_currentChanged</span><span class="params">(<span class="type">const</span> QModelIndex &amp;current,<span class="type">const</span> QModelIndex &amp;previous)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(current.<span class="built_in">isValid</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        labCellPos-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;当前单元格:%d行,%d列&quot;</span>,current.<span class="built_in">row</span>(),current.<span class="built_in">column</span>()));</span><br><span class="line">        QStandardItem *aItem = m_model-&gt;<span class="built_in">itemFromIndex</span>(current); <span class="comment">// 获取当前单元格的项</span></span><br><span class="line">        ui-&gt;actFontBold-&gt;<span class="built_in">setChecked</span>(aItem-&gt;<span class="built_in">font</span>().<span class="built_in">bold</span>()); <span class="comment">// 检查当前单元格的文本是否为粗体,如果当前单元格的文本为粗体，动作将被选中，否则动作将取消选中</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_actOpen_triggered</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 获取当前应用程序的路径</span></span><br><span class="line">    QString curPath = QCoreApplication::<span class="built_in">applicationDirPath</span>();</span><br><span class="line">    <span class="comment">// 打开文件对话框以获取要打开的文件路径</span></span><br><span class="line">    QString aFilePath = QFileDialog::<span class="built_in">getOpenFileName</span>(<span class="keyword">this</span>, <span class="string">&quot;打开一个文件&quot;</span>, curPath, <span class="string">&quot;数据文件(*.txt);;所有文件(*.*)&quot;</span>);</span><br><span class="line">    <span class="comment">// 如果文件名为空，则退出函数</span></span><br><span class="line">    <span class="keyword">if</span> (aFileName.<span class="built_in">isEmpty</span>()) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 打开文件</span></span><br><span class="line">    <span class="function">QFile <span class="title">aFile</span><span class="params">(aFileName)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!aFile.<span class="built_in">open</span>(QIODevice::ReadOnly | QIODevice::Text)) <span class="keyword">return</span>; <span class="comment">// 如果文件无法打开，则退出函数</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取文件内容并显示在界面上</span></span><br><span class="line">    QStringList aFileContent;</span><br><span class="line">    <span class="function">QTextStream <span class="title">aStream</span><span class="params">(&amp;aFile)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (!aStream.<span class="built_in">atEnd</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        QString str = aStream.<span class="built_in">readLine</span>();</span><br><span class="line">        ui-&gt;plainTextEdit-&gt;<span class="built_in">appendPlainText</span>(str); <span class="comment">// 在文本框中添加一行内容</span></span><br><span class="line">        aFileContent.<span class="built_in">append</span>(str); <span class="comment">// 将读取的每一行内容添加到QStringList中</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 关闭文件</span></span><br><span class="line">    aFile.<span class="built_in">close</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 更新界面显示，显示当前打开的文件名</span></span><br><span class="line">    labCurFile-&gt;<span class="built_in">setText</span>(<span class="string">&quot;当前文件:&quot;</span> + aFileName);</span><br><span class="line">    <span class="comment">// 启用一个动作（假设这里是一个菜单项或按钮），允许用户追加内容</span></span><br><span class="line">    ui-&gt;actAppend-&gt;<span class="built_in">setEnabled</span>(<span class="literal">true</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">iniModelData</span>(aFileContent); <span class="comment">// 初始化模型数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::iniModelData</span><span class="params">(QStringList&amp; aFileContent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> rowCnt  = aFileContent.<span class="built_in">size</span>(); <span class="comment">// 获取文件内容的行数</span></span><br><span class="line">    m_model-&gt;<span class="built_in">setRowCount</span>(rowCnt - <span class="number">1</span>); <span class="comment">// 设置表格模型的行数（减去标题行）</span></span><br><span class="line"></span><br><span class="line">    QString header = aFileContent.<span class="built_in">at</span>(<span class="number">0</span>); <span class="comment">// 获取标题行</span></span><br><span class="line">    QStringList headerList = header.<span class="built_in">split</span>(<span class="built_in">QRegularExpression</span>(<span class="string">R&quot;(\s+)&quot;</span>), Qt::SkipEmptyParts); <span class="comment">// 根据空白字符拆分标题行</span></span><br><span class="line">    m_model-&gt;<span class="built_in">setHorizontalHeaderLabels</span>(headerList); <span class="comment">// 设置表头标签</span></span><br><span class="line"></span><br><span class="line">    QStandardItem* aItem; <span class="comment">// 用于创建每个单元格的项</span></span><br><span class="line">    <span class="type">int</span> j;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; rowCnt; i++) <span class="comment">// 从第二行开始遍历文件内容</span></span><br><span class="line">    &#123;</span><br><span class="line">        QString aLineText = aFileContent.<span class="built_in">at</span>(i); <span class="comment">// 获取当前行的文本</span></span><br><span class="line">        QStringList tmpList = aLineText.<span class="built_in">split</span>(<span class="built_in">QRegularExpression</span>(<span class="string">R&quot;(\s+)&quot;</span>), Qt::SkipEmptyParts); <span class="comment">// 根据空白字符拆分当前行</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">6</span>; j++) <span class="comment">// 遍历当前行的每一列（假设每行有6列）</span></span><br><span class="line">        &#123;</span><br><span class="line">            aItem = <span class="keyword">new</span> <span class="built_in">QStandardItem</span>(tmpList.<span class="built_in">at</span>(j)); <span class="comment">// 创建一个新的项，内容为当前列的值</span></span><br><span class="line">            m_model-&gt;<span class="built_in">setItem</span>(i - <span class="number">1</span>, j, aItem); <span class="comment">// 在指定位置设置项</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理最后一列</span></span><br><span class="line">        aItem = <span class="keyword">new</span> <span class="built_in">QStandardItem</span>(tmpList.<span class="built_in">at</span>(j)); <span class="comment">// 创建最后一列的项</span></span><br><span class="line">        aItem-&gt;<span class="built_in">setCheckable</span>(<span class="literal">true</span>); <span class="comment">// 设置项为可选中的</span></span><br><span class="line">        aItem-&gt;<span class="built_in">setBackground</span>(<span class="built_in">QBrush</span>(Qt::yellow)); <span class="comment">// 设置项的背景颜色为黄色</span></span><br><span class="line">        <span class="keyword">if</span>(tmpList.<span class="built_in">at</span>(j) == <span class="string">&quot;0&quot;</span>) <span class="comment">// 如果值为0，则设置为未选中状态</span></span><br><span class="line">        &#123;</span><br><span class="line">            aItem-&gt;<span class="built_in">setCheckState</span>(Qt::Unchecked);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// 否则设置为选中状态</span></span><br><span class="line">        &#123;</span><br><span class="line">            aItem-&gt;<span class="built_in">setCheckState</span>(Qt::Checked);</span><br><span class="line">        &#125;</span><br><span class="line">        m_model-&gt;<span class="built_in">setItem</span>(i - <span class="number">1</span>, j, aItem); <span class="comment">// 在指定位置设置项</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="12-QTableWidget">12. QTableWidget</h3>
<blockquote>
<p>QTableWidget继承自QTableView,QTableWidget是QTableView的子类，主要的区别是QTableView可以使用自定义的数据模型来显示内容(也就是先要通过setModel来绑定数据源)，而QTableWidget则<strong>只能</strong>使用标准的数据模型，并且其单元格数据是<mark>QTableWidgetItem</mark>的对象来实现的</p>
</blockquote>
<p><strong>12.1 初始化表格数据</strong><br>
界面上的“初始化表格数据”按钮根据表格的行数，生成数据填充表格，并为每个单元格生成 QTableWidgetItem 对象，设置相应属性。下面是 btnlniData 的 clicked() 信号的槽函数代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::readMenuInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;menuInfo.dat&quot;</span>)</span></span>;</span><br><span class="line">	file.<span class="built_in">open</span>(QIODevice::ReadOnly);</span><br><span class="line">	<span class="keyword">if</span> (!file.<span class="built_in">isOpen</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;文件打开失败1&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		QString name;</span><br><span class="line">		QString type;</span><br><span class="line">		<span class="type">double</span> price;</span><br><span class="line">		<span class="type">double</span> discount;</span><br><span class="line">		QString imagePath;</span><br><span class="line">		<span class="function">QDataStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">		<span class="keyword">while</span> (!in.<span class="built_in">atEnd</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			in &gt;&gt; name &gt;&gt; type &gt;&gt; price &gt;&gt; discount&gt;&gt; imagePath;</span><br><span class="line">			ui-&gt;menuTable-&gt;<span class="built_in">insertRow</span>(ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>());</span><br><span class="line">			<span class="built_in">creatTableRows</span>(ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>()<span class="number">-1</span>, name, type, price, discount,imagePath);<span class="comment">//注意要将获得的行数减一</span></span><br><span class="line">			<span class="built_in">qDebug</span>() &lt;&lt; name &lt;&lt; type &lt;&lt; price &lt;&lt; discount &lt;&lt; imagePath;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	file.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">QTableWidget::<span class="built_in">clearContents</span>() 函数清除表格数据区的所有内容，但是不清除表头。</span><br><span class="line"></span><br><span class="line">QTableWidget::<span class="built_in">rowCount</span>() 函数返回表格数据区的行数。</span><br><span class="line"></span><br><span class="line">在 <span class="keyword">for</span> 循环里为每一行生成需要显示的数据，然后调用自定义函数 <span class="built_in">creatTableRows</span>()，为表格一行的各个单元格生成 QTableWidgetItem 对象。</span><br></pre></td></tr></table></figure>
<p>creatTableRows() 是在窗体类里自定义的函数，其实现代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::creatTableRows</span><span class="params">(<span class="type">int</span> rowNo,  QString menuName, QString type, <span class="type">double</span> price, <span class="type">double</span> discount,QString imagePath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	QTableWidgetItem* item;</span><br><span class="line">	</span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(menuName);</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">0</span>, item);</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(type);</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">1</span>, item);	</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(QString::<span class="built_in">number</span>(price, <span class="string">&#x27;f&#x27;</span>, <span class="number">2</span>));</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">2</span>, item);</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(QString::<span class="built_in">number</span>(discount, <span class="string">&#x27;f&#x27;</span>, <span class="number">2</span>));</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">3</span>, item);</span><br><span class="line"></span><br><span class="line">	item = <span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(imagePath);</span><br><span class="line">	item-&gt;<span class="built_in">setTextAlignment</span>(Qt::AlignCenter);</span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setItem</span>(rowNo, <span class="number">4</span>, item);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//将第四列隐藏</span></span><br><span class="line">	ui-&gt;menuTable-&gt;<span class="built_in">setColumnHidden</span>(<span class="number">4</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>12.2 获得当前单元格数据</strong><br>
当鼠标在表格上单击单元格时，被选中的单元格是当前单元格。通过<mark>QTableWidget 的 currentColumn() 和 currentRow()</mark> 可以获得当前单元格的列编号和行编号。</p>
<p>当前单元格发生切换时，会发射==currentCellChanged() 信号和 currentItemChanged()==信号，两个信号都可以利用，只是传递的参数不同。</p>
<p>对 currentCellChanged() 信号编写槽函数，用于获取当前单元格的数据，以及当前行的学生的学号信息，代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_tableInfo_currentCellChanged</span><span class="params">(<span class="type">int</span> currentRow, <span class="type">int</span> currentColumn, <span class="type">int</span> previousRow, <span class="type">int</span> previousColumn)</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//当前选择单元格发生变化时的响应</span></span><br><span class="line">   <span class="built_in">Q_UNUSED</span>(previousRow);</span><br><span class="line">   <span class="built_in">Q_UNUSED</span>(previousColumn);</span><br><span class="line">    QTableWidgetItem* item=ui-&gt;tableInfo-&gt;<span class="built_in">item</span>(currentRow,currentColumn); <span class="comment">//获取单元格的 Item</span></span><br><span class="line">    <span class="keyword">if</span>  (item==<span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    labCellIndex-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;当前单元格坐标：%d 行，%d 列&quot;</span>,currentRow,currentColumn));</span><br><span class="line">    <span class="type">int</span> cellType=item-&gt;<span class="built_in">type</span>();<span class="comment">//获取单元格的类型</span></span><br><span class="line">    labCellType-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;当前单元格类型：%d&quot;</span>,cellType));</span><br><span class="line">    item=ui-&gt;tableInfo-&gt;<span class="built_in">item</span>(currentRow,MainWindow::colName); <span class="comment">//取当前行第1列的单元格的 item</span></span><br><span class="line">    <span class="type">int</span> ID=item-&gt;<span class="built_in">data</span>(Qt::UserRole).<span class="built_in">toInt</span>();<span class="comment">//用data()函数提取自定义数据，也就是创建单元格时存储的学生 ID</span></span><br><span class="line">    labStudID-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">asprintf</span>(<span class="string">&quot;学生ID：%d&quot;</span>,ID));<span class="comment">//学生ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.3 插入、添加、删除行</strong><br>
QTableWidget 处理行操作的函数如下：</p>
<p>insertRow(int row)：在行号为row的行前面插入一行，如果row等于或大于总行数，则在表格最后添加一行。insertRow()函数只是插入一个空行，不会为单元格创建QTableWidgetItem对象，需要手工为单元格创建。<br>
removeRow(int row)：删除行号为 row 的行。</p>
<p>下面是界面上“插入行” “添加行”“删除当前行”按钮的响应代码。在插入行之后，会调用 createItemsARow() 函数，为新创建的空行的各单元格构造 QTableWidgetItem 对象：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_btnInsertRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//插入一行</span></span><br><span class="line">    <span class="comment">//int curRow;</span></span><br><span class="line">    <span class="type">int</span> curRow=ui-&gt;tableInfo-&gt;<span class="built_in">currentRow</span>();<span class="comment">//当前行号</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">insertRow</span>(curRow); <span class="comment">//插入一行，但不会自动为单元格创建item</span></span><br><span class="line">    <span class="built_in">createItemsARow</span>(curRow, <span class="string">&quot;新学生&quot;</span>, <span class="string">&quot;男&quot;</span>,</span><br><span class="line">          QDate::<span class="built_in">fromString</span>(<span class="string">&quot;1990-1-1&quot;</span>,<span class="string">&quot;yyyy-M-d&quot;</span>),<span class="string">&quot;苗族&quot;</span>,<span class="literal">true</span>,<span class="number">60</span> ); <span class="comment">//为某一行创建items</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_btnAppendRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//添加一行</span></span><br><span class="line">    <span class="comment">//int curRow;</span></span><br><span class="line">    <span class="type">int</span> curRow=ui-&gt;tableInfo-&gt;<span class="built_in">rowCount</span>();<span class="comment">//总行号</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">insertRow</span>(curRow);<span class="comment">//在表格尾部添加一行</span></span><br><span class="line">    <span class="built_in">createItemsARow</span>(curRow, <span class="string">&quot;新生&quot;</span>, <span class="string">&quot;女&quot;</span>,</span><br><span class="line">          QDate::<span class="built_in">fromString</span>(<span class="string">&quot;2000-1-1&quot;</span>,<span class="string">&quot;yyyy-M-d&quot;</span>),<span class="string">&quot;满族&quot;</span>,<span class="literal">false</span>,<span class="number">50</span> ); <span class="comment">//为某一行创建items</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_btnDelCurRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//删除当前行及其items</span></span><br><span class="line">    <span class="comment">//int curRow;</span></span><br><span class="line">    <span class="type">int</span> curRow=ui-&gt;tableInfo-&gt;<span class="built_in">currentRow</span>();<span class="comment">//当前行号</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">removeRow</span>(curRow); <span class="comment">//删除当前行及其items</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.4 自动调整行高和列宽</strong><br>
QTableWidget 有几个函数自动调整表格的行高和列宽，分别如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">resizeColumnsToContents</span>()：自动调整所有列的宽度，以适应其内容。</span><br><span class="line"><span class="built_in">resizeColumnToContents</span>(<span class="type">int</span> column)：自动调整列号为 co/www 的列的宽度。</span><br><span class="line"><span class="built_in">resizeRowsToContents</span>()：自动调整所有行的高度，以适应其内容。</span><br><span class="line"><span class="built_in">resizeRowToContents</span>(<span class="type">int</span> row)：自动调整行号为 raw 的行的高度。</span><br><span class="line">    </span><br><span class="line">这几个函数实际上是 QTableWidget 的父类 QTableView 的函数。</span><br></pre></td></tr></table></figure>
<p><strong>12.4 其他属性控制</strong><br>
设置表格内容是否可编辑：QTableWidget 的 EditTriggers 属性表示是否可编辑，以及进入编辑状态的方式。界面上的&quot;表格可编辑&quot;复选框的槽函数代码为：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxTabEditable_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//设置编辑模式</span></span><br><span class="line">    <span class="keyword">if</span> (checked)</span><br><span class="line">        <span class="comment">//双击或获取焦点后单击，进入编辑状态</span></span><br><span class="line">        ui-&gt;tableInfo-&gt;<span class="built_in">setEditTriggers</span>(QAbstractItemView::DoubleClicked | QAbstractItemView::SelectedClicked);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ui-&gt;tableInfo-&gt;<span class="built_in">setEditTriggers</span>(QAbstractItemView::NoEditTriggers); <span class="comment">//不允许编辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>设置行表头、列表头是否显示：horizontalHeader()获取行表头，verticalHeader()获取列表头，然后可设置其可见性。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxHeaderH_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//是否显示水平表头</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setVisible</span>(checked);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxHeaderV_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//是否显示垂直表头</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">verticalHeader</span>()-&gt;<span class="built_in">setVisible</span>(checked);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>间隔行底色：setAltematingRowColors() 函数可以设置表格的行是否用交替底色显示，若为交替底色，则间隔的一行会用灰色作为底色。具体底色的设置需要用 styleSheet。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_chkBoxRowColor_clicked</span><span class="params">(<span class="type">bool</span> checked)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">setAlternatingRowColors</span>(checked);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>选择模式：setSelectionBehavior() 函数可以设置选择方式为单元格选择，还是行选择：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_rBtnSelectItem_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//选择行为：单元格选择</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">setSelectionBehavior</span>(QAbstractItemView::Selectltems);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_rBtnSelectRow_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//选择行为：行选择</span></span><br><span class="line">    ui-&gt;tableInfo-&gt;<span class="built_in">setSelectionBehavior</span>(QAbstractItemView::SelectRows);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.6 遍历表格读取数据</strong><br>
“读取表格内容到文本”按钮演示了将表格数据区的内容全部读出的方法，它将每个单元格的文字读出，同一行的单元格的文字用空格分隔开，作为文本的一行，然后将这行文字作为文本编辑器的一行内容，代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::saveMenuInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;menuInfo.dat&quot;</span>)</span></span>;</span><br><span class="line">	file.<span class="built_in">open</span>(QIODevice::WriteOnly);</span><br><span class="line">	<span class="keyword">if</span> (!file.<span class="built_in">isOpen</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;文件打开失败2&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		QDataStream <span class="built_in">out</span>(&amp;file);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>(); i++)</span><br><span class="line">		&#123;</span><br><span class="line">			QTableWidgetItem* item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">0</span>);</span><br><span class="line">			QString menuName = item-&gt;<span class="built_in">text</span>();</span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">1</span>);</span><br><span class="line">			QString type = item-&gt;<span class="built_in">text</span>();</span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">2</span>);</span><br><span class="line">			<span class="type">double</span> price = item-&gt;<span class="built_in">text</span>().<span class="built_in">toDouble</span>();</span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">3</span>);</span><br><span class="line">			<span class="type">double</span> discount = item-&gt;<span class="built_in">text</span>().<span class="built_in">toDouble</span>();</span><br><span class="line"></span><br><span class="line">			item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i, <span class="number">4</span>);</span><br><span class="line">			QString imagePath = item-&gt;<span class="built_in">text</span>();</span><br><span class="line"></span><br><span class="line">			out &lt;&lt; menuName &lt;&lt; type &lt;&lt; price &lt;&lt; discount&lt;&lt;imagePath;</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line">		file.<span class="built_in">close</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>12.7 在一个qtablewidgetitem中设置复选框</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">QTableWidgetItem* item;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">	item = ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i,<span class="number">0</span>);</span><br><span class="line">	item-&gt;<span class="built_in">setCheckState</span>(Qt::Unchecked);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//单一控制 利用QTableWidget::cellchanged()函数判断单元格内容的变化</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//批量删除被选择的行</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ManagerInterface::on_deleteBut_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ui-&gt;menuTable-&gt;<span class="built_in">rowCount</span>(); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(ui-&gt;menuTable-&gt;<span class="built_in">item</span>(i,<span class="number">0</span>)-&gt;<span class="built_in">checkState</span>() == Qt::Checked)</span><br><span class="line">			ui-&gt;menuTable-&gt;<span class="built_in">removeRow</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a>
          </div>

        



        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/05/16/school_assignments/%E8%AE%A2%E9%A4%90%E7%A8%8B%E5%BA%8F%E6%B6%89%E5%8F%8A%E7%9F%A5%E8%AF%86/" rel="prev" title="订餐程序涉及知识">
      <i class="fa fa-chevron-left"></i> 订餐程序涉及知识
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/05/30/school_assignments/%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7%E7%A0%81%E7%AE%80%E6%98%93%E8%AF%86%E5%88%AB-opencv-Qt/" rel="next" title="身份证号码简易识别(opencv + Qt)">
      身份证号码简易识别(opencv + Qt) <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">Qt基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Qt%E4%B8%AD%E7%9A%84%E7%AA%97%E5%8F%A3%E7%B1%BB"><span class="nav-number">1.0.1.</span> <span class="nav-text">Qt中的窗口类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%B1%BB"><span class="nav-number">1.0.2.</span> <span class="nav-text">常用类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#QVariant%E7%B1%BB"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">QVariant类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#QPoint"><span class="nav-number">1.0.2.3.</span> <span class="nav-text">QPoint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#QLine"><span class="nav-number">1.0.2.4.</span> <span class="nav-text">QLine</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-QSize"><span class="nav-number">1.0.2.5.</span> <span class="nav-text">2.5 QSize</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD"><span class="nav-number">1.0.3.</span> <span class="nav-text">信号和槽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-QLineEdit"><span class="nav-number">1.0.4.</span> <span class="nav-text">4. QLineEdit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#QLable"><span class="nav-number">1.0.5.</span> <span class="nav-text">QLable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E4%BD%BF%E7%94%A8%E7%B1%BB%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E5%B1%9E%E6%80%A7-%E9%A2%9C%E8%89%B2"><span class="nav-number">1.0.6.</span> <span class="nav-text">6. 使用类设置字体属性 颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-QProgressBar"><span class="nav-number">1.0.7.</span> <span class="nav-text">7. QProgressBar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E6%95%B0%E6%8D%AE"><span class="nav-number">1.0.8.</span> <span class="nav-text">8. 日期时间数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E8%AE%A1%E6%97%B6%E5%99%A8-QTimer"><span class="nav-number">1.0.9.</span> <span class="nav-text">9. 计时器 QTimer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-QTabWidget"><span class="nav-number">1.0.10.</span> <span class="nav-text">10. QTabWidget</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-QTableView-QStandardItemModel-QItemSelectionModel"><span class="nav-number">1.0.11.</span> <span class="nav-text">11. QTableView QStandardItemModel QItemSelectionModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-QTableWidget"><span class="nav-number">1.0.12.</span> <span class="nav-text">12. QTableWidget</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="三子曰"
      src="https://cdn.jsdelivr.net/gh/MengChangWang/Blog_Image@main/img/avatar.png">
  <p class="site-author-name" itemprop="name">三子曰</p>
  <div class="site-description" itemprop="description">欢迎来到我的博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/MengChangWang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MengChangWang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wangmc1024@gmail.com" title="E-Mail → mailto:wangmc1024@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; Wed Mar 27 2024 08:00:00 GMT+0800 (中国标准时间) – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">三子曰</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">549k</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '2719e26e1ea715ee8429',
      clientSecret: '77a4ce8e9410a002f05c8f2c2b398c952a012d7c',
      repo        : 'mengchangwang.github.io',
      owner       : 'MengChangWang',
      admin       : ['MengChangWang'],
      id          : 'e33057c5a6691265eab8026e1c312774',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
